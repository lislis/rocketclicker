const __vite__fileDeps=["assets/browserAll-B938OL9Y.js","assets/webworkerAll-D1qwLx7L.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();/**
* @vue/shared v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function qc(s,t){const e=new Set(s.split(","));return i=>e.has(i)}const Ot={},pr=[],Ie=()=>{},w0=()=>!1,Na=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Kc=s=>s.startsWith("onUpdate:"),ae=Object.assign,Zc=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},E0=Object.prototype.hasOwnProperty,Ct=(s,t)=>E0.call(s,t),ut=Array.isArray,mr=s=>ka(s)==="[object Map]",cm=s=>ka(s)==="[object Set]",mt=s=>typeof s=="function",Qt=s=>typeof s=="string",Xi=s=>typeof s=="symbol",Dt=s=>s!==null&&typeof s=="object",um=s=>(Dt(s)||mt(s))&&mt(s.then)&&mt(s.catch),dm=Object.prototype.toString,ka=s=>dm.call(s),A0=s=>ka(s).slice(8,-1),fm=s=>ka(s)==="[object Object]",Jc=s=>Qt(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,mn=qc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ua=s=>{const t=Object.create(null);return e=>t[e]||(t[e]=s(e))},T0=/-(\w)/g,ye=Ua(s=>s.replace(T0,(t,e)=>e?e.toUpperCase():"")),S0=/\B([A-Z])/g,Vi=Ua(s=>s.replace(S0,"-$1").toLowerCase()),Ga=Ua(s=>s.charAt(0).toUpperCase()+s.slice(1)),mh=Ua(s=>s?`on${Ga(s)}`:""),_s=(s,t)=>!Object.is(s,t),gh=(s,t)=>{for(let e=0;e<s.length;e++)s[e](t)},pm=(s,t,e,i=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:i,value:e})},C0=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let id;const mm=()=>id||(id=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qc(s){if(ut(s)){const t={};for(let e=0;e<s.length;e++){const i=s[e],r=Qt(i)?M0(i):Qc(i);if(r)for(const n in r)t[n]=r[n]}return t}else if(Qt(s)||Dt(s))return s}const R0=/;(?![^(]*\))/g,I0=/:([^]+)/,P0=/\/\*[^]*?\*\//g;function M0(s){const t={};return s.replace(P0,"").split(R0).forEach(e=>{if(e){const i=e.split(I0);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function tu(s){let t="";if(Qt(s))t=s;else if(ut(s))for(let e=0;e<s.length;e++){const i=tu(s[e]);i&&(t+=i+" ")}else if(Dt(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const B0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",F0=qc(B0);function gm(s){return!!s||s===""}const Mi=s=>Qt(s)?s:s==null?"":ut(s)||Dt(s)&&(s.toString===dm||!mt(s.toString))?JSON.stringify(s,_m,2):String(s),_m=(s,t)=>t&&t.__v_isRef?_m(s,t.value):mr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,r],n)=>(e[_h(i,n)+" =>"]=r,e),{})}:cm(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>_h(e))}:Xi(t)?_h(t):Dt(t)&&!ut(t)&&!fm(t)?String(t):t,_h=(s,t="")=>{var e;return Xi(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};/**
* @vue/reactivity v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class ym{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Te,!t&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Te;try{return Te=this,t()}finally{Te=e}}}on(){Te=this}off(){Te=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function $a(s){return new ym(s)}function O0(s,t=Te){t&&t.active&&t.effects.push(s)}function xm(){return Te}function D0(s){Te&&Te.cleanups.push(s)}let Fi;class eu{constructor(t,e,i,r){this.fn=t,this.trigger=e,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,O0(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,hi();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(L0(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),li()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=ti,e=Fi;try{return ti=!0,Fi=this,this._runnings++,rd(this),this.fn()}finally{nd(this),this._runnings--,Fi=e,ti=t}}stop(){this.active&&(rd(this),nd(this),this.onStop&&this.onStop(),this.active=!1)}}function L0(s){return s.value}function rd(s){s._trackId++,s._depsLength=0}function nd(s){if(s.deps.length>s._depsLength){for(let t=s._depsLength;t<s.deps.length;t++)vm(s.deps[t],s);s.deps.length=s._depsLength}}function vm(s,t){const e=s.get(t);e!==void 0&&t._trackId!==e&&(s.delete(t),s.size===0&&s.cleanup())}let ti=!0,Sl=0;const bm=[];function hi(){bm.push(ti),ti=!1}function li(){const s=bm.pop();ti=s===void 0?!0:s}function su(){Sl++}function iu(){for(Sl--;!Sl&&Cl.length;)Cl.shift()()}function wm(s,t,e){if(t.get(s)!==s._trackId){t.set(s,s._trackId);const i=s.deps[s._depsLength];i!==t?(i&&vm(i,s),s.deps[s._depsLength++]=t):s._depsLength++}}const Cl=[];function Em(s,t,e){su();for(const i of s.keys()){let r;i._dirtyLevel<t&&(r??(r=s.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=t),i._shouldSchedule&&(r??(r=s.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&Cl.push(i.scheduler)))}iu()}const Am=(s,t)=>{const e=new Map;return e.cleanup=s,e.computed=t,e},ha=new WeakMap,Oi=Symbol(""),Rl=Symbol("");function xe(s,t,e){if(ti&&Fi){let i=ha.get(s);i||ha.set(s,i=new Map);let r=i.get(e);r||i.set(e,r=Am(()=>i.delete(e))),wm(Fi,r)}}function Cs(s,t,e,i,r,n){const o=ha.get(s);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&ut(s)){const h=Number(i);o.forEach((l,c)=>{(c==="length"||!Xi(c)&&c>=h)&&a.push(l)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":ut(s)?Jc(e)&&a.push(o.get("length")):(a.push(o.get(Oi)),mr(s)&&a.push(o.get(Rl)));break;case"delete":ut(s)||(a.push(o.get(Oi)),mr(s)&&a.push(o.get(Rl)));break;case"set":mr(s)&&a.push(o.get(Oi));break}su();for(const h of a)h&&Em(h,4);iu()}function N0(s,t){const e=ha.get(s);return e&&e.get(t)}const k0=qc("__proto__,__v_isRef,__isVue"),Tm=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Xi)),od=U0();function U0(){const s={};return["includes","indexOf","lastIndexOf"].forEach(t=>{s[t]=function(...e){const i=It(this);for(let n=0,o=this.length;n<o;n++)xe(i,"get",n+"");const r=i[t](...e);return r===-1||r===!1?i[t](...e.map(It)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{s[t]=function(...e){hi(),su();const i=It(this)[t].apply(this,e);return iu(),li(),i}}),s}function G0(s){Xi(s)||(s=String(s));const t=It(this);return xe(t,"has",s),t.hasOwnProperty(s)}class Sm{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){const r=this._isReadonly,n=this._isShallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return n;if(e==="__v_raw")return i===(r?n?Q0:Pm:n?Im:Rm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=ut(t);if(!r){if(o&&Ct(od,e))return Reflect.get(od,e,i);if(e==="hasOwnProperty")return G0}const a=Reflect.get(t,e,i);return(Xi(e)?Tm.has(e):k0(e))||(r||xe(t,"get",e),n)?a:Wt(a)?o&&Jc(e)?a:a.value:Dt(a)?r?Bm(a):Gi(a):a}}class Cm extends Sm{constructor(t=!1){super(!1,t)}set(t,e,i,r){let n=t[e];if(!this._isShallow){const h=Pn(n);if(!la(i)&&!Pn(i)&&(n=It(n),i=It(i)),!ut(t)&&Wt(n)&&!Wt(i))return h?!1:(n.value=i,!0)}const o=ut(t)&&Jc(e)?Number(e)<t.length:Ct(t,e),a=Reflect.set(t,e,i,r);return t===It(r)&&(o?_s(i,n)&&Cs(t,"set",e,i):Cs(t,"add",e,i)),a}deleteProperty(t,e){const i=Ct(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&i&&Cs(t,"delete",e,void 0),r}has(t,e){const i=Reflect.has(t,e);return(!Xi(e)||!Tm.has(e))&&xe(t,"has",e),i}ownKeys(t){return xe(t,"iterate",ut(t)?"length":Oi),Reflect.ownKeys(t)}}class $0 extends Sm{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const H0=new Cm,X0=new $0,V0=new Cm(!0);const ru=s=>s,Ha=s=>Reflect.getPrototypeOf(s);function so(s,t,e=!1,i=!1){s=s.__v_raw;const r=It(s),n=It(t);e||(_s(t,n)&&xe(r,"get",t),xe(r,"get",n));const{has:o}=Ha(r),a=i?ru:e?au:Mn;if(o.call(r,t))return a(s.get(t));if(o.call(r,n))return a(s.get(n));s!==r&&s.get(t)}function io(s,t=!1){const e=this.__v_raw,i=It(e),r=It(s);return t||(_s(s,r)&&xe(i,"has",s),xe(i,"has",r)),s===r?e.has(s):e.has(s)||e.has(r)}function ro(s,t=!1){return s=s.__v_raw,!t&&xe(It(s),"iterate",Oi),Reflect.get(s,"size",s)}function ad(s){s=It(s);const t=It(this);return Ha(t).has.call(t,s)||(t.add(s),Cs(t,"add",s,s)),this}function hd(s,t){t=It(t);const e=It(this),{has:i,get:r}=Ha(e);let n=i.call(e,s);n||(s=It(s),n=i.call(e,s));const o=r.call(e,s);return e.set(s,t),n?_s(t,o)&&Cs(e,"set",s,t):Cs(e,"add",s,t),this}function ld(s){const t=It(this),{has:e,get:i}=Ha(t);let r=e.call(t,s);r||(s=It(s),r=e.call(t,s)),i&&i.call(t,s);const n=t.delete(s);return r&&Cs(t,"delete",s,void 0),n}function cd(){const s=It(this),t=s.size!==0,e=s.clear();return t&&Cs(s,"clear",void 0,void 0),e}function no(s,t){return function(i,r){const n=this,o=n.__v_raw,a=It(o),h=t?ru:s?au:Mn;return!s&&xe(a,"iterate",Oi),o.forEach((l,c)=>i.call(r,h(l),h(c),n))}}function oo(s,t,e){return function(...i){const r=this.__v_raw,n=It(r),o=mr(n),a=s==="entries"||s===Symbol.iterator&&o,h=s==="keys"&&o,l=r[s](...i),c=e?ru:t?au:Mn;return!t&&xe(n,"iterate",h?Rl:Oi),{next(){const{value:u,done:d}=l.next();return d?{value:u,done:d}:{value:a?[c(u[0]),c(u[1])]:c(u),done:d}},[Symbol.iterator](){return this}}}}function Ls(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function W0(){const s={get(n){return so(this,n)},get size(){return ro(this)},has:io,add:ad,set:hd,delete:ld,clear:cd,forEach:no(!1,!1)},t={get(n){return so(this,n,!1,!0)},get size(){return ro(this)},has:io,add:ad,set:hd,delete:ld,clear:cd,forEach:no(!1,!0)},e={get(n){return so(this,n,!0)},get size(){return ro(this,!0)},has(n){return io.call(this,n,!0)},add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear"),forEach:no(!0,!1)},i={get(n){return so(this,n,!0,!0)},get size(){return ro(this,!0)},has(n){return io.call(this,n,!0)},add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear"),forEach:no(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=oo(n,!1,!1),e[n]=oo(n,!0,!1),t[n]=oo(n,!1,!0),i[n]=oo(n,!0,!0)}),[s,e,t,i]}const[z0,j0,Y0,q0]=W0();function nu(s,t){const e=t?s?q0:Y0:s?j0:z0;return(i,r,n)=>r==="__v_isReactive"?!s:r==="__v_isReadonly"?s:r==="__v_raw"?i:Reflect.get(Ct(e,r)&&r in i?e:i,r,n)}const K0={get:nu(!1,!1)},Z0={get:nu(!1,!0)},J0={get:nu(!0,!1)};const Rm=new WeakMap,Im=new WeakMap,Pm=new WeakMap,Q0=new WeakMap;function tx(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ex(s){return s.__v_skip||!Object.isExtensible(s)?0:tx(A0(s))}function Gi(s){return Pn(s)?s:ou(s,!1,H0,K0,Rm)}function Mm(s){return ou(s,!1,V0,Z0,Im)}function Bm(s){return ou(s,!0,X0,J0,Pm)}function ou(s,t,e,i,r){if(!Dt(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const n=r.get(s);if(n)return n;const o=ex(s);if(o===0)return s;const a=new Proxy(s,o===2?i:e);return r.set(s,a),a}function ei(s){return Pn(s)?ei(s.__v_raw):!!(s&&s.__v_isReactive)}function Pn(s){return!!(s&&s.__v_isReadonly)}function la(s){return!!(s&&s.__v_isShallow)}function Fm(s){return s?!!s.__v_raw:!1}function It(s){const t=s&&s.__v_raw;return t?It(t):s}function Wn(s){return Object.isExtensible(s)&&pm(s,"__v_skip",!0),s}const Mn=s=>Dt(s)?Gi(s):s,au=s=>Dt(s)?Bm(s):s;class Om{constructor(t,e,i,r){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new eu(()=>t(this._value),()=>gn(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=It(this);return(!t._cacheable||t.effect.dirty)&&_s(t._value,t._value=t.effect.run())&&gn(t,4),hu(t),t.effect._dirtyLevel>=2&&gn(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function sx(s,t,e=!1){let i,r;const n=mt(s);return n?(i=s,r=Ie):(i=s.get,r=s.set),new Om(i,r,n||!r,e)}function hu(s){var t;ti&&Fi&&(s=It(s),wm(Fi,(t=s.dep)!=null?t:s.dep=Am(()=>s.dep=void 0,s instanceof Om?s:void 0)))}function gn(s,t=4,e){s=It(s);const i=s.dep;i&&Em(i,t)}function Wt(s){return!!(s&&s.__v_isRef===!0)}function Pe(s){return Dm(s,!1)}function ix(s){return Dm(s,!0)}function Dm(s,t){return Wt(s)?s:new rx(s,t)}class rx{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:It(t),this._value=e?t:Mn(t)}get value(){return hu(this),this._value}set value(t){const e=this.__v_isShallow||la(t)||Pn(t);t=e?t:It(t),_s(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Mn(t),gn(this,4))}}function xt(s){return Wt(s)?s.value:s}const nx={get:(s,t,e)=>xt(Reflect.get(s,t,e)),set:(s,t,e,i)=>{const r=s[t];return Wt(r)&&!Wt(e)?(r.value=e,!0):Reflect.set(s,t,e,i)}};function Lm(s){return ei(s)?s:new Proxy(s,nx)}class ox{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:e,set:i}=t(()=>hu(this),()=>gn(this));this._get=e,this._set=i}get value(){return this._get()}set value(t){this._set(t)}}function ax(s){return new ox(s)}function hx(s){const t=ut(s)?new Array(s.length):{};for(const e in s)t[e]=Nm(s,e);return t}class lx{constructor(t,e,i){this._object=t,this._key=e,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return N0(It(this._object),this._key)}}class cx{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function ux(s,t,e){return Wt(s)?s:mt(s)?new cx(s):Dt(s)&&arguments.length>1?Nm(s,t,e):Pe(s)}function Nm(s,t,e){const i=s[t];return Wt(i)?i:new lx(s,t,e)}/**
* @vue/runtime-core v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function si(s,t,e,i){try{return i?s(...i):s()}catch(r){Xa(r,t,e)}}function je(s,t,e,i){if(mt(s)){const r=si(s,t,e,i);return r&&um(r)&&r.catch(n=>{Xa(n,t,e)}),r}if(ut(s)){const r=[];for(let n=0;n<s.length;n++)r.push(je(s[n],t,e,i));return r}}function Xa(s,t,e,i=!0){const r=t?t.vnode:null;if(t){let n=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${e}`;for(;n;){const l=n.ec;if(l){for(let c=0;c<l.length;c++)if(l[c](s,o,a)===!1)return}n=n.parent}const h=t.appContext.config.errorHandler;if(h){hi(),si(h,null,10,[s,o,a]),li();return}}dx(s,e,r,i)}function dx(s,t,e,i=!0){console.error(s)}let Bn=!1,Il=!1;const ue=[];let cs=0;const gr=[];let Hs=null,Ri=0;const km=Promise.resolve();let lu=null;function zn(s){const t=lu||km;return s?t.then(this?s.bind(this):s):t}function fx(s){let t=cs+1,e=ue.length;for(;t<e;){const i=t+e>>>1,r=ue[i],n=Fn(r);n<s||n===s&&r.pre?t=i+1:e=i}return t}function cu(s){(!ue.length||!ue.includes(s,Bn&&s.allowRecurse?cs+1:cs))&&(s.id==null?ue.push(s):ue.splice(fx(s.id),0,s),Um())}function Um(){!Bn&&!Il&&(Il=!0,lu=km.then($m))}function px(s){const t=ue.indexOf(s);t>cs&&ue.splice(t,1)}function mx(s){ut(s)?gr.push(...s):(!Hs||!Hs.includes(s,s.allowRecurse?Ri+1:Ri))&&gr.push(s),Um()}function ud(s,t,e=Bn?cs+1:0){for(;e<ue.length;e++){const i=ue[e];if(i&&i.pre){if(s&&i.id!==s.uid)continue;ue.splice(e,1),e--,i()}}}function Gm(s){if(gr.length){const t=[...new Set(gr)].sort((e,i)=>Fn(e)-Fn(i));if(gr.length=0,Hs){Hs.push(...t);return}for(Hs=t,Ri=0;Ri<Hs.length;Ri++)Hs[Ri]();Hs=null,Ri=0}}const Fn=s=>s.id==null?1/0:s.id,gx=(s,t)=>{const e=Fn(s)-Fn(t);if(e===0){if(s.pre&&!t.pre)return-1;if(t.pre&&!s.pre)return 1}return e};function $m(s){Il=!1,Bn=!0,ue.sort(gx);try{for(cs=0;cs<ue.length;cs++){const t=ue[cs];t&&t.active!==!1&&si(t,null,14)}}finally{cs=0,ue.length=0,Gm(),Bn=!1,lu=null,(ue.length||gr.length)&&$m()}}function _x(s,t,...e){if(s.isUnmounted)return;const i=s.vnode.props||Ot;let r=e;const n=t.startsWith("update:"),o=n&&t.slice(7);if(o&&o in i){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:u,trim:d}=i[c]||Ot;d&&(r=e.map(f=>Qt(f)?f.trim():f)),u&&(r=e.map(C0))}let a,h=i[a=mh(t)]||i[a=mh(ye(t))];!h&&n&&(h=i[a=mh(Vi(t))]),h&&je(h,s,6,r);const l=i[a+"Once"];if(l){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,je(l,s,6,r)}}function Hm(s,t,e=!1){const i=t.emitsCache,r=i.get(s);if(r!==void 0)return r;const n=s.emits;let o={},a=!1;if(!mt(s)){const h=l=>{const c=Hm(l,t,!0);c&&(a=!0,ae(o,c))};!e&&t.mixins.length&&t.mixins.forEach(h),s.extends&&h(s.extends),s.mixins&&s.mixins.forEach(h)}return!n&&!a?(Dt(s)&&i.set(s,null),null):(ut(n)?n.forEach(h=>o[h]=null):ae(o,n),Dt(s)&&i.set(s,o),o)}function Va(s,t){return!s||!Na(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ct(s,t[0].toLowerCase()+t.slice(1))||Ct(s,Vi(t))||Ct(s,t))}let ce=null,Wa=null;function ca(s){const t=ce;return ce=s,Wa=s&&s.type.__scopeId||null,t}function uu(s){Wa=s}function du(){Wa=null}function Ho(s,t=ce,e){if(!t||s._n)return s;const i=(...r)=>{i._d&&wd(-1);const n=ca(t);let o;try{o=s(...r)}finally{ca(n),i._d&&wd(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function yh(s){const{type:t,vnode:e,proxy:i,withProxy:r,propsOptions:[n],slots:o,attrs:a,emit:h,render:l,renderCache:c,props:u,data:d,setupState:f,ctx:p,inheritAttrs:m}=s,g=ca(s);let y,v;try{if(e.shapeFlag&4){const w=r||i,A=w;y=as(l.call(A,w,c,u,f,d,p)),v=a}else{const w=t;y=as(w.length>1?w(u,{attrs:a,slots:o,emit:h}):w(u,null)),v=t.props?a:yx(a)}}catch(w){xn.length=0,Xa(w,s,1),y=Zt(ri)}let _=y;if(v&&m!==!1){const w=Object.keys(v),{shapeFlag:A}=_;w.length&&A&7&&(n&&w.some(Kc)&&(v=xx(v,n)),_=Sr(_,v,!1,!0))}return e.dirs&&(_=Sr(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(e.dirs):e.dirs),e.transition&&(_.transition=e.transition),y=_,ca(g),y}const yx=s=>{let t;for(const e in s)(e==="class"||e==="style"||Na(e))&&((t||(t={}))[e]=s[e]);return t},xx=(s,t)=>{const e={};for(const i in s)(!Kc(i)||!(i.slice(9)in t))&&(e[i]=s[i]);return e};function vx(s,t,e){const{props:i,children:r,component:n}=s,{props:o,children:a,patchFlag:h}=t,l=n.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&h>=0){if(h&1024)return!0;if(h&16)return i?dd(i,o,l):!!o;if(h&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const d=c[u];if(o[d]!==i[d]&&!Va(l,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?dd(i,o,l):!0:!!o;return!1}function dd(s,t,e){const i=Object.keys(t);if(i.length!==Object.keys(s).length)return!0;for(let r=0;r<i.length;r++){const n=i[r];if(t[n]!==s[n]&&!Va(e,n))return!0}return!1}function bx({vnode:s,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=t.vnode).el=e,t=t.parent;else break}}const wx="components";function Ex(s,t){return Tx(wx,s,!0,t)||s}const Ax=Symbol.for("v-ndc");function Tx(s,t,e=!0,i=!1){const r=ce||ne;if(r){const n=r.type;{const a=yv(n,!1);if(a&&(a===t||a===ye(t)||a===Ga(ye(t))))return n}const o=fd(r[s]||n[s],t)||fd(r.appContext[s],t);return!o&&i?n:o}}function fd(s,t){return s&&(s[t]||s[ye(t)]||s[Ga(ye(t))])}const Sx=s=>s.__isSuspense;function Cx(s,t){t&&t.pendingBranch?ut(s)?t.effects.push(...s):t.effects.push(s):mx(s)}const Rx=Symbol.for("v-scx"),Ix=()=>fe(Rx);function Xm(s,t){return za(s,null,t)}function Px(s,t){return za(s,null,{flush:"sync"})}const ao={};function ii(s,t,e){return za(s,t,e)}function za(s,t,{immediate:e,deep:i,flush:r,once:n,onTrack:o,onTrigger:a}=Ot){if(t&&n){const R=t;t=(...P)=>{R(...P),A()}}const h=ne,l=R=>i===!0?R:ur(R,i===!1?1:void 0);let c,u=!1,d=!1;if(Wt(s)?(c=()=>s.value,u=la(s)):ei(s)?(c=()=>l(s),u=!0):ut(s)?(d=!0,u=s.some(R=>ei(R)||la(R)),c=()=>s.map(R=>{if(Wt(R))return R.value;if(ei(R))return l(R);if(mt(R))return si(R,h,2)})):mt(s)?t?c=()=>si(s,h,2):c=()=>(f&&f(),je(s,h,3,[p])):c=Ie,t&&i){const R=c;c=()=>ur(R())}let f,p=R=>{f=_.onStop=()=>{si(R,h,4),f=_.onStop=void 0}},m;if(Ka)if(p=Ie,t?e&&je(t,h,3,[c(),d?[]:void 0,p]):c(),r==="sync"){const R=Ix();m=R.__watcherHandles||(R.__watcherHandles=[])}else return Ie;let g=d?new Array(s.length).fill(ao):ao;const y=()=>{if(!(!_.active||!_.dirty))if(t){const R=_.run();(i||u||(d?R.some((P,S)=>_s(P,g[S])):_s(R,g)))&&(f&&f(),je(t,h,3,[R,g===ao?void 0:d&&g[0]===ao?[]:g,p]),g=R)}else _.run()};y.allowRecurse=!!t;let v;r==="sync"?v=y:r==="post"?v=()=>ge(y,h&&h.suspense):(y.pre=!0,h&&(y.id=h.uid),v=()=>cu(y));const _=new eu(c,Ie,v),w=xm(),A=()=>{_.stop(),w&&Zc(w.effects,_)};return t?e?y():g=_.run():r==="post"?ge(_.run.bind(_),h&&h.suspense):_.run(),m&&m.push(A),A}function Mx(s,t,e){const i=this.proxy,r=Qt(s)?s.includes(".")?Vm(i,s):()=>i[s]:s.bind(i,i);let n;mt(t)?n=t:(n=t.handler,e=t);const o=jn(this),a=za(r,n.bind(i),e);return o(),a}function Vm(s,t){const e=t.split(".");return()=>{let i=s;for(let r=0;r<e.length&&i;r++)i=i[e[r]];return i}}function ur(s,t=1/0,e){if(t<=0||!Dt(s)||s.__v_skip||(e=e||new Set,e.has(s)))return s;if(e.add(s),t--,Wt(s))ur(s.value,t,e);else if(ut(s))for(let i=0;i<s.length;i++)ur(s[i],t,e);else if(cm(s)||mr(s))s.forEach(i=>{ur(i,t,e)});else if(fm(s))for(const i in s)ur(s[i],t,e);return s}function pi(s,t,e,i){const r=s.dirs,n=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];n&&(a.oldValue=n[o].value);let h=a.dir[i];h&&(hi(),je(h,e,8,[s.el,a,s,t]),li())}}/*! #__NO_SIDE_EFFECTS__ */function ja(s,t){return mt(s)?ae({name:s.name},t,{setup:s}):s}const _n=s=>!!s.type.__asyncLoader,Wm=s=>s.type.__isKeepAlive;function Bx(s,t){zm(s,"a",t)}function Fx(s,t){zm(s,"da",t)}function zm(s,t,e=ne){const i=s.__wdc||(s.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return s()});if(Ya(t,i,e),e){let r=e.parent;for(;r&&r.parent;)Wm(r.parent.vnode)&&Ox(i,t,e,r),r=r.parent}}function Ox(s,t,e,i){const r=Ya(t,s,i,!0);pu(()=>{Zc(i[t],r)},e)}function Ya(s,t,e=ne,i=!1){if(e){const r=e[s]||(e[s]=[]),n=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;hi();const a=jn(e),h=je(t,e,s,o);return a(),li(),h});return i?r.unshift(n):r.push(n),n}}const Ds=s=>(t,e=ne)=>(!Ka||s==="sp")&&Ya(s,(...i)=>t(...i),e),Dx=Ds("bm"),jm=Ds("m"),Lx=Ds("bu"),Nx=Ds("u"),fu=Ds("bum"),pu=Ds("um"),kx=Ds("sp"),Ux=Ds("rtg"),Gx=Ds("rtc");function $x(s,t=ne){Ya("ec",s,t)}function Hx(s,t,e,i){let r;const n=e;if(ut(s)||Qt(s)){r=new Array(s.length);for(let o=0,a=s.length;o<a;o++)r[o]=t(s[o],o,void 0,n)}else if(typeof s=="number"){r=new Array(s);for(let o=0;o<s;o++)r[o]=t(o+1,o,void 0,n)}else if(Dt(s))if(s[Symbol.iterator])r=Array.from(s,(o,a)=>t(o,a,void 0,n));else{const o=Object.keys(s);r=new Array(o.length);for(let a=0,h=o.length;a<h;a++){const l=o[a];r[a]=t(s[l],l,a,n)}}else r=[];return r}function Pl(s,t,e={},i,r){if(ce.isCE||ce.parent&&_n(ce.parent)&&ce.parent.isCE)return t!=="default"&&(e.name=t),Zt("slot",e,i);let n=s[t];n&&n._c&&(n._d=!1),re();const o=n&&Ym(n(e)),a=vn(Be,{key:e.key||o&&o.key||`_${t}`},o||[],o&&s._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function Ym(s){return s.some(t=>da(t)?!(t.type===ri||t.type===Be&&!Ym(t.children)):!0)?s:null}const Ml=s=>s?cg(s)?xu(s)||s.proxy:Ml(s.parent):null,yn=ae(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Ml(s.parent),$root:s=>Ml(s.root),$emit:s=>s.emit,$options:s=>mu(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,cu(s.update)}),$nextTick:s=>s.n||(s.n=zn.bind(s.proxy)),$watch:s=>Mx.bind(s)}),xh=(s,t)=>s!==Ot&&!s.__isScriptSetup&&Ct(s,t),Xx={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:r,props:n,accessCache:o,type:a,appContext:h}=s;let l;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return r[t];case 4:return e[t];case 3:return n[t]}else{if(xh(i,t))return o[t]=1,i[t];if(r!==Ot&&Ct(r,t))return o[t]=2,r[t];if((l=s.propsOptions[0])&&Ct(l,t))return o[t]=3,n[t];if(e!==Ot&&Ct(e,t))return o[t]=4,e[t];Bl&&(o[t]=0)}}const c=yn[t];let u,d;if(c)return t==="$attrs"&&xe(s.attrs,"get",""),c(s);if((u=a.__cssModules)&&(u=u[t]))return u;if(e!==Ot&&Ct(e,t))return o[t]=4,e[t];if(d=h.config.globalProperties,Ct(d,t))return d[t]},set({_:s},t,e){const{data:i,setupState:r,ctx:n}=s;return xh(r,t)?(r[t]=e,!0):i!==Ot&&Ct(i,t)?(i[t]=e,!0):Ct(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(n[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:i,appContext:r,propsOptions:n}},o){let a;return!!e[o]||s!==Ot&&Ct(s,o)||xh(t,o)||(a=n[0])&&Ct(a,o)||Ct(i,o)||Ct(yn,o)||Ct(r.config.globalProperties,o)},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:Ct(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function pd(s){return ut(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let Bl=!0;function Vx(s){const t=mu(s),e=s.proxy,i=s.ctx;Bl=!1,t.beforeCreate&&md(t.beforeCreate,s,"bc");const{data:r,computed:n,methods:o,watch:a,provide:h,inject:l,created:c,beforeMount:u,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:v,destroyed:_,unmounted:w,render:A,renderTracked:R,renderTriggered:P,errorCaptured:S,serverPrefetch:B,expose:$,inheritAttrs:rt,components:V,directives:T,filters:F}=t;if(l&&Wx(l,i,null),o)for(const H in o){const j=o[H];mt(j)&&(i[H]=j.bind(e))}if(r){const H=r.call(e,e);Dt(H)&&(s.data=Gi(H))}if(Bl=!0,n)for(const H in n){const j=n[H],At=mt(j)?j.bind(e,e):mt(j.get)?j.get.bind(e,e):Ie,L=!mt(j)&&mt(j.set)?j.set.bind(e):Ie,k=Re({get:At,set:L});Object.defineProperty(i,H,{enumerable:!0,configurable:!0,get:()=>k.value,set:lt=>k.value=lt})}if(a)for(const H in a)qm(a[H],i,e,H);if(h){const H=mt(h)?h.call(e):h;Reflect.ownKeys(H).forEach(j=>{Xo(j,H[j])})}c&&md(c,s,"c");function z(H,j){ut(j)?j.forEach(At=>H(At.bind(e))):j&&H(j.bind(e))}if(z(Dx,u),z(jm,d),z(Lx,f),z(Nx,p),z(Bx,m),z(Fx,g),z($x,S),z(Gx,R),z(Ux,P),z(fu,v),z(pu,w),z(kx,B),ut($))if($.length){const H=s.exposed||(s.exposed={});$.forEach(j=>{Object.defineProperty(H,j,{get:()=>e[j],set:At=>e[j]=At})})}else s.exposed||(s.exposed={});A&&s.render===Ie&&(s.render=A),rt!=null&&(s.inheritAttrs=rt),V&&(s.components=V),T&&(s.directives=T)}function Wx(s,t,e=Ie){ut(s)&&(s=Fl(s));for(const i in s){const r=s[i];let n;Dt(r)?"default"in r?n=fe(r.from||i,r.default,!0):n=fe(r.from||i):n=fe(r),Wt(n)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):t[i]=n}}function md(s,t,e){je(ut(s)?s.map(i=>i.bind(t.proxy)):s.bind(t.proxy),t,e)}function qm(s,t,e,i){const r=i.includes(".")?Vm(e,i):()=>e[i];if(Qt(s)){const n=t[s];mt(n)&&ii(r,n)}else if(mt(s))ii(r,s.bind(e));else if(Dt(s))if(ut(s))s.forEach(n=>qm(n,t,e,i));else{const n=mt(s.handler)?s.handler.bind(e):t[s.handler];mt(n)&&ii(r,n,s)}}function mu(s){const t=s.type,{mixins:e,extends:i}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=s.appContext,a=n.get(t);let h;return a?h=a:!r.length&&!e&&!i?h=t:(h={},r.length&&r.forEach(l=>ua(h,l,o,!0)),ua(h,t,o)),Dt(t)&&n.set(t,h),h}function ua(s,t,e,i=!1){const{mixins:r,extends:n}=t;n&&ua(s,n,e,!0),r&&r.forEach(o=>ua(s,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const a=zx[o]||e&&e[o];s[o]=a?a(s[o],t[o]):t[o]}return s}const zx={data:gd,props:_d,emits:_d,methods:rn,computed:rn,beforeCreate:me,created:me,beforeMount:me,mounted:me,beforeUpdate:me,updated:me,beforeDestroy:me,beforeUnmount:me,destroyed:me,unmounted:me,activated:me,deactivated:me,errorCaptured:me,serverPrefetch:me,components:rn,directives:rn,watch:Yx,provide:gd,inject:jx};function gd(s,t){return t?s?function(){return ae(mt(s)?s.call(this,this):s,mt(t)?t.call(this,this):t)}:t:s}function jx(s,t){return rn(Fl(s),Fl(t))}function Fl(s){if(ut(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function me(s,t){return s?[...new Set([].concat(s,t))]:t}function rn(s,t){return s?ae(Object.create(null),s,t):t}function _d(s,t){return s?ut(s)&&ut(t)?[...new Set([...s,...t])]:ae(Object.create(null),pd(s),pd(t??{})):t}function Yx(s,t){if(!s)return t;if(!t)return s;const e=ae(Object.create(null),s);for(const i in t)e[i]=me(s[i],t[i]);return e}function Km(){return{app:null,config:{isNativeTag:w0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qx=0;function Kx(s,t){return function(i,r=null){mt(i)||(i=ae({},i)),r!=null&&!Dt(r)&&(r=null);const n=Km(),o=new WeakSet;let a=!1;const h=n.app={_uid:qx++,_component:i,_props:r,_container:null,_context:n,_instance:null,version:vv,get config(){return n.config},set config(l){},use(l,...c){return o.has(l)||(l&&mt(l.install)?(o.add(l),l.install(h,...c)):mt(l)&&(o.add(l),l(h,...c))),h},mixin(l){return n.mixins.includes(l)||n.mixins.push(l),h},component(l,c){return c?(n.components[l]=c,h):n.components[l]},directive(l,c){return c?(n.directives[l]=c,h):n.directives[l]},mount(l,c,u){if(!a){const d=Zt(i,r);return d.appContext=n,u===!0?u="svg":u===!1&&(u=void 0),c&&t?t(d,l):s(d,l,u),a=!0,h._container=l,l.__vue_app__=h,xu(d.component)||d.component.proxy}},unmount(){a&&(s(null,h._container),delete h._container.__vue_app__)},provide(l,c){return n.provides[l]=c,h},runWithContext(l){const c=_r;_r=h;try{return l()}finally{_r=c}}};return h}}let _r=null;function Xo(s,t){if(ne){let e=ne.provides;const i=ne.parent&&ne.parent.provides;i===e&&(e=ne.provides=Object.create(i)),e[s]=t}}function fe(s,t,e=!1){const i=ne||ce;if(i||_r){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:_r._context.provides;if(r&&s in r)return r[s];if(arguments.length>1)return e&&mt(t)?t.call(i&&i.proxy):t}}function Zx(){return!!(ne||ce||_r)}const Zm={},Jm=()=>Object.create(Zm),Qm=s=>Object.getPrototypeOf(s)===Zm;function Jx(s,t,e,i=!1){const r={},n=Jm();s.propsDefaults=Object.create(null),tg(s,t,r,n);for(const o in s.propsOptions[0])o in r||(r[o]=void 0);e?s.props=i?r:Mm(r):s.type.props?s.props=r:s.props=n,s.attrs=n}function Qx(s,t,e,i){const{props:r,attrs:n,vnode:{patchFlag:o}}=s,a=It(r),[h]=s.propsOptions;let l=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=s.vnode.dynamicProps;for(let u=0;u<c.length;u++){let d=c[u];if(Va(s.emitsOptions,d))continue;const f=t[d];if(h)if(Ct(n,d))f!==n[d]&&(n[d]=f,l=!0);else{const p=ye(d);r[p]=Ol(h,a,p,f,s,!1)}else f!==n[d]&&(n[d]=f,l=!0)}}}else{tg(s,t,r,n)&&(l=!0);let c;for(const u in a)(!t||!Ct(t,u)&&((c=Vi(u))===u||!Ct(t,c)))&&(h?e&&(e[u]!==void 0||e[c]!==void 0)&&(r[u]=Ol(h,a,u,void 0,s,!0)):delete r[u]);if(n!==a)for(const u in n)(!t||!Ct(t,u))&&(delete n[u],l=!0)}l&&Cs(s.attrs,"set","")}function tg(s,t,e,i){const[r,n]=s.propsOptions;let o=!1,a;if(t)for(let h in t){if(mn(h))continue;const l=t[h];let c;r&&Ct(r,c=ye(h))?!n||!n.includes(c)?e[c]=l:(a||(a={}))[c]=l:Va(s.emitsOptions,h)||(!(h in i)||l!==i[h])&&(i[h]=l,o=!0)}if(n){const h=It(e),l=a||Ot;for(let c=0;c<n.length;c++){const u=n[c];e[u]=Ol(r,h,u,l[u],s,!Ct(l,u))}}return o}function Ol(s,t,e,i,r,n){const o=s[e];if(o!=null){const a=Ct(o,"default");if(a&&i===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&mt(h)){const{propsDefaults:l}=r;if(e in l)i=l[e];else{const c=jn(r);i=l[e]=h.call(null,t),c()}}else i=h}o[0]&&(n&&!a?i=!1:o[1]&&(i===""||i===Vi(e))&&(i=!0))}return i}function eg(s,t,e=!1){const i=t.propsCache,r=i.get(s);if(r)return r;const n=s.props,o={},a=[];let h=!1;if(!mt(s)){const c=u=>{h=!0;const[d,f]=eg(u,t,!0);ae(o,d),f&&a.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(c),s.extends&&c(s.extends),s.mixins&&s.mixins.forEach(c)}if(!n&&!h)return Dt(s)&&i.set(s,pr),pr;if(ut(n))for(let c=0;c<n.length;c++){const u=ye(n[c]);yd(u)&&(o[u]=Ot)}else if(n)for(const c in n){const u=ye(c);if(yd(u)){const d=n[c],f=o[u]=ut(d)||mt(d)?{type:d}:ae({},d);if(f){const p=bd(Boolean,f.type),m=bd(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||Ct(f,"default"))&&a.push(u)}}}const l=[o,a];return Dt(s)&&i.set(s,l),l}function yd(s){return s[0]!=="$"&&!mn(s)}function xd(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function vd(s,t){return xd(s)===xd(t)}function bd(s,t){return ut(t)?t.findIndex(e=>vd(e,s)):mt(t)&&vd(t,s)?0:-1}const sg=s=>s[0]==="_"||s==="$stable",gu=s=>ut(s)?s.map(as):[as(s)],tv=(s,t,e)=>{if(t._n)return t;const i=Ho((...r)=>gu(t(...r)),e);return i._c=!1,i},ig=(s,t,e)=>{const i=s._ctx;for(const r in s){if(sg(r))continue;const n=s[r];if(mt(n))t[r]=tv(r,n,i);else if(n!=null){const o=gu(n);t[r]=()=>o}}},rg=(s,t)=>{const e=gu(t);s.slots.default=()=>e},ev=(s,t)=>{const e=s.slots=Jm();if(s.vnode.shapeFlag&32){const i=t._;i?(ae(e,t),pm(e,"_",i,!0)):ig(t,e)}else t&&rg(s,t)},sv=(s,t,e)=>{const{vnode:i,slots:r}=s;let n=!0,o=Ot;if(i.shapeFlag&32){const a=t._;a?e&&a===1?n=!1:(ae(r,t),!e&&a===1&&delete r._):(n=!t.$stable,ig(t,r)),o=t}else t&&(rg(s,t),o={default:1});if(n)for(const a in r)!sg(a)&&o[a]==null&&delete r[a]};function Dl(s,t,e,i,r=!1){if(ut(s)){s.forEach((d,f)=>Dl(d,t&&(ut(t)?t[f]:t),e,i,r));return}if(_n(i)&&!r)return;const n=i.shapeFlag&4?xu(i.component)||i.component.proxy:i.el,o=r?null:n,{i:a,r:h}=s,l=t&&t.r,c=a.refs===Ot?a.refs={}:a.refs,u=a.setupState;if(l!=null&&l!==h&&(Qt(l)?(c[l]=null,Ct(u,l)&&(u[l]=null)):Wt(l)&&(l.value=null)),mt(h))si(h,a,12,[o,c]);else{const d=Qt(h),f=Wt(h);if(d||f){const p=()=>{if(s.f){const m=d?Ct(u,h)?u[h]:c[h]:h.value;r?ut(m)&&Zc(m,n):ut(m)?m.includes(n)||m.push(n):d?(c[h]=[n],Ct(u,h)&&(u[h]=c[h])):(h.value=[n],s.k&&(c[s.k]=h.value))}else d?(c[h]=o,Ct(u,h)&&(u[h]=o)):f&&(h.value=o,s.k&&(c[s.k]=o))};o?(p.id=-1,ge(p,e)):p()}}}const ge=Cx;function ng(s){return iv(s)}function iv(s,t){const e=mm();e.__VUE__=!0;const{insert:i,remove:r,patchProp:n,createElement:o,createText:a,createComment:h,setText:l,setElementText:c,parentNode:u,nextSibling:d,setScopeId:f=Ie,insertStaticContent:p}=s,m=(x,b,E,M=null,I=null,N=null,Z=void 0,G=null,W=!!b.dynamicChildren)=>{if(x===b)return;x&&!jr(x,b)&&(M=C(x),lt(x,I,N,!0),x=null),b.patchFlag===-2&&(W=!1,b.dynamicChildren=null);const{type:O,ref:tt,shapeFlag:at}=b;switch(O){case qa:g(x,b,E,M);break;case ri:y(x,b,E,M);break;case bh:x==null&&v(b,E,M,Z);break;case Be:V(x,b,E,M,I,N,Z,G,W);break;default:at&1?A(x,b,E,M,I,N,Z,G,W):at&6?T(x,b,E,M,I,N,Z,G,W):(at&64||at&128)&&O.process(x,b,E,M,I,N,Z,G,W,Y)}tt!=null&&I&&Dl(tt,x&&x.ref,N,b||x,!b)},g=(x,b,E,M)=>{if(x==null)i(b.el=a(b.children),E,M);else{const I=b.el=x.el;b.children!==x.children&&l(I,b.children)}},y=(x,b,E,M)=>{x==null?i(b.el=h(b.children||""),E,M):b.el=x.el},v=(x,b,E,M)=>{[x.el,x.anchor]=p(x.children,b,E,M,x.el,x.anchor)},_=({el:x,anchor:b},E,M)=>{let I;for(;x&&x!==b;)I=d(x),i(x,E,M),x=I;i(b,E,M)},w=({el:x,anchor:b})=>{let E;for(;x&&x!==b;)E=d(x),r(x),x=E;r(b)},A=(x,b,E,M,I,N,Z,G,W)=>{b.type==="svg"?Z="svg":b.type==="math"&&(Z="mathml"),x==null?R(b,E,M,I,N,Z,G,W):B(x,b,I,N,Z,G,W)},R=(x,b,E,M,I,N,Z,G)=>{let W,O;const{props:tt,shapeFlag:at,transition:ot,dirs:ft}=x;if(W=x.el=o(x.type,N,tt&&tt.is,tt),at&8?c(W,x.children):at&16&&S(x.children,W,null,M,I,vh(x,N),Z,G),ft&&pi(x,null,M,"created"),P(W,x,x.scopeId,Z,M),tt){for(const Mt in tt)Mt!=="value"&&!mn(Mt)&&n(W,Mt,null,tt[Mt],N,x.children,M,I,_t);"value"in tt&&n(W,"value",null,tt.value,N),(O=tt.onVnodeBeforeMount)&&ts(O,M,x)}ft&&pi(x,null,M,"beforeMount");const vt=rv(I,ot);vt&&ot.beforeEnter(W),i(W,b,E),((O=tt&&tt.onVnodeMounted)||vt||ft)&&ge(()=>{O&&ts(O,M,x),vt&&ot.enter(W),ft&&pi(x,null,M,"mounted")},I)},P=(x,b,E,M,I)=>{if(E&&f(x,E),M)for(let N=0;N<M.length;N++)f(x,M[N]);if(I){let N=I.subTree;if(b===N){const Z=I.vnode;P(x,Z,Z.scopeId,Z.slotScopeIds,I.parent)}}},S=(x,b,E,M,I,N,Z,G,W=0)=>{for(let O=W;O<x.length;O++){const tt=x[O]=G?Xs(x[O]):as(x[O]);m(null,tt,b,E,M,I,N,Z,G)}},B=(x,b,E,M,I,N,Z)=>{const G=b.el=x.el;let{patchFlag:W,dynamicChildren:O,dirs:tt}=b;W|=x.patchFlag&16;const at=x.props||Ot,ot=b.props||Ot;let ft;if(E&&mi(E,!1),(ft=ot.onVnodeBeforeUpdate)&&ts(ft,E,b,x),tt&&pi(b,x,E,"beforeUpdate"),E&&mi(E,!0),O?$(x.dynamicChildren,O,G,E,M,vh(b,I),N):Z||j(x,b,G,null,E,M,vh(b,I),N,!1),W>0){if(W&16)rt(G,b,at,ot,E,M,I);else if(W&2&&at.class!==ot.class&&n(G,"class",null,ot.class,I),W&4&&n(G,"style",at.style,ot.style,I),W&8){const vt=b.dynamicProps;for(let Mt=0;Mt<vt.length;Mt++){const Lt=vt[Mt],te=at[Lt],Ne=ot[Lt];(Ne!==te||Lt==="value")&&n(G,Lt,te,Ne,I,x.children,E,M,_t)}}W&1&&x.children!==b.children&&c(G,b.children)}else!Z&&O==null&&rt(G,b,at,ot,E,M,I);((ft=ot.onVnodeUpdated)||tt)&&ge(()=>{ft&&ts(ft,E,b,x),tt&&pi(b,x,E,"updated")},M)},$=(x,b,E,M,I,N,Z)=>{for(let G=0;G<b.length;G++){const W=x[G],O=b[G],tt=W.el&&(W.type===Be||!jr(W,O)||W.shapeFlag&70)?u(W.el):E;m(W,O,tt,null,M,I,N,Z,!0)}},rt=(x,b,E,M,I,N,Z)=>{if(E!==M){if(E!==Ot)for(const G in E)!mn(G)&&!(G in M)&&n(x,G,E[G],null,Z,b.children,I,N,_t);for(const G in M){if(mn(G))continue;const W=M[G],O=E[G];W!==O&&G!=="value"&&n(x,G,O,W,Z,b.children,I,N,_t)}"value"in M&&n(x,"value",E.value,M.value,Z)}},V=(x,b,E,M,I,N,Z,G,W)=>{const O=b.el=x?x.el:a(""),tt=b.anchor=x?x.anchor:a("");let{patchFlag:at,dynamicChildren:ot,slotScopeIds:ft}=b;ft&&(G=G?G.concat(ft):ft),x==null?(i(O,E,M),i(tt,E,M),S(b.children||[],E,tt,I,N,Z,G,W)):at>0&&at&64&&ot&&x.dynamicChildren?($(x.dynamicChildren,ot,E,I,N,Z,G),(b.key!=null||I&&b===I.subTree)&&og(x,b,!0)):j(x,b,E,tt,I,N,Z,G,W)},T=(x,b,E,M,I,N,Z,G,W)=>{b.slotScopeIds=G,x==null?b.shapeFlag&512?I.ctx.activate(b,E,M,Z,W):F(b,E,M,I,N,Z,W):K(x,b,W)},F=(x,b,E,M,I,N,Z)=>{const G=x.component=fv(x,M,I);if(Wm(x)&&(G.ctx.renderer=Y),pv(G),G.asyncDep){if(I&&I.registerDep(G,z),!x.el){const W=G.subTree=Zt(ri);y(null,W,b,E)}}else z(G,x,b,E,I,N,Z)},K=(x,b,E)=>{const M=b.component=x.component;if(vx(x,b,E))if(M.asyncDep&&!M.asyncResolved){H(M,b,E);return}else M.next=b,px(M.update),M.effect.dirty=!0,M.update();else b.el=x.el,M.vnode=b},z=(x,b,E,M,I,N,Z)=>{const G=()=>{if(x.isMounted){let{next:tt,bu:at,u:ot,parent:ft,vnode:vt}=x;{const ji=ag(x);if(ji){tt&&(tt.el=vt.el,H(x,tt,Z)),ji.asyncDep.then(()=>{x.isUnmounted||G()});return}}let Mt=tt,Lt;mi(x,!1),tt?(tt.el=vt.el,H(x,tt,Z)):tt=vt,at&&gh(at),(Lt=tt.props&&tt.props.onVnodeBeforeUpdate)&&ts(Lt,ft,tt,vt),mi(x,!0);const te=yh(x),Ne=x.subTree;x.subTree=te,m(Ne,te,u(Ne.el),C(Ne),x,I,N),tt.el=te.el,Mt===null&&bx(x,te.el),ot&&ge(ot,I),(Lt=tt.props&&tt.props.onVnodeUpdated)&&ge(()=>ts(Lt,ft,tt,vt),I)}else{let tt;const{el:at,props:ot}=b,{bm:ft,m:vt,parent:Mt}=x,Lt=_n(b);if(mi(x,!1),ft&&gh(ft),!Lt&&(tt=ot&&ot.onVnodeBeforeMount)&&ts(tt,Mt,b),mi(x,!0),at&&dt){const te=()=>{x.subTree=yh(x),dt(at,x.subTree,x,I,null)};Lt?b.type.__asyncLoader().then(()=>!x.isUnmounted&&te()):te()}else{const te=x.subTree=yh(x);m(null,te,E,M,x,I,N),b.el=te.el}if(vt&&ge(vt,I),!Lt&&(tt=ot&&ot.onVnodeMounted)){const te=b;ge(()=>ts(tt,Mt,te),I)}(b.shapeFlag&256||Mt&&_n(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&x.a&&ge(x.a,I),x.isMounted=!0,b=E=M=null}},W=x.effect=new eu(G,Ie,()=>cu(O),x.scope),O=x.update=()=>{W.dirty&&W.run()};O.id=x.uid,mi(x,!0),O()},H=(x,b,E)=>{b.component=x;const M=x.vnode.props;x.vnode=b,x.next=null,Qx(x,b.props,M,E),sv(x,b.children,E),hi(),ud(x),li()},j=(x,b,E,M,I,N,Z,G,W=!1)=>{const O=x&&x.children,tt=x?x.shapeFlag:0,at=b.children,{patchFlag:ot,shapeFlag:ft}=b;if(ot>0){if(ot&128){L(O,at,E,M,I,N,Z,G,W);return}else if(ot&256){At(O,at,E,M,I,N,Z,G,W);return}}ft&8?(tt&16&&_t(O,I,N),at!==O&&c(E,at)):tt&16?ft&16?L(O,at,E,M,I,N,Z,G,W):_t(O,I,N,!0):(tt&8&&c(E,""),ft&16&&S(at,E,M,I,N,Z,G,W))},At=(x,b,E,M,I,N,Z,G,W)=>{x=x||pr,b=b||pr;const O=x.length,tt=b.length,at=Math.min(O,tt);let ot;for(ot=0;ot<at;ot++){const ft=b[ot]=W?Xs(b[ot]):as(b[ot]);m(x[ot],ft,E,null,I,N,Z,G,W)}O>tt?_t(x,I,N,!0,!1,at):S(b,E,M,I,N,Z,G,W,at)},L=(x,b,E,M,I,N,Z,G,W)=>{let O=0;const tt=b.length;let at=x.length-1,ot=tt-1;for(;O<=at&&O<=ot;){const ft=x[O],vt=b[O]=W?Xs(b[O]):as(b[O]);if(jr(ft,vt))m(ft,vt,E,null,I,N,Z,G,W);else break;O++}for(;O<=at&&O<=ot;){const ft=x[at],vt=b[ot]=W?Xs(b[ot]):as(b[ot]);if(jr(ft,vt))m(ft,vt,E,null,I,N,Z,G,W);else break;at--,ot--}if(O>at){if(O<=ot){const ft=ot+1,vt=ft<tt?b[ft].el:M;for(;O<=ot;)m(null,b[O]=W?Xs(b[O]):as(b[O]),E,vt,I,N,Z,G,W),O++}}else if(O>ot)for(;O<=at;)lt(x[O],I,N,!0),O++;else{const ft=O,vt=O,Mt=new Map;for(O=vt;O<=ot;O++){const we=b[O]=W?Xs(b[O]):as(b[O]);we.key!=null&&Mt.set(we.key,O)}let Lt,te=0;const Ne=ot-vt+1;let ji=!1,td=0;const zr=new Array(Ne);for(O=0;O<Ne;O++)zr[O]=0;for(O=ft;O<=at;O++){const we=x[O];if(te>=Ne){lt(we,I,N,!0);continue}let Qe;if(we.key!=null)Qe=Mt.get(we.key);else for(Lt=vt;Lt<=ot;Lt++)if(zr[Lt-vt]===0&&jr(we,b[Lt])){Qe=Lt;break}Qe===void 0?lt(we,I,N,!0):(zr[Qe-vt]=O+1,Qe>=td?td=Qe:ji=!0,m(we,b[Qe],E,null,I,N,Z,G,W),te++)}const ed=ji?nv(zr):pr;for(Lt=ed.length-1,O=Ne-1;O>=0;O--){const we=vt+O,Qe=b[we],sd=we+1<tt?b[we+1].el:M;zr[O]===0?m(null,Qe,E,sd,I,N,Z,G,W):ji&&(Lt<0||O!==ed[Lt]?k(Qe,E,sd,2):Lt--)}}},k=(x,b,E,M,I=null)=>{const{el:N,type:Z,transition:G,children:W,shapeFlag:O}=x;if(O&6){k(x.component.subTree,b,E,M);return}if(O&128){x.suspense.move(b,E,M);return}if(O&64){Z.move(x,b,E,Y);return}if(Z===Be){i(N,b,E);for(let at=0;at<W.length;at++)k(W[at],b,E,M);i(x.anchor,b,E);return}if(Z===bh){_(x,b,E);return}if(M!==2&&O&1&&G)if(M===0)G.beforeEnter(N),i(N,b,E),ge(()=>G.enter(N),I);else{const{leave:at,delayLeave:ot,afterLeave:ft}=G,vt=()=>i(N,b,E),Mt=()=>{at(N,()=>{vt(),ft&&ft()})};ot?ot(N,vt,Mt):Mt()}else i(N,b,E)},lt=(x,b,E,M=!1,I=!1)=>{const{type:N,props:Z,ref:G,children:W,dynamicChildren:O,shapeFlag:tt,patchFlag:at,dirs:ot}=x;if(G!=null&&Dl(G,null,E,x,!0),tt&256){b.ctx.deactivate(x);return}const ft=tt&1&&ot,vt=!_n(x);let Mt;if(vt&&(Mt=Z&&Z.onVnodeBeforeUnmount)&&ts(Mt,b,x),tt&6)kt(x.component,E,M);else{if(tt&128){x.suspense.unmount(E,M);return}ft&&pi(x,null,b,"beforeUnmount"),tt&64?x.type.remove(x,b,E,I,Y,M):O&&(N!==Be||at>0&&at&64)?_t(O,b,E,!1,!0):(N===Be&&at&384||!I&&tt&16)&&_t(W,b,E),M&&wt(x)}(vt&&(Mt=Z&&Z.onVnodeUnmounted)||ft)&&ge(()=>{Mt&&ts(Mt,b,x),ft&&pi(x,null,b,"unmounted")},E)},wt=x=>{const{type:b,el:E,anchor:M,transition:I}=x;if(b===Be){Tt(E,M);return}if(b===bh){w(x);return}const N=()=>{r(E),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(x.shapeFlag&1&&I&&!I.persisted){const{leave:Z,delayLeave:G}=I,W=()=>Z(E,N);G?G(x.el,N,W):W()}else N()},Tt=(x,b)=>{let E;for(;x!==b;)E=d(x),r(x),x=E;r(b)},kt=(x,b,E)=>{const{bum:M,scope:I,update:N,subTree:Z,um:G}=x;M&&gh(M),I.stop(),N&&(N.active=!1,lt(Z,x,b,E)),G&&ge(G,b),ge(()=>{x.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},_t=(x,b,E,M=!1,I=!1,N=0)=>{for(let Z=N;Z<x.length;Z++)lt(x[Z],b,E,M,I)},C=x=>x.shapeFlag&6?C(x.component.subTree):x.shapeFlag&128?x.suspense.next():d(x.anchor||x.el);let X=!1;const U=(x,b,E)=>{x==null?b._vnode&&lt(b._vnode,null,null,!0):m(b._vnode||null,x,b,null,null,null,E),X||(X=!0,ud(),Gm(),X=!1),b._vnode=x},Y={p:m,um:lt,m:k,r:wt,mt:F,mc:S,pc:j,pbc:$,n:C,o:s};let nt,dt;return{render:U,hydrate:nt,createApp:Kx(U,nt)}}function vh({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function mi({effect:s,update:t},e){s.allowRecurse=t.allowRecurse=e}function rv(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function og(s,t,e=!1){const i=s.children,r=t.children;if(ut(i)&&ut(r))for(let n=0;n<i.length;n++){const o=i[n];let a=r[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[n]=Xs(r[n]),a.el=o.el),e||og(o,a)),a.type===qa&&(a.el=o.el)}}function nv(s){const t=s.slice(),e=[0];let i,r,n,o,a;const h=s.length;for(i=0;i<h;i++){const l=s[i];if(l!==0){if(r=e[e.length-1],s[r]<l){t[i]=r,e.push(i);continue}for(n=0,o=e.length-1;n<o;)a=n+o>>1,s[e[a]]<l?n=a+1:o=a;l<s[e[n]]&&(n>0&&(t[i]=e[n-1]),e[n]=i)}}for(n=e.length,o=e[n-1];n-- >0;)e[n]=o,o=t[o];return e}function ag(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ag(t)}const ov=s=>s.__isTeleport,Be=Symbol.for("v-fgt"),qa=Symbol.for("v-txt"),ri=Symbol.for("v-cmt"),bh=Symbol.for("v-stc"),xn=[];let ze=null;function re(s=!1){xn.push(ze=s?null:[])}function av(){xn.pop(),ze=xn[xn.length-1]||null}let On=1;function wd(s){On+=s}function hg(s){return s.dynamicChildren=On>0?ze||pr:null,av(),On>0&&ze&&ze.push(s),s}function Ce(s,t,e,i,r,n){return hg(St(s,t,e,i,r,n,!0))}function vn(s,t,e,i,r){return hg(Zt(s,t,e,i,r,!0))}function da(s){return s?s.__v_isVNode===!0:!1}function jr(s,t){return s.type===t.type&&s.key===t.key}const lg=({key:s})=>s??null,Vo=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Qt(s)||Wt(s)||mt(s)?{i:ce,r:s,k:t,f:!!e}:s:null);function St(s,t=null,e=null,i=0,r=null,n=s===Be?0:1,o=!1,a=!1){const h={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&lg(t),ref:t&&Vo(t),scopeId:Wa,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ce};return a?(_u(h,e),n&128&&s.normalize(h)):e&&(h.shapeFlag|=Qt(e)?8:16),On>0&&!o&&ze&&(h.patchFlag>0||n&6)&&h.patchFlag!==32&&ze.push(h),h}const Zt=hv;function hv(s,t=null,e=null,i=0,r=null,n=!1){if((!s||s===Ax)&&(s=ri),da(s)){const a=Sr(s,t,!0);return e&&_u(a,e),On>0&&!n&&ze&&(a.shapeFlag&6?ze[ze.indexOf(s)]=a:ze.push(a)),a.patchFlag|=-2,a}if(xv(s)&&(s=s.__vccOpts),t){t=lv(t);let{class:a,style:h}=t;a&&!Qt(a)&&(t.class=tu(a)),Dt(h)&&(Fm(h)&&!ut(h)&&(h=ae({},h)),t.style=Qc(h))}const o=Qt(s)?1:Sx(s)?128:ov(s)?64:Dt(s)?4:mt(s)?2:0;return St(s,t,e,i,r,o,n,!0)}function lv(s){return s?Fm(s)||Qm(s)?ae({},s):s:null}function Sr(s,t,e=!1,i=!1){const{props:r,ref:n,patchFlag:o,children:a,transition:h}=s,l=t?cv(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:s.type,props:l,key:l&&lg(l),ref:t&&t.ref?e&&n?ut(n)?n.concat(Vo(t)):[n,Vo(t)]:Vo(t):n,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==Be?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:h,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Sr(s.ssContent),ssFallback:s.ssFallback&&Sr(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return h&&i&&(c.transition=h.clone(c)),c}function bn(s=" ",t=0){return Zt(qa,null,s,t)}function Ed(s="",t=!1){return t?(re(),vn(ri,null,s)):Zt(ri,null,s)}function as(s){return s==null||typeof s=="boolean"?Zt(ri):ut(s)?Zt(Be,null,s.slice()):typeof s=="object"?Xs(s):Zt(qa,null,String(s))}function Xs(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Sr(s)}function _u(s,t){let e=0;const{shapeFlag:i}=s;if(t==null)t=null;else if(ut(t))e=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),_u(s,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!Qm(t)?t._ctx=ce:r===3&&ce&&(ce.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else mt(t)?(t={default:t,_ctx:ce},e=32):(t=String(t),i&64?(e=16,t=[bn(t)]):e=8);s.children=t,s.shapeFlag|=e}function cv(...s){const t={};for(let e=0;e<s.length;e++){const i=s[e];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=tu([t.class,i.class]));else if(r==="style")t.style=Qc([t.style,i.style]);else if(Na(r)){const n=t[r],o=i[r];o&&n!==o&&!(ut(n)&&n.includes(o))&&(t[r]=n?[].concat(n,o):o)}else r!==""&&(t[r]=i[r])}return t}function ts(s,t,e,i=null){je(s,t,7,[e,i])}const uv=Km();let dv=0;function fv(s,t,e){const i=s.type,r=(t?t.appContext:s.appContext)||uv,n={uid:dv++,vnode:s,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new ym(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:eg(i,r),emitsOptions:Hm(i,r),emit:null,emitted:null,propsDefaults:Ot,inheritAttrs:i.inheritAttrs,ctx:Ot,data:Ot,props:Ot,attrs:Ot,slots:Ot,refs:Ot,setupState:Ot,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=_x.bind(null,n),s.ce&&s.ce(n),n}let ne=null;const yu=()=>ne||ce;let fa,Ll;{const s=mm(),t=(e,i)=>{let r;return(r=s[e])||(r=s[e]=[]),r.push(i),n=>{r.length>1?r.forEach(o=>o(n)):r[0](n)}};fa=t("__VUE_INSTANCE_SETTERS__",e=>ne=e),Ll=t("__VUE_SSR_SETTERS__",e=>Ka=e)}const jn=s=>{const t=ne;return fa(s),s.scope.on(),()=>{s.scope.off(),fa(t)}},Ad=()=>{ne&&ne.scope.off(),fa(null)};function cg(s){return s.vnode.shapeFlag&4}let Ka=!1;function pv(s,t=!1){t&&Ll(t);const{props:e,children:i}=s.vnode,r=cg(s);Jx(s,e,r,t),ev(s,i);const n=r?mv(s,t):void 0;return t&&Ll(!1),n}function mv(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Xx);const{setup:i}=e;if(i){const r=s.setupContext=i.length>1?_v(s):null,n=jn(s);hi();const o=si(i,s,0,[s.props,r]);if(li(),n(),um(o)){if(o.then(Ad,Ad),t)return o.then(a=>{Td(s,a,t)}).catch(a=>{Xa(a,s,0)});s.asyncDep=o}else Td(s,o,t)}else ug(s,t)}function Td(s,t,e){mt(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:Dt(t)&&(s.setupState=Lm(t)),ug(s,e)}let Sd;function ug(s,t,e){const i=s.type;if(!s.render){if(!t&&Sd&&!i.render){const r=i.template||mu(s).template;if(r){const{isCustomElement:n,compilerOptions:o}=s.appContext.config,{delimiters:a,compilerOptions:h}=i,l=ae(ae({isCustomElement:n,delimiters:a},o),h);i.render=Sd(r,l)}}s.render=i.render||Ie}{const r=jn(s);hi();try{Vx(s)}finally{li(),r()}}}const gv={get(s,t){return xe(s,"get",""),s[t]}};function _v(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,gv),slots:s.slots,emit:s.emit,expose:t}}function xu(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(Lm(Wn(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in yn)return yn[e](s)},has(t,e){return e in t||e in yn}}))}function yv(s,t=!0){return mt(s)?s.displayName||s.name:s.name||t&&s.__name}function xv(s){return mt(s)&&"__vccOpts"in s}const Re=(s,t)=>sx(s,t,Ka);function wn(s,t,e=Ot){const i=yu(),r=ye(t),n=Vi(t),o=ax((h,l)=>{let c;return Px(()=>{const u=s[t];_s(c,u)&&(c=u,l())}),{get(){return h(),e.get?e.get(c):c},set(u){const d=i.vnode.props;!(d&&(t in d||r in d||n in d)&&(`onUpdate:${t}`in d||`onUpdate:${r}`in d||`onUpdate:${n}`in d))&&_s(u,c)&&(c=u,l()),i.emit(`update:${t}`,e.set?e.set(u):u)}}}),a=t==="modelValue"?"modelModifiers":`${t}Modifiers`;return o[Symbol.iterator]=()=>{let h=0;return{next(){return h<2?{value:h++?s[a]||{}:o,done:!1}:{done:!0}}}},o}function vu(s,t,e){const i=arguments.length;return i===2?Dt(t)&&!ut(t)?da(t)?Zt(s,null,[t]):Zt(s,t):Zt(s,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&da(e)&&(e=[e]),Zt(s,t,e))}const vv="3.4.26",bv=Ie;/**
* @vue/runtime-dom v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wv="http://www.w3.org/2000/svg",Ev="http://www.w3.org/1998/Math/MathML",Vs=typeof document<"u"?document:null,Cd=Vs&&Vs.createElement("template"),Av={insert:(s,t,e)=>{t.insertBefore(s,e||null)},remove:s=>{const t=s.parentNode;t&&t.removeChild(s)},createElement:(s,t,e,i)=>{const r=t==="svg"?Vs.createElementNS(wv,s):t==="mathml"?Vs.createElementNS(Ev,s):Vs.createElement(s,e?{is:e}:void 0);return s==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:s=>Vs.createTextNode(s),createComment:s=>Vs.createComment(s),setText:(s,t)=>{s.nodeValue=t},setElementText:(s,t)=>{s.textContent=t},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Vs.querySelector(s),setScopeId(s,t){s.setAttribute(t,"")},insertStaticContent(s,t,e,i,r,n){const o=e?e.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),e),!(r===n||!(r=r.nextSibling)););else{Cd.innerHTML=i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s;const a=Cd.content;if(i==="svg"||i==="mathml"){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Tv=Symbol("_vtc");function Sv(s,t,e){const i=s[Tv];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?s.removeAttribute("class"):e?s.setAttribute("class",t):s.className=t}const Rd=Symbol("_vod"),Cv=Symbol("_vsh"),Rv=Symbol(""),Iv=/(^|;)\s*display\s*:/;function Pv(s,t,e){const i=s.style,r=Qt(e);let n=!1;if(e&&!r){if(t)if(Qt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Wo(i,a,"")}else for(const o in t)e[o]==null&&Wo(i,o,"");for(const o in e)o==="display"&&(n=!0),Wo(i,o,e[o])}else if(r){if(t!==e){const o=i[Rv];o&&(e+=";"+o),i.cssText=e,n=Iv.test(e)}}else t&&s.removeAttribute("style");Rd in s&&(s[Rd]=n?i.display:"",s[Cv]&&(i.display="none"))}const Id=/\s*!important$/;function Wo(s,t,e){if(ut(e))e.forEach(i=>Wo(s,t,i));else if(e==null&&(e=""),t.startsWith("--"))s.setProperty(t,e);else{const i=Mv(s,t);Id.test(e)?s.setProperty(Vi(i),e.replace(Id,""),"important"):s[i]=e}}const Pd=["Webkit","Moz","ms"],wh={};function Mv(s,t){const e=wh[t];if(e)return e;let i=ye(t);if(i!=="filter"&&i in s)return wh[t]=i;i=Ga(i);for(let r=0;r<Pd.length;r++){const n=Pd[r]+i;if(n in s)return wh[t]=n}return t}const Md="http://www.w3.org/1999/xlink";function Bv(s,t,e,i,r){if(i&&t.startsWith("xlink:"))e==null?s.removeAttributeNS(Md,t.slice(6,t.length)):s.setAttributeNS(Md,t,e);else{const n=F0(t);e==null||n&&!gm(e)?s.removeAttribute(t):s.setAttribute(t,n?"":e)}}function Fv(s,t,e,i,r,n,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,n),s[t]=e??"";return}const a=s.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?s.getAttribute("value")||"":s.value,c=e??"";(l!==c||!("_value"in s))&&(s.value=c),e==null&&s.removeAttribute(t),s._value=e;return}let h=!1;if(e===""||e==null){const l=typeof s[t];l==="boolean"?e=gm(e):e==null&&l==="string"?(e="",h=!0):l==="number"&&(e=0,h=!0)}try{s[t]=e}catch{}h&&s.removeAttribute(t)}function Ov(s,t,e,i){s.addEventListener(t,e,i)}function Dv(s,t,e,i){s.removeEventListener(t,e,i)}const Bd=Symbol("_vei");function Lv(s,t,e,i,r=null){const n=s[Bd]||(s[Bd]={}),o=n[t];if(i&&o)o.value=i;else{const[a,h]=Nv(t);if(i){const l=n[t]=Gv(i,r);Ov(s,a,l,h)}else o&&(Dv(s,a,o,h),n[t]=void 0)}}const Fd=/(?:Once|Passive|Capture)$/;function Nv(s){let t;if(Fd.test(s)){t={};let i;for(;i=s.match(Fd);)s=s.slice(0,s.length-i[0].length),t[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Vi(s.slice(2)),t]}let Eh=0;const kv=Promise.resolve(),Uv=()=>Eh||(kv.then(()=>Eh=0),Eh=Date.now());function Gv(s,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;je($v(i,e.value),t,5,[i])};return e.value=s,e.attached=Uv(),e}function $v(s,t){if(ut(t)){const e=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{e.call(s),s._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Od=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,Hv=(s,t,e,i,r,n,o,a,h)=>{const l=r==="svg";t==="class"?Sv(s,i,l):t==="style"?Pv(s,e,i):Na(t)?Kc(t)||Lv(s,t,e,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xv(s,t,i,l))?Fv(s,t,i,n,o,a,h):(t==="true-value"?s._trueValue=i:t==="false-value"&&(s._falseValue=i),Bv(s,t,i,l))};function Xv(s,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in s&&Od(t)&&mt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&s.tagName==="INPUT"||t==="type"&&s.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=s.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Od(t)&&Qt(e)?!1:t in s}const Vv=ae({patchProp:Hv},Av);let Dd;function Wv(){return Dd||(Dd=ng(Vv))}const zv=(...s)=>{const t=Wv().createApp(...s),{mount:e}=t;return t.mount=i=>{const r=Yv(i);if(!r)return;const n=t._component;!mt(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.innerHTML="";const o=e(r,!1,jv(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function jv(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function Yv(s){return Qt(s)?document.querySelector(s):s}var qv=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let dg;const Za=s=>dg=s,fg=Symbol();function Nl(s){return s&&typeof s=="object"&&Object.prototype.toString.call(s)==="[object Object]"&&typeof s.toJSON!="function"}var En;(function(s){s.direct="direct",s.patchObject="patch object",s.patchFunction="patch function"})(En||(En={}));function Kv(){const s=$a(!0),t=s.run(()=>Pe({}));let e=[],i=[];const r=Wn({install(n){Za(r),r._a=n,n.provide(fg,r),n.config.globalProperties.$pinia=r,i.forEach(o=>e.push(o)),i=[]},use(n){return!this._a&&!qv?i.push(n):e.push(n),this},_p:e,_a:null,_e:s,_s:new Map,state:t});return r}const pg=()=>{};function Ld(s,t,e,i=pg){s.push(t);const r=()=>{const n=s.indexOf(t);n>-1&&(s.splice(n,1),i())};return!e&&xm()&&D0(r),r}function Yi(s,...t){s.slice().forEach(e=>{e(...t)})}const Zv=s=>s();function kl(s,t){s instanceof Map&&t instanceof Map&&t.forEach((e,i)=>s.set(i,e)),s instanceof Set&&t instanceof Set&&t.forEach(s.add,s);for(const e in t){if(!t.hasOwnProperty(e))continue;const i=t[e],r=s[e];Nl(r)&&Nl(i)&&s.hasOwnProperty(e)&&!Wt(i)&&!ei(i)?s[e]=kl(r,i):s[e]=i}return s}const Jv=Symbol();function Qv(s){return!Nl(s)||!s.hasOwnProperty(Jv)}const{assign:Us}=Object;function tb(s){return!!(Wt(s)&&s.effect)}function eb(s,t,e,i){const{state:r,actions:n,getters:o}=t,a=e.state.value[s];let h;function l(){a||(e.state.value[s]=r?r():{});const c=hx(e.state.value[s]);return Us(c,n,Object.keys(o||{}).reduce((u,d)=>(u[d]=Wn(Re(()=>{Za(e);const f=e._s.get(s);return o[d].call(f,f)})),u),{}))}return h=mg(s,l,t,e,i,!0),h}function mg(s,t,e={},i,r,n){let o;const a=Us({actions:{}},e),h={deep:!0};let l,c,u=[],d=[],f;const p=i.state.value[s];!n&&!p&&(i.state.value[s]={}),Pe({});let m;function g(S){let B;l=c=!1,typeof S=="function"?(S(i.state.value[s]),B={type:En.patchFunction,storeId:s,events:f}):(kl(i.state.value[s],S),B={type:En.patchObject,payload:S,storeId:s,events:f});const $=m=Symbol();zn().then(()=>{m===$&&(l=!0)}),c=!0,Yi(u,B,i.state.value[s])}const y=n?function(){const{state:B}=e,$=B?B():{};this.$patch(rt=>{Us(rt,$)})}:pg;function v(){o.stop(),u=[],d=[],i._s.delete(s)}function _(S,B){return function(){Za(i);const $=Array.from(arguments),rt=[],V=[];function T(z){rt.push(z)}function F(z){V.push(z)}Yi(d,{args:$,name:S,store:A,after:T,onError:F});let K;try{K=B.apply(this&&this.$id===s?this:A,$)}catch(z){throw Yi(V,z),z}return K instanceof Promise?K.then(z=>(Yi(rt,z),z)).catch(z=>(Yi(V,z),Promise.reject(z))):(Yi(rt,K),K)}}const w={_p:i,$id:s,$onAction:Ld.bind(null,d),$patch:g,$reset:y,$subscribe(S,B={}){const $=Ld(u,S,B.detached,()=>rt()),rt=o.run(()=>ii(()=>i.state.value[s],V=>{(B.flush==="sync"?c:l)&&S({storeId:s,type:En.direct,events:f},V)},Us({},h,B)));return $},$dispose:v},A=Gi(w);i._s.set(s,A);const P=(i._a&&i._a.runWithContext||Zv)(()=>i._e.run(()=>(o=$a()).run(t)));for(const S in P){const B=P[S];if(Wt(B)&&!tb(B)||ei(B))n||(p&&Qv(B)&&(Wt(B)?B.value=p[S]:kl(B,p[S])),i.state.value[s][S]=B);else if(typeof B=="function"){const $=_(S,B);P[S]=$,a.actions[S]=B}}return Us(A,P),Us(It(A),P),Object.defineProperty(A,"$state",{get:()=>i.state.value[s],set:S=>{g(B=>{Us(B,S)})}}),i._p.forEach(S=>{Us(A,o.run(()=>S({store:A,app:i._a,pinia:i,options:a})))}),p&&n&&e.hydrate&&e.hydrate(A.$state,p),l=!0,c=!0,A}function sb(s,t,e){let i,r;const n=typeof t=="function";i=s,r=n?e:t;function o(a,h){const l=Zx();return a=a||(l?fe(fg,null):null),a&&Za(a),a=dg,a._s.has(i)||(n?mg(i,t,r,a):eb(i,r,a)),a._s.get(i)}return o.$id=i,o}function bu(s){{s=It(s);const t={};for(const e in s){const i=s[e];(Wt(i)||ei(i))&&(t[e]=ux(s,e))}return t}}/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const tr=typeof document<"u";function ib(s){return s.__esModule||s[Symbol.toStringTag]==="Module"}const Pt=Object.assign;function Ah(s,t){const e={};for(const i in t){const r=t[i];e[i]=Ke(r)?r.map(s):s(r)}return e}const An=()=>{},Ke=Array.isArray,gg=/#/g,rb=/&/g,nb=/\//g,ob=/=/g,ab=/\?/g,_g=/\+/g,hb=/%5B/g,lb=/%5D/g,yg=/%5E/g,cb=/%60/g,xg=/%7B/g,ub=/%7C/g,vg=/%7D/g,db=/%20/g;function wu(s){return encodeURI(""+s).replace(ub,"|").replace(hb,"[").replace(lb,"]")}function fb(s){return wu(s).replace(xg,"{").replace(vg,"}").replace(yg,"^")}function Ul(s){return wu(s).replace(_g,"%2B").replace(db,"+").replace(gg,"%23").replace(rb,"%26").replace(cb,"`").replace(xg,"{").replace(vg,"}").replace(yg,"^")}function pb(s){return Ul(s).replace(ob,"%3D")}function mb(s){return wu(s).replace(gg,"%23").replace(ab,"%3F")}function gb(s){return s==null?"":mb(s).replace(nb,"%2F")}function Dn(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const _b=/\/$/,yb=s=>s.replace(_b,"");function Th(s,t,e="/"){let i,r={},n="",o="";const a=t.indexOf("#");let h=t.indexOf("?");return a<h&&a>=0&&(h=-1),h>-1&&(i=t.slice(0,h),n=t.slice(h+1,a>-1?a:t.length),r=s(n)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=wb(i??t,e),{fullPath:i+(n&&"?")+n+o,path:i,query:r,hash:Dn(o)}}function xb(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Nd(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function vb(s,t,e){const i=t.matched.length-1,r=e.matched.length-1;return i>-1&&i===r&&Cr(t.matched[i],e.matched[r])&&bg(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function Cr(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function bg(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(!bb(s[e],t[e]))return!1;return!0}function bb(s,t){return Ke(s)?kd(s,t):Ke(t)?kd(t,s):s===t}function kd(s,t){return Ke(t)?s.length===t.length&&s.every((e,i)=>e===t[i]):s.length===1&&s[0]===t}function wb(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),i=s.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let n=e.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")n>1&&n--;else break;return e.slice(0,n).join("/")+"/"+i.slice(o).join("/")}var Ln;(function(s){s.pop="pop",s.push="push"})(Ln||(Ln={}));var Tn;(function(s){s.back="back",s.forward="forward",s.unknown=""})(Tn||(Tn={}));function Eb(s){if(!s)if(tr){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),yb(s)}const Ab=/^[^#]+#/;function Tb(s,t){return s.replace(Ab,"#")+t}function Sb(s,t){const e=document.documentElement.getBoundingClientRect(),i=s.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const Ja=()=>({left:window.scrollX,top:window.scrollY});function Cb(s){let t;if("el"in s){const e=s.el,i=typeof e=="string"&&e.startsWith("#"),r=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!r)return;t=Sb(r,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ud(s,t){return(history.state?history.state.position-t:-1)+s}const Gl=new Map;function Rb(s,t){Gl.set(s,t)}function Ib(s){const t=Gl.get(s);return Gl.delete(s),t}let Pb=()=>location.protocol+"//"+location.host;function wg(s,t){const{pathname:e,search:i,hash:r}=t,n=s.indexOf("#");if(n>-1){let a=r.includes(s.slice(n))?s.slice(n).length:1,h=r.slice(a);return h[0]!=="/"&&(h="/"+h),Nd(h,"")}return Nd(e,s)+i+r}function Mb(s,t,e,i){let r=[],n=[],o=null;const a=({state:d})=>{const f=wg(s,location),p=e.value,m=t.value;let g=0;if(d){if(e.value=f,t.value=d,o&&o===p){o=null;return}g=m?d.position-m.position:0}else i(f);r.forEach(y=>{y(e.value,p,{delta:g,type:Ln.pop,direction:g?g>0?Tn.forward:Tn.back:Tn.unknown})})};function h(){o=e.value}function l(d){r.push(d);const f=()=>{const p=r.indexOf(d);p>-1&&r.splice(p,1)};return n.push(f),f}function c(){const{history:d}=window;d.state&&d.replaceState(Pt({},d.state,{scroll:Ja()}),"")}function u(){for(const d of n)d();n=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:h,listen:l,destroy:u}}function Gd(s,t,e,i=!1,r=!1){return{back:s,current:t,forward:e,replaced:i,position:window.history.length,scroll:r?Ja():null}}function Bb(s){const{history:t,location:e}=window,i={value:wg(s,e)},r={value:t.state};r.value||n(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function n(h,l,c){const u=s.indexOf("#"),d=u>-1?(e.host&&document.querySelector("base")?s:s.slice(u))+h:Pb()+s+h;try{t[c?"replaceState":"pushState"](l,"",d),r.value=l}catch(f){console.error(f),e[c?"replace":"assign"](d)}}function o(h,l){const c=Pt({},t.state,Gd(r.value.back,h,r.value.forward,!0),l,{position:r.value.position});n(h,c,!0),i.value=h}function a(h,l){const c=Pt({},r.value,t.state,{forward:h,scroll:Ja()});n(c.current,c,!0);const u=Pt({},Gd(i.value,h,null),{position:c.position+1},l);n(h,u,!1),i.value=h}return{location:i,state:r,push:a,replace:o}}function Fb(s){s=Eb(s);const t=Bb(s),e=Mb(s,t.state,t.location,t.replace);function i(n,o=!0){o||e.pauseListeners(),history.go(n)}const r=Pt({location:"",base:s,go:i,createHref:Tb.bind(null,s)},t,e);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function Ob(s){return typeof s=="string"||s&&typeof s=="object"}function Eg(s){return typeof s=="string"||typeof s=="symbol"}const Ns={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ag=Symbol("");var $d;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})($d||($d={}));function Rr(s,t){return Pt(new Error,{type:s,[Ag]:!0},t)}function bs(s,t){return s instanceof Error&&Ag in s&&(t==null||!!(s.type&t))}const Hd="[^/]+?",Db={sensitive:!1,strict:!1,start:!0,end:!0},Lb=/[.+*?^${}()[\]/\\]/g;function Nb(s,t){const e=Pt({},Db,t),i=[];let r=e.start?"^":"";const n=[];for(const l of s){const c=l.length?[]:[90];e.strict&&!l.length&&(r+="/");for(let u=0;u<l.length;u++){const d=l[u];let f=40+(e.sensitive?.25:0);if(d.type===0)u||(r+="/"),r+=d.value.replace(Lb,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=d;n.push({name:p,repeatable:m,optional:g});const v=y||Hd;if(v!==Hd){f+=10;try{new RegExp(`(${v})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+w.message)}}let _=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;u||(_=g&&l.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),r+=_,f+=20,g&&(f+=-8),m&&(f+=-20),v===".*"&&(f+=-50)}c.push(f)}i.push(c)}if(e.strict&&e.end){const l=i.length-1;i[l][i[l].length-1]+=.7000000000000001}e.strict||(r+="/?"),e.end?r+="$":e.strict&&(r+="(?:/|$)");const o=new RegExp(r,e.sensitive?"":"i");function a(l){const c=l.match(o),u={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",p=n[d-1];u[p.name]=f&&p.repeatable?f.split("/"):f}return u}function h(l){let c="",u=!1;for(const d of s){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,y=p in l?l[p]:"";if(Ke(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=Ke(y)?y.join("/"):y;if(!v)if(g)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);c+=v}}return c||"/"}return{re:o,score:i,keys:n,parse:a,stringify:h}}function kb(s,t){let e=0;for(;e<s.length&&e<t.length;){const i=t[e]-s[e];if(i)return i;e++}return s.length<t.length?s.length===1&&s[0]===80?-1:1:s.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ub(s,t){let e=0;const i=s.score,r=t.score;for(;e<i.length&&e<r.length;){const n=kb(i[e],r[e]);if(n)return n;e++}if(Math.abs(r.length-i.length)===1){if(Xd(i))return 1;if(Xd(r))return-1}return r.length-i.length}function Xd(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const Gb={type:0,value:""},$b=/[a-zA-Z0-9_]/;function Hb(s){if(!s)return[[]];if(s==="/")return[[Gb]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(f){throw new Error(`ERR (${e})/"${l}": ${f}`)}let e=0,i=e;const r=[];let n;function o(){n&&r.push(n),n=[]}let a=0,h,l="",c="";function u(){l&&(e===0?n.push({type:0,value:l}):e===1||e===2||e===3?(n.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),n.push({type:1,value:l,regexp:c,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),l="")}function d(){l+=h}for(;a<s.length;){if(h=s[a++],h==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:h==="/"?(l&&u(),o()):h===":"?(u(),e=1):d();break;case 4:d(),e=i;break;case 1:h==="("?e=2:$b.test(h)?d():(u(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&a--);break;case 2:h===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+h:e=3:c+=h;break;case 3:u(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&a--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${l}"`),u(),o(),r}function Xb(s,t,e){const i=Nb(Hb(s.path),e),r=Pt(i,{record:s,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Vb(s,t){const e=[],i=new Map;t=zd({strict:!1,end:!0,sensitive:!1},t);function r(c){return i.get(c)}function n(c,u,d){const f=!d,p=Wb(c);p.aliasOf=d&&d.record;const m=zd(t,c),g=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of _)g.push(Pt({},p,{components:d?d.record.components:p.components,path:w,aliasOf:d?d.record:p}))}let y,v;for(const _ of g){const{path:w}=_;if(u&&w[0]!=="/"){const A=u.record.path,R=A[A.length-1]==="/"?"":"/";_.path=u.record.path+(w&&R+w)}if(y=Xb(_,u,m),d?d.alias.push(y):(v=v||y,v!==y&&v.alias.push(y),f&&c.name&&!Wd(y)&&o(c.name)),p.children){const A=p.children;for(let R=0;R<A.length;R++)n(A[R],y,d&&d.children[R])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&h(y)}return v?()=>{o(v)}:An}function o(c){if(Eg(c)){const u=i.get(c);u&&(i.delete(c),e.splice(e.indexOf(u),1),u.children.forEach(o),u.alias.forEach(o))}else{const u=e.indexOf(c);u>-1&&(e.splice(u,1),c.record.name&&i.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return e}function h(c){let u=0;for(;u<e.length&&Ub(c,e[u])>=0&&(c.record.path!==e[u].record.path||!Tg(c,e[u]));)u++;e.splice(u,0,c),c.record.name&&!Wd(c)&&i.set(c.record.name,c)}function l(c,u){let d,f={},p,m;if("name"in c&&c.name){if(d=i.get(c.name),!d)throw Rr(1,{location:c});m=d.record.name,f=Pt(Vd(u.params,d.keys.filter(v=>!v.optional).concat(d.parent?d.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),c.params&&Vd(c.params,d.keys.map(v=>v.name))),p=d.stringify(f)}else if(c.path!=null)p=c.path,d=e.find(v=>v.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=u.name?i.get(u.name):e.find(v=>v.re.test(u.path)),!d)throw Rr(1,{location:c,currentLocation:u});m=d.record.name,f=Pt({},u.params,c.params),p=d.stringify(f)}const g=[];let y=d;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:f,matched:g,meta:jb(g)}}return s.forEach(c=>n(c)),{addRoute:n,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Vd(s,t){const e={};for(const i of t)i in s&&(e[i]=s[i]);return e}function Wb(s){return{path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:void 0,beforeEnter:s.beforeEnter,props:zb(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}}}function zb(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const i in s.components)t[i]=typeof e=="object"?e[i]:e;return t}function Wd(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function jb(s){return s.reduce((t,e)=>Pt(t,e.meta),{})}function zd(s,t){const e={};for(const i in s)e[i]=i in t?t[i]:s[i];return e}function Tg(s,t){return t.children.some(e=>e===s||Tg(s,e))}function Yb(s){const t={};if(s===""||s==="?")return t;const i=(s[0]==="?"?s.slice(1):s).split("&");for(let r=0;r<i.length;++r){const n=i[r].replace(_g," "),o=n.indexOf("="),a=Dn(o<0?n:n.slice(0,o)),h=o<0?null:Dn(n.slice(o+1));if(a in t){let l=t[a];Ke(l)||(l=t[a]=[l]),l.push(h)}else t[a]=h}return t}function jd(s){let t="";for(let e in s){const i=s[e];if(e=pb(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ke(i)?i.map(n=>n&&Ul(n)):[i&&Ul(i)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+e,n!=null&&(t+="="+n))})}return t}function qb(s){const t={};for(const e in s){const i=s[e];i!==void 0&&(t[e]=Ke(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const Kb=Symbol(""),Yd=Symbol(""),Eu=Symbol(""),Sg=Symbol(""),$l=Symbol("");function Yr(){let s=[];function t(i){return s.push(i),()=>{const r=s.indexOf(i);r>-1&&s.splice(r,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function Ws(s,t,e,i,r,n=o=>o()){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((a,h)=>{const l=d=>{d===!1?h(Rr(4,{from:e,to:t})):d instanceof Error?h(d):Ob(d)?h(Rr(2,{from:t,to:d})):(o&&i.enterCallbacks[r]===o&&typeof d=="function"&&o.push(d),a())},c=n(()=>s.call(i&&i.instances[r],t,e,l));let u=Promise.resolve(c);s.length<3&&(u=u.then(l)),u.catch(d=>h(d))})}function Sh(s,t,e,i,r=n=>n()){const n=[];for(const o of s)for(const a in o.components){let h=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Zb(h)){const c=(h.__vccOpts||h)[t];c&&n.push(Ws(c,e,i,o,a,r))}else{let l=h();n.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const u=ib(c)?c.default:c;o.components[a]=u;const f=(u.__vccOpts||u)[t];return f&&Ws(f,e,i,o,a,r)()}))}}return n}function Zb(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function qd(s){const t=fe(Eu),e=fe(Sg),i=Re(()=>{const h=xt(s.to);return t.resolve(h)}),r=Re(()=>{const{matched:h}=i.value,{length:l}=h,c=h[l-1],u=e.matched;if(!c||!u.length)return-1;const d=u.findIndex(Cr.bind(null,c));if(d>-1)return d;const f=Kd(h[l-2]);return l>1&&Kd(c)===f&&u[u.length-1].path!==f?u.findIndex(Cr.bind(null,h[l-2])):d}),n=Re(()=>r.value>-1&&e1(e.params,i.value.params)),o=Re(()=>r.value>-1&&r.value===e.matched.length-1&&bg(e.params,i.value.params));function a(h={}){return t1(h)?t[xt(s.replace)?"replace":"push"](xt(s.to)).catch(An):Promise.resolve()}return{route:i,href:Re(()=>i.value.href),isActive:n,isExactActive:o,navigate:a}}const Jb=ja({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qd,setup(s,{slots:t}){const e=Gi(qd(s)),{options:i}=fe(Eu),r=Re(()=>({[Zd(s.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[Zd(s.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const n=t.default&&t.default(e);return s.custom?n:vu("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:r.value},n)}}}),Qb=Jb;function t1(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function e1(s,t){for(const e in t){const i=t[e],r=s[e];if(typeof i=="string"){if(i!==r)return!1}else if(!Ke(r)||r.length!==i.length||i.some((n,o)=>n!==r[o]))return!1}return!0}function Kd(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Zd=(s,t,e)=>s??t??e,s1=ja({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const i=fe($l),r=Re(()=>s.route||i.value),n=fe(Yd,0),o=Re(()=>{let l=xt(n);const{matched:c}=r.value;let u;for(;(u=c[l])&&!u.components;)l++;return l}),a=Re(()=>r.value.matched[o.value]);Xo(Yd,Re(()=>o.value+1)),Xo(Kb,a),Xo($l,r);const h=Pe();return ii(()=>[h.value,a.value,s.name],([l,c,u],[d,f,p])=>{c&&(c.instances[u]=l,f&&f!==c&&l&&l===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),l&&c&&(!f||!Cr(c,f)||!d)&&(c.enterCallbacks[u]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=r.value,c=s.name,u=a.value,d=u&&u.components[c];if(!d)return Jd(e.default,{Component:d,route:l});const f=u.props[c],p=f?f===!0?l.params:typeof f=="function"?f(l):f:null,g=vu(d,Pt({},p,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(u.instances[c]=null)},ref:h}));return Jd(e.default,{Component:g,route:l})||g}}});function Jd(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const i1=s1;function r1(s){const t=Vb(s.routes,s),e=s.parseQuery||Yb,i=s.stringifyQuery||jd,r=s.history,n=Yr(),o=Yr(),a=Yr(),h=ix(Ns);let l=Ns;tr&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ah.bind(null,C=>""+C),u=Ah.bind(null,gb),d=Ah.bind(null,Dn);function f(C,X){let U,Y;return Eg(C)?(U=t.getRecordMatcher(C),Y=X):Y=C,t.addRoute(Y,U)}function p(C){const X=t.getRecordMatcher(C);X&&t.removeRoute(X)}function m(){return t.getRoutes().map(C=>C.record)}function g(C){return!!t.getRecordMatcher(C)}function y(C,X){if(X=Pt({},X||h.value),typeof C=="string"){const b=Th(e,C,X.path),E=t.resolve({path:b.path},X),M=r.createHref(b.fullPath);return Pt(b,E,{params:d(E.params),hash:Dn(b.hash),redirectedFrom:void 0,href:M})}let U;if(C.path!=null)U=Pt({},C,{path:Th(e,C.path,X.path).path});else{const b=Pt({},C.params);for(const E in b)b[E]==null&&delete b[E];U=Pt({},C,{params:u(b)}),X.params=u(X.params)}const Y=t.resolve(U,X),nt=C.hash||"";Y.params=c(d(Y.params));const dt=xb(i,Pt({},C,{hash:fb(nt),path:Y.path})),x=r.createHref(dt);return Pt({fullPath:dt,hash:nt,query:i===jd?qb(C.query):C.query||{}},Y,{redirectedFrom:void 0,href:x})}function v(C){return typeof C=="string"?Th(e,C,h.value.path):Pt({},C)}function _(C,X){if(l!==C)return Rr(8,{from:X,to:C})}function w(C){return P(C)}function A(C){return w(Pt(v(C),{replace:!0}))}function R(C){const X=C.matched[C.matched.length-1];if(X&&X.redirect){const{redirect:U}=X;let Y=typeof U=="function"?U(C):U;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=v(Y):{path:Y},Y.params={}),Pt({query:C.query,hash:C.hash,params:Y.path!=null?{}:C.params},Y)}}function P(C,X){const U=l=y(C),Y=h.value,nt=C.state,dt=C.force,x=C.replace===!0,b=R(U);if(b)return P(Pt(v(b),{state:typeof b=="object"?Pt({},nt,b.state):nt,force:dt,replace:x}),X||U);const E=U;E.redirectedFrom=X;let M;return!dt&&vb(i,Y,U)&&(M=Rr(16,{to:E,from:Y}),k(Y,Y,!0,!1)),(M?Promise.resolve(M):$(E,Y)).catch(I=>bs(I)?bs(I,2)?I:L(I):j(I,E,Y)).then(I=>{if(I){if(bs(I,2))return P(Pt({replace:x},v(I.to),{state:typeof I.to=="object"?Pt({},nt,I.to.state):nt,force:dt}),X||E)}else I=V(E,Y,!0,x,nt);return rt(E,Y,I),I})}function S(C,X){const U=_(C,X);return U?Promise.reject(U):Promise.resolve()}function B(C){const X=Tt.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(C):C()}function $(C,X){let U;const[Y,nt,dt]=n1(C,X);U=Sh(Y.reverse(),"beforeRouteLeave",C,X);for(const b of Y)b.leaveGuards.forEach(E=>{U.push(Ws(E,C,X))});const x=S.bind(null,C,X);return U.push(x),_t(U).then(()=>{U=[];for(const b of n.list())U.push(Ws(b,C,X));return U.push(x),_t(U)}).then(()=>{U=Sh(nt,"beforeRouteUpdate",C,X);for(const b of nt)b.updateGuards.forEach(E=>{U.push(Ws(E,C,X))});return U.push(x),_t(U)}).then(()=>{U=[];for(const b of dt)if(b.beforeEnter)if(Ke(b.beforeEnter))for(const E of b.beforeEnter)U.push(Ws(E,C,X));else U.push(Ws(b.beforeEnter,C,X));return U.push(x),_t(U)}).then(()=>(C.matched.forEach(b=>b.enterCallbacks={}),U=Sh(dt,"beforeRouteEnter",C,X,B),U.push(x),_t(U))).then(()=>{U=[];for(const b of o.list())U.push(Ws(b,C,X));return U.push(x),_t(U)}).catch(b=>bs(b,8)?b:Promise.reject(b))}function rt(C,X,U){a.list().forEach(Y=>B(()=>Y(C,X,U)))}function V(C,X,U,Y,nt){const dt=_(C,X);if(dt)return dt;const x=X===Ns,b=tr?history.state:{};U&&(Y||x?r.replace(C.fullPath,Pt({scroll:x&&b&&b.scroll},nt)):r.push(C.fullPath,nt)),h.value=C,k(C,X,U,x),L()}let T;function F(){T||(T=r.listen((C,X,U)=>{if(!kt.listening)return;const Y=y(C),nt=R(Y);if(nt){P(Pt(nt,{replace:!0}),Y).catch(An);return}l=Y;const dt=h.value;tr&&Rb(Ud(dt.fullPath,U.delta),Ja()),$(Y,dt).catch(x=>bs(x,12)?x:bs(x,2)?(P(x.to,Y).then(b=>{bs(b,20)&&!U.delta&&U.type===Ln.pop&&r.go(-1,!1)}).catch(An),Promise.reject()):(U.delta&&r.go(-U.delta,!1),j(x,Y,dt))).then(x=>{x=x||V(Y,dt,!1),x&&(U.delta&&!bs(x,8)?r.go(-U.delta,!1):U.type===Ln.pop&&bs(x,20)&&r.go(-1,!1)),rt(Y,dt,x)}).catch(An)}))}let K=Yr(),z=Yr(),H;function j(C,X,U){L(C);const Y=z.list();return Y.length?Y.forEach(nt=>nt(C,X,U)):console.error(C),Promise.reject(C)}function At(){return H&&h.value!==Ns?Promise.resolve():new Promise((C,X)=>{K.add([C,X])})}function L(C){return H||(H=!C,F(),K.list().forEach(([X,U])=>C?U(C):X()),K.reset()),C}function k(C,X,U,Y){const{scrollBehavior:nt}=s;if(!tr||!nt)return Promise.resolve();const dt=!U&&Ib(Ud(C.fullPath,0))||(Y||!U)&&history.state&&history.state.scroll||null;return zn().then(()=>nt(C,X,dt)).then(x=>x&&Cb(x)).catch(x=>j(x,C,X))}const lt=C=>r.go(C);let wt;const Tt=new Set,kt={currentRoute:h,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:s,push:w,replace:A,go:lt,back:()=>lt(-1),forward:()=>lt(1),beforeEach:n.add,beforeResolve:o.add,afterEach:a.add,onError:z.add,isReady:At,install(C){const X=this;C.component("RouterLink",Qb),C.component("RouterView",i1),C.config.globalProperties.$router=X,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>xt(h)}),tr&&!wt&&h.value===Ns&&(wt=!0,w(r.location).catch(nt=>{}));const U={};for(const nt in Ns)Object.defineProperty(U,nt,{get:()=>h.value[nt],enumerable:!0});C.provide(Eu,X),C.provide(Sg,Mm(U)),C.provide($l,h);const Y=C.unmount;Tt.add(C),C.unmount=function(){Tt.delete(C),Tt.size<1&&(l=Ns,T&&T(),T=null,h.value=Ns,wt=!1,H=!1),Y()}}};function _t(C){return C.reduce((X,U)=>X.then(()=>B(U)),Promise.resolve())}return kt}function n1(s,t){const e=[],i=[],r=[],n=Math.max(t.matched.length,s.matched.length);for(let o=0;o<n;o++){const a=t.matched[o];a&&(s.matched.find(l=>Cr(l,a))?i.push(a):e.push(a));const h=s.matched[o];h&&(t.matched.find(l=>Cr(l,h))||r.push(h))}return[e,i,r]}const Qa=sb("clicks",{state:()=>({me:{},users:[],clicks:[],game:null,myClicks:0}),getters:{getMe(s){return s.me},getUsers:s=>s.users,getClicks:s=>s.clicks,getGame:s=>s.game,getMyClicks:s=>s.myClicks},actions:{setMe(s){this.me=s},fetchClicks(){let s=fe("apiEndpoint");fetch(`${s}/clicks`).then(t=>t.json()).then(t=>this.clicks=t)},fetchUsers(){let s=fe("apiEndpoint");fetch(`${s}/users`).then(t=>t.json()).then(t=>this.users=t)},fetchGame(){let s=fe("apiEndpoint");fetch(`${s}/games`).then(t=>t.json()).then(t=>this.game=t[0])},addClick(s){this.clicks.push(s)},addMyClick(){this.myClicks++},rmAllClicks(){this.clicks=[]},newGame(s){this.game=s},rmGame(){this.game=null},updateGame(s){this.game=s},addUser(s){this.users.push(s)},rmUser(s){let t=this.users.findIndex(e=>e._id===s._id);this.users.splice(t,1)}}});function pa(s,t,e){return fetch(s,{method:t,headers:{"Content-Type":"application/json",Accept:"application/json"},referrerPolicy:"no-referrer",body:e})}const Yn=(s,t)=>{const e=s.__vccOpts||s;for(const[i,r]of t)e[i]=r;return e},o1={inject:["socketServer","apiEndpoint","socket"],mounted(){this.socket.on("connect",s=>{pa(`${this.apiEndpoint}/users`,"POST",JSON.stringify({socket:this.socket.id})).then(t=>t.json()).then(t=>{this.store.setMe(t),this.store.addUser(t),this.socket.on("delete-game",e=>{this.store.rmGame()}),this.socket.on("new-game",e=>{this.store.newGame(e.message)}),this.socket.on("delete-all-clicks",e=>{this.store.rmAllClicks()}),this.socket.on("new-click",e=>{this.store.addClick(e.message)}),this.socket.on("update-game",e=>{this.store.updateGame(e.message)}),this.socket.on("new-user",e=>{this.store.addUser(e.message)}),this.socket.on("remove-user",e=>{this.store.rmUser(e.message)})})})},setup(){const s=Qa();return s.fetchClicks(),s.fetchUsers(),s.fetchGame(),{store:s}}},a1={class:"wrapper"},h1={class:"main"},l1=St("footer",{class:"footer"}," To the Moon  - Cryptolike by STERNA | PAU ",-1);function c1(s,t,e,i,r,n){const o=Ex("RouterView");return re(),Ce("div",a1,[St("div",h1,[Zt(o)]),l1])}const u1=Yn(o1,[["render",c1]]),d1={},f1=s=>(uu("data-v-bd266e9e"),s=s(),du(),s),p1={class:"phases"},m1=f1(()=>St("div",{class:"bg"},[St("span",null,""),St("span",null,""),St("span",null,""),St("span",null,""),St("span",null,""),St("span",null,""),St("span",null,""),St("span",null,"")],-1)),g1=[m1];function _1(s,t){return re(),Ce("div",p1,g1)}const y1=Yn(d1,[["render",_1],["__scopeId","data-v-bd266e9e"]]),x1=s=>(uu("data-v-04612a86"),s=s(),du(),s),v1={key:0,class:"userface"},b1=x1(()=>St("p",null,"click here!",-1)),w1=[b1],E1={class:"click-stats"},A1={class:"click-stats"},T1={key:1,class:"userface"},S1={class:"waiting"},C1={__name:"HomeView",setup(s){const t=Qa(),{me:e,myClicks:i,getGame:r}=bu(t),{addMyClick:n}=t,o=fe("apiEndpoint");function a(){pa(`${o}/clicks`,"POST",JSON.stringify({by:e.value._id})).then(h=>h.json()).then(h=>{n()})}return(h,l)=>xt(r)?(re(),Ce("main",v1,[St("div",{class:"clickme",onClick:l[0]||(l[0]=c=>a())},w1),St("div",E1,"You are "+Mi(xt(e).name)+".",1),St("div",A1,[bn("You contributed "),St("strong",null,Mi(xt(i)),1),bn(" clicks.")])])):(re(),Ce("main",T1,[St("div",S1,[Zt(y1),bn(" Waiting for game to start ")])]))}},R1=Yn(C1,[["__scopeId","data-v-04612a86"]]),Au=s=>(uu("data-v-7b2049c4"),s=s(),du(),s),I1={class:"admin-wrapper"},P1=Au(()=>St("h1",null,"Admin area",-1)),M1={class:"game"},B1=Au(()=>St("h2",null,"Game state",-1)),F1={class:"clicks"},O1=Au(()=>St("h2",null,"Clicks given",-1)),D1={class:"users"},L1={key:0,class:"tag"},N1={__name:"AdminView",setup(s){const t=Qa(),{getGame:e,getUsers:i,getClicks:r,me:n}=bu(t),{newGame:o,rmGame:a}=t,h=fe("apiEndpoint");function l(){pa(`${h}/games`,"POST",null).then(u=>u.json()).then(u=>o(u))}function c(){pa(`${h}/games`,"DELETE",null).then(u=>u.json()).then(u=>a())}return(u,d)=>(re(),Ce("div",I1,[P1,St("section",M1,[B1,St("div",null,[St("pre",null,Mi(xt(e)),1)]),St("div",null,[St("button",{type:"button",onClick:l},"Start game"),xt(e)?(re(),Ce("button",{key:0,type:"button",onClick:c},"Stop game")):Ed("",!0)])]),St("section",F1,[O1,St("div",null,Mi(xt(r).length),1)]),St("section",D1,[St("h2",null,"Users online ("+Mi(xt(i).length)+")",1),St("ul",null,[(re(!0),Ce(Be,null,Hx(xt(i),f=>(re(),Ce("li",null,[bn(Mi(f.name)+" ",1),f._id==xt(n)._id?(re(),Ce("span",L1,"me")):Ed("",!0)]))),256))])])]))}},k1=Yn(N1,[["__scopeId","data-v-7b2049c4"]]);typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function U1(s){return yu()}function G1(s,t){U1()&&fu(s,t)}function zo(s,t,e){return ii(s,(r,n,o)=>{r&&t(r,n,o)},{...e,once:!1})}var $1=Object.defineProperty,H1=(s,t,e)=>t in s?$1(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,Ch=(s,t,e)=>(H1(s,typeof t!="symbol"?t+"":t,e),e),Qd=["container","sprite","graphics","text","bitmap-text","tiling-sprite","animated-sprite","mesh","simple-plane","nine-slice-plane","simple-rope","filter","blur-filter","alpha-filter","displacement-filter","color-matrix-filter","f-x-a-a-filter"],tf="pixi-";function X1(s){let t=s.replace(/[A-Z]/g,r=>`-${r.toLowerCase()}`);t.startsWith("-")&&(t=t.slice(1));const e=Qd.includes(t),i=t.startsWith(tf)&&Qd.includes(t.slice(tf.length));return e||i}var Wi=(s=>(s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2",s))(Wi||{}),Cg=(s=>(s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS",s))(Cg||{}),Hl=(s=>(s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL",s))(Hl||{}),ht=(s=>(s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR",s))(ht||{}),us=(s=>(s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN",s))(us||{}),D=(s=>(s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL",s))(D||{}),yr=(s=>(s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",s))(yr||{}),it=(s=>(s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT",s))(it||{}),J=(s=>(s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT",s))(J||{}),As=(s=>(s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR",s))(As||{}),Rs=(s=>(s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",s))(Rs||{}),ys=(s=>(s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL",s))(ys||{}),_e=(s=>(s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",s))(_e||{}),hs=(s=>(s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT",s))(hs||{}),Tu=(s=>(s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL",s))(Tu||{}),Oe=(s=>(s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp",s))(Oe||{}),Kt=(s=>(s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR",s))(Kt||{}),jt=(s=>(s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH",s))(jt||{}),ps=(s=>(s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",s))(ps||{});const V1={createCanvas:(s,t)=>{const e=document.createElement("canvas");return e.width=s,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(s,t)=>fetch(s,t),parseXML:s=>new DOMParser().parseFromString(s,"text/xml")},Q={ADAPTER:V1,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Rh=/iPhone/i,ef=/iPod/i,sf=/iPad/i,rf=/\biOS-universal(?:.+)Mac\b/i,Ih=/\bAndroid(?:.+)Mobile\b/i,nf=/Android/i,qi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ho=/Silk/i,ws=/Windows Phone/i,of=/\bWindows(?:.+)ARM\b/i,af=/BlackBerry/i,hf=/BB10/i,lf=/Opera Mini/i,cf=/\b(CriOS|Chrome)(?:.+)Mobile/i,uf=/Mobile(?:.+)Firefox\b/i,df=function(s){return typeof s<"u"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream>"u"};function W1(s){return function(t){return t.test(s)}}function ff(s){var t={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?t.userAgent=s:s&&s.userAgent&&(t={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var r=W1(e),n={apple:{phone:r(Rh)&&!r(ws),ipod:r(ef),tablet:!r(Rh)&&(r(sf)||df(t))&&!r(ws),universal:r(rf),device:(r(Rh)||r(ef)||r(sf)||r(rf)||df(t))&&!r(ws)},amazon:{phone:r(qi),tablet:!r(qi)&&r(ho),device:r(qi)||r(ho)},android:{phone:!r(ws)&&r(qi)||!r(ws)&&r(Ih),tablet:!r(ws)&&!r(qi)&&!r(Ih)&&(r(ho)||r(nf)),device:!r(ws)&&(r(qi)||r(ho)||r(Ih)||r(nf))||r(/\bokhttp\b/i)},windows:{phone:r(ws),tablet:r(of),device:r(ws)||r(of)},other:{blackberry:r(af),blackberry10:r(hf),opera:r(lf),firefox:r(uf),chrome:r(cf),device:r(af)||r(hf)||r(lf)||r(uf)||r(cf)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const z1=ff.default??ff,Ts=z1(globalThis.navigator);Q.RETINA_PREFIX=/@([0-9\.]+)x/;Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Su(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function j1(s){if(s.__esModule)return s;var t=s.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(i){var r=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return s[i]}})}),e}var Rg={exports:{}};(function(s){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(h,l,c){this.fn=h,this.context=l,this.once=c||!1}function n(h,l,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new r(c,u||h,d),p=e?e+l:l;return h._events[p]?h._events[p].fn?h._events[p]=[h._events[p],f]:h._events[p].push(f):(h._events[p]=f,h._eventsCount++),h}function o(h,l){--h._eventsCount===0?h._events=new i:delete h._events[l]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)t.call(c,u)&&l.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=e?e+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(l){var c=e?e+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,d,f,p){var m=e?e+l:l;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,_;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,d),!0;case 5:return g.fn.call(g.context,c,u,d,f),!0;case 6:return g.fn.call(g.context,c,u,d,f,p),!0}for(_=1,v=new Array(y-1);_<y;_++)v[_-1]=arguments[_];g.fn.apply(g.context,v)}else{var w=g.length,A;for(_=0;_<w;_++)switch(g[_].once&&this.removeListener(l,g[_].fn,void 0,!0),y){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,c);break;case 3:g[_].fn.call(g[_].context,c,u);break;case 4:g[_].fn.call(g[_].context,c,u,d);break;default:if(!v)for(A=1,v=new Array(y-1);A<y;A++)v[A-1]=arguments[A];g[_].fn.apply(g[_].context,v)}}return!0},a.prototype.on=function(l,c,u){return n(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return n(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,d){var f=e?e+l:l;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||d&&!p[m].once||u&&p[m].context!==u)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=e?e+l:l,this._events[c]&&o(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,s.exports=a})(Rg);var Y1=Rg.exports;const qn=Su(Y1);var Cu={exports:{}};Cu.exports=th;Cu.exports.default=th;function th(s,t,e){e=e||2;var i=t&&t.length,r=i?t[0]*e:s.length,n=Ig(s,0,r,e,!0),o=[];if(!n||n.next===n.prev)return o;var a,h,l,c,u,d,f;if(i&&(n=Q1(s,t,n,e)),s.length>80*e){a=l=s[0],h=c=s[1];for(var p=e;p<r;p+=e)u=s[p],d=s[p+1],u<a&&(a=u),d<h&&(h=d),u>l&&(l=u),d>c&&(c=d);f=Math.max(l-a,c-h),f=f!==0?32767/f:0}return Nn(n,o,e,a,h,f,0),o}function Ig(s,t,e,i,r){var n,o;if(r===Wl(s,t,e,i)>0)for(n=t;n<e;n+=i)o=pf(n,s[n],s[n+1],o);else for(n=e-i;n>=t;n-=i)o=pf(n,s[n],s[n+1],o);return o&&eh(o,o.next)&&(Un(o),o=o.next),o}function $i(s,t){if(!s)return s;t||(t=s);var e=s,i;do if(i=!1,!e.steiner&&(eh(e,e.next)||$t(e.prev,e,e.next)===0)){if(Un(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Nn(s,t,e,i,r,n,o){if(s){!o&&n&&rw(s,i,r,n);for(var a=s,h,l;s.prev!==s.next;){if(h=s.prev,l=s.next,n?K1(s,i,r,n):q1(s)){t.push(h.i/e|0),t.push(s.i/e|0),t.push(l.i/e|0),Un(s),s=l.next,a=l.next;continue}if(s=l,s===a){o?o===1?(s=Z1($i(s),t,e),Nn(s,t,e,i,r,n,2)):o===2&&J1(s,t,e,i,r,n):Nn($i(s),t,e,i,r,n,1);break}}}}function q1(s){var t=s.prev,e=s,i=s.next;if($t(t,e,i)>=0)return!1;for(var r=t.x,n=e.x,o=i.x,a=t.y,h=e.y,l=i.y,c=r<n?r<o?r:o:n<o?n:o,u=a<h?a<l?a:l:h<l?h:l,d=r>n?r>o?r:o:n>o?n:o,f=a>h?a>l?a:l:h>l?h:l,p=i.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=u&&p.y<=f&&dr(r,a,n,h,o,l,p.x,p.y)&&$t(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function K1(s,t,e,i){var r=s.prev,n=s,o=s.next;if($t(r,n,o)>=0)return!1;for(var a=r.x,h=n.x,l=o.x,c=r.y,u=n.y,d=o.y,f=a<h?a<l?a:l:h<l?h:l,p=c<u?c<d?c:d:u<d?u:d,m=a>h?a>l?a:l:h>l?h:l,g=c>u?c>d?c:d:u>d?u:d,y=Xl(f,p,t,e,i),v=Xl(m,g,t,e,i),_=s.prevZ,w=s.nextZ;_&&_.z>=y&&w&&w.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==o&&dr(a,c,h,u,l,d,_.x,_.y)&&$t(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=f&&w.x<=m&&w.y>=p&&w.y<=g&&w!==r&&w!==o&&dr(a,c,h,u,l,d,w.x,w.y)&&$t(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==o&&dr(a,c,h,u,l,d,_.x,_.y)&&$t(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=v;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=g&&w!==r&&w!==o&&dr(a,c,h,u,l,d,w.x,w.y)&&$t(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Z1(s,t,e){var i=s;do{var r=i.prev,n=i.next.next;!eh(r,n)&&Pg(r,i,i.next,n)&&kn(r,n)&&kn(n,r)&&(t.push(r.i/e|0),t.push(i.i/e|0),t.push(n.i/e|0),Un(i),Un(i.next),i=s=n),i=i.next}while(i!==s);return $i(i)}function J1(s,t,e,i,r,n){var o=s;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&aw(o,a)){var h=Mg(o,a);o=$i(o,o.next),h=$i(h,h.next),Nn(o,t,e,i,r,n,0),Nn(h,t,e,i,r,n,0);return}a=a.next}o=o.next}while(o!==s)}function Q1(s,t,e,i){var r=[],n,o,a,h,l;for(n=0,o=t.length;n<o;n++)a=t[n]*i,h=n<o-1?t[n+1]*i:s.length,l=Ig(s,a,h,i,!1),l===l.next&&(l.steiner=!0),r.push(ow(l));for(r.sort(tw),n=0;n<r.length;n++)e=ew(r[n],e);return e}function tw(s,t){return s.x-t.x}function ew(s,t){var e=sw(s,t);if(!e)return t;var i=Mg(e,s);return $i(i,i.next),$i(e,e.next)}function sw(s,t){var e=t,i=s.x,r=s.y,n=-1/0,o;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var a=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>n&&(n=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var h=o,l=o.x,c=o.y,u=1/0,d;e=o;do i>=e.x&&e.x>=l&&i!==e.x&&dr(r<c?i:n,r,l,c,r<c?n:i,r,e.x,e.y)&&(d=Math.abs(r-e.y)/(i-e.x),kn(e,s)&&(d<u||d===u&&(e.x>o.x||e.x===o.x&&iw(o,e)))&&(o=e,u=d)),e=e.next;while(e!==h);return o}function iw(s,t){return $t(s.prev,s,t.prev)<0&&$t(t.next,s,s.next)<0}function rw(s,t,e,i){var r=s;do r.z===0&&(r.z=Xl(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==s);r.prevZ.nextZ=null,r.prevZ=null,nw(r)}function nw(s){var t,e,i,r,n,o,a,h,l=1;do{for(e=s,s=null,n=null,o=0;e;){for(o++,i=e,a=0,t=0;t<l&&(a++,i=i.nextZ,!!i);t++);for(h=l;a>0||h>0&&i;)a!==0&&(h===0||!i||e.z<=i.z)?(r=e,e=e.nextZ,a--):(r=i,i=i.nextZ,h--),n?n.nextZ=r:s=r,r.prevZ=n,n=r;e=i}n.nextZ=null,l*=2}while(o>1);return s}function Xl(s,t,e,i,r){return s=(s-e)*r|0,t=(t-i)*r|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,s|t<<1}function ow(s){var t=s,e=s;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==s);return e}function dr(s,t,e,i,r,n,o,a){return(r-o)*(t-a)>=(s-o)*(n-a)&&(s-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(n-a)>=(r-o)*(i-a)}function aw(s,t){return s.next.i!==t.i&&s.prev.i!==t.i&&!hw(s,t)&&(kn(s,t)&&kn(t,s)&&lw(s,t)&&($t(s.prev,s,t.prev)||$t(s,t.prev,t))||eh(s,t)&&$t(s.prev,s,s.next)>0&&$t(t.prev,t,t.next)>0)}function $t(s,t,e){return(t.y-s.y)*(e.x-t.x)-(t.x-s.x)*(e.y-t.y)}function eh(s,t){return s.x===t.x&&s.y===t.y}function Pg(s,t,e,i){var r=co($t(s,t,e)),n=co($t(s,t,i)),o=co($t(e,i,s)),a=co($t(e,i,t));return!!(r!==n&&o!==a||r===0&&lo(s,e,t)||n===0&&lo(s,i,t)||o===0&&lo(e,s,i)||a===0&&lo(e,t,i))}function lo(s,t,e){return t.x<=Math.max(s.x,e.x)&&t.x>=Math.min(s.x,e.x)&&t.y<=Math.max(s.y,e.y)&&t.y>=Math.min(s.y,e.y)}function co(s){return s>0?1:s<0?-1:0}function hw(s,t){var e=s;do{if(e.i!==s.i&&e.next.i!==s.i&&e.i!==t.i&&e.next.i!==t.i&&Pg(e,e.next,s,t))return!0;e=e.next}while(e!==s);return!1}function kn(s,t){return $t(s.prev,s,s.next)<0?$t(s,t,s.next)>=0&&$t(s,s.prev,t)>=0:$t(s,t,s.prev)<0||$t(s,s.next,t)<0}function lw(s,t){var e=s,i=!1,r=(s.x+t.x)/2,n=(s.y+t.y)/2;do e.y>n!=e.next.y>n&&e.next.y!==e.y&&r<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==s);return i}function Mg(s,t){var e=new Vl(s.i,s.x,s.y),i=new Vl(t.i,t.x,t.y),r=s.next,n=t.prev;return s.next=t,t.prev=s,e.next=r,r.prev=e,i.next=e,e.prev=i,n.next=i,i.prev=n,i}function pf(s,t,e,i){var r=new Vl(s,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Un(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Vl(s,t,e){this.i=s,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}th.deviation=function(s,t,e,i){var r=t&&t.length,n=r?t[0]*e:s.length,o=Math.abs(Wl(s,0,n,e));if(r)for(var a=0,h=t.length;a<h;a++){var l=t[a]*e,c=a<h-1?t[a+1]*e:s.length;o-=Math.abs(Wl(s,l,c,e))}var u=0;for(a=0;a<i.length;a+=3){var d=i[a]*e,f=i[a+1]*e,p=i[a+2]*e;u+=Math.abs((s[d]-s[p])*(s[f+1]-s[d+1])-(s[d]-s[f])*(s[p+1]-s[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function Wl(s,t,e,i){for(var r=0,n=t,o=e-i;n<e;n+=i)r+=(s[o]-s[n])*(s[n+1]+s[o+1]),o=n;return r}th.flatten=function(s){for(var t=s[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,r=0;r<s.length;r++){for(var n=0;n<s[r].length;n++)for(var o=0;o<t;o++)e.vertices.push(s[r][n][o]);r>0&&(i+=s[r-1].length,e.holes.push(i))}return e};var cw=Cu.exports;const uw=Su(cw);var ma={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */ma.exports;(function(s,t){(function(e){var i=t&&!t.nodeType&&t,r=s&&!s.nodeType&&s,n=typeof jo=="object"&&jo;(n.global===n||n.window===n||n.self===n)&&(e=n);var o,a=2147483647,h=36,l=1,c=26,u=38,d=700,f=72,p=128,m="-",g=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=h-l,A=Math.floor,R=String.fromCharCode,P;function S(L){throw new RangeError(_[L])}function B(L,k){for(var lt=L.length,wt=[];lt--;)wt[lt]=k(L[lt]);return wt}function $(L,k){var lt=L.split("@"),wt="";lt.length>1&&(wt=lt[0]+"@",L=lt[1]),L=L.replace(v,".");var Tt=L.split("."),kt=B(Tt,k).join(".");return wt+kt}function rt(L){for(var k=[],lt=0,wt=L.length,Tt,kt;lt<wt;)Tt=L.charCodeAt(lt++),Tt>=55296&&Tt<=56319&&lt<wt?(kt=L.charCodeAt(lt++),(kt&64512)==56320?k.push(((Tt&1023)<<10)+(kt&1023)+65536):(k.push(Tt),lt--)):k.push(Tt);return k}function V(L){return B(L,function(k){var lt="";return k>65535&&(k-=65536,lt+=R(k>>>10&1023|55296),k=56320|k&1023),lt+=R(k),lt}).join("")}function T(L){return L-48<10?L-22:L-65<26?L-65:L-97<26?L-97:h}function F(L,k){return L+22+75*(L<26)-((k!=0)<<5)}function K(L,k,lt){var wt=0;for(L=lt?A(L/d):L>>1,L+=A(L/k);L>w*c>>1;wt+=h)L=A(L/w);return A(wt+(w+1)*L/(L+u))}function z(L){var k=[],lt=L.length,wt,Tt=0,kt=p,_t=f,C,X,U,Y,nt,dt,x,b,E;for(C=L.lastIndexOf(m),C<0&&(C=0),X=0;X<C;++X)L.charCodeAt(X)>=128&&S("not-basic"),k.push(L.charCodeAt(X));for(U=C>0?C+1:0;U<lt;){for(Y=Tt,nt=1,dt=h;U>=lt&&S("invalid-input"),x=T(L.charCodeAt(U++)),(x>=h||x>A((a-Tt)/nt))&&S("overflow"),Tt+=x*nt,b=dt<=_t?l:dt>=_t+c?c:dt-_t,!(x<b);dt+=h)E=h-b,nt>A(a/E)&&S("overflow"),nt*=E;wt=k.length+1,_t=K(Tt-Y,wt,Y==0),A(Tt/wt)>a-kt&&S("overflow"),kt+=A(Tt/wt),Tt%=wt,k.splice(Tt++,0,kt)}return V(k)}function H(L){var k,lt,wt,Tt,kt,_t,C,X,U,Y,nt,dt=[],x,b,E,M;for(L=rt(L),x=L.length,k=p,lt=0,kt=f,_t=0;_t<x;++_t)nt=L[_t],nt<128&&dt.push(R(nt));for(wt=Tt=dt.length,Tt&&dt.push(m);wt<x;){for(C=a,_t=0;_t<x;++_t)nt=L[_t],nt>=k&&nt<C&&(C=nt);for(b=wt+1,C-k>A((a-lt)/b)&&S("overflow"),lt+=(C-k)*b,k=C,_t=0;_t<x;++_t)if(nt=L[_t],nt<k&&++lt>a&&S("overflow"),nt==k){for(X=lt,U=h;Y=U<=kt?l:U>=kt+c?c:U-kt,!(X<Y);U+=h)M=X-Y,E=h-Y,dt.push(R(F(Y+M%E,0))),X=A(M/E);dt.push(R(F(X,0))),kt=K(lt,b,wt==Tt),lt=0,++wt}++lt,++k}return dt.join("")}function j(L){return $(L,function(k){return g.test(k)?z(k.slice(4).toLowerCase()):k})}function At(L){return $(L,function(k){return y.test(k)?"xn--"+H(k):k})}if(o={version:"1.4.1",ucs2:{decode:rt,encode:V},decode:z,encode:H,toASCII:At,toUnicode:j},i&&r)if(s.exports==i)r.exports=o;else for(P in o)o.hasOwnProperty(P)&&(i[P]=o[P]);else e.punycode=o})(jo)})(ma,ma.exports);var dw=ma.exports,fw=Error,pw=EvalError,mw=RangeError,gw=ReferenceError,Bg=SyntaxError,Kn=TypeError,_w=URIError,yw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;t[e]=r;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var n=Object.getOwnPropertySymbols(t);if(n.length!==1||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==r||o.enumerable!==!0)return!1}return!0},mf=typeof Symbol<"u"&&Symbol,xw=yw,vw=function(){return typeof mf!="function"||typeof Symbol!="function"||typeof mf("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:xw()},Ph={__proto__:null,foo:{}},bw=Object,ww=function(){return{__proto__:Ph}.foo===Ph.foo&&!(Ph instanceof bw)},Ew="Function.prototype.bind called on incompatible ",Aw=Object.prototype.toString,Tw=Math.max,Sw="[object Function]",gf=function(t,e){for(var i=[],r=0;r<t.length;r+=1)i[r]=t[r];for(var n=0;n<e.length;n+=1)i[n+t.length]=e[n];return i},Cw=function(t,e){for(var i=[],r=e,n=0;r<t.length;r+=1,n+=1)i[n]=t[r];return i},Rw=function(s,t){for(var e="",i=0;i<s.length;i+=1)e+=s[i],i+1<s.length&&(e+=t);return e},Iw=function(t){var e=this;if(typeof e!="function"||Aw.apply(e)!==Sw)throw new TypeError(Ew+e);for(var i=Cw(arguments,1),r,n=function(){if(this instanceof r){var c=e.apply(this,gf(i,arguments));return Object(c)===c?c:this}return e.apply(t,gf(i,arguments))},o=Tw(0,e.length-i.length),a=[],h=0;h<o;h++)a[h]="$"+h;if(r=Function("binder","return function ("+Rw(a,",")+"){ return binder.apply(this,arguments); }")(n),e.prototype){var l=function(){};l.prototype=e.prototype,r.prototype=new l,l.prototype=null}return r},Pw=Iw,Ru=Function.prototype.bind||Pw,Mw=Function.prototype.call,Bw=Object.prototype.hasOwnProperty,Fw=Ru,Ow=Fw.call(Mw,Bw),bt,Dw=fw,Lw=pw,Nw=mw,kw=gw,Ir=Bg,xr=Kn,Uw=_w,Fg=Function,Mh=function(s){try{return Fg('"use strict"; return ('+s+").constructor;")()}catch{}},Di=Object.getOwnPropertyDescriptor;if(Di)try{Di({},"")}catch{Di=null}var Bh=function(){throw new xr},Gw=Di?function(){try{return arguments.callee,Bh}catch{try{return Di(arguments,"callee").get}catch{return Bh}}}():Bh,Ki=vw(),$w=ww(),ee=Object.getPrototypeOf||($w?function(s){return s.__proto__}:null),er={},Hw=typeof Uint8Array>"u"||!ee?bt:ee(Uint8Array),Li={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?bt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?bt:ArrayBuffer,"%ArrayIteratorPrototype%":Ki&&ee?ee([][Symbol.iterator]()):bt,"%AsyncFromSyncIteratorPrototype%":bt,"%AsyncFunction%":er,"%AsyncGenerator%":er,"%AsyncGeneratorFunction%":er,"%AsyncIteratorPrototype%":er,"%Atomics%":typeof Atomics>"u"?bt:Atomics,"%BigInt%":typeof BigInt>"u"?bt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?bt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?bt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?bt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Dw,"%eval%":eval,"%EvalError%":Lw,"%Float32Array%":typeof Float32Array>"u"?bt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?bt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?bt:FinalizationRegistry,"%Function%":Fg,"%GeneratorFunction%":er,"%Int8Array%":typeof Int8Array>"u"?bt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?bt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?bt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ki&&ee?ee(ee([][Symbol.iterator]())):bt,"%JSON%":typeof JSON=="object"?JSON:bt,"%Map%":typeof Map>"u"?bt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ki||!ee?bt:ee(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?bt:Promise,"%Proxy%":typeof Proxy>"u"?bt:Proxy,"%RangeError%":Nw,"%ReferenceError%":kw,"%Reflect%":typeof Reflect>"u"?bt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?bt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ki||!ee?bt:ee(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?bt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ki&&ee?ee(""[Symbol.iterator]()):bt,"%Symbol%":Ki?Symbol:bt,"%SyntaxError%":Ir,"%ThrowTypeError%":Gw,"%TypedArray%":Hw,"%TypeError%":xr,"%Uint8Array%":typeof Uint8Array>"u"?bt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?bt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?bt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?bt:Uint32Array,"%URIError%":Uw,"%WeakMap%":typeof WeakMap>"u"?bt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?bt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?bt:WeakSet};if(ee)try{null.error}catch(s){var Xw=ee(ee(s));Li["%Error.prototype%"]=Xw}var Vw=function s(t){var e;if(t==="%AsyncFunction%")e=Mh("async function () {}");else if(t==="%GeneratorFunction%")e=Mh("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Mh("async function* () {}");else if(t==="%AsyncGenerator%"){var i=s("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var r=s("%AsyncGenerator%");r&&ee&&(e=ee(r.prototype))}return Li[t]=e,e},_f={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Zn=Ru,ga=Ow,Ww=Zn.call(Function.call,Array.prototype.concat),zw=Zn.call(Function.apply,Array.prototype.splice),yf=Zn.call(Function.call,String.prototype.replace),_a=Zn.call(Function.call,String.prototype.slice),jw=Zn.call(Function.call,RegExp.prototype.exec),Yw=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,qw=/\\(\\)?/g,Kw=function(t){var e=_a(t,0,1),i=_a(t,-1);if(e==="%"&&i!=="%")throw new Ir("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new Ir("invalid intrinsic syntax, expected opening `%`");var r=[];return yf(t,Yw,function(n,o,a,h){r[r.length]=a?yf(h,qw,"$1"):o||n}),r},Zw=function(t,e){var i=t,r;if(ga(_f,i)&&(r=_f[i],i="%"+r[0]+"%"),ga(Li,i)){var n=Li[i];if(n===er&&(n=Vw(i)),typeof n>"u"&&!e)throw new xr("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new Ir("intrinsic "+t+" does not exist!")},Gr=function(t,e){if(typeof t!="string"||t.length===0)throw new xr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new xr('"allowMissing" argument must be a boolean');if(jw(/^%?[^%]*%?$/,t)===null)throw new Ir("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Kw(t),r=i.length>0?i[0]:"",n=Zw("%"+r+"%",e),o=n.name,a=n.value,h=!1,l=n.alias;l&&(r=l[0],zw(i,Ww([0,1],l)));for(var c=1,u=!0;c<i.length;c+=1){var d=i[c],f=_a(d,0,1),p=_a(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Ir("property names with quotes must have matching quotes");if((d==="constructor"||!u)&&(h=!0),r+="."+d,o="%"+r+"%",ga(Li,o))a=Li[o];else if(a!=null){if(!(d in a)){if(!e)throw new xr("base intrinsic for "+t+" exists, but the property is not available.");return}if(Di&&c+1>=i.length){var m=Di(a,d);u=!!m,u&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[d]}else u=ga(a,d),a=a[d];u&&!h&&(Li[o]=a)}}return a},Og={exports:{}},Fh,xf;function Iu(){if(xf)return Fh;xf=1;var s=Gr,t=s("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Fh=t,Fh}var Jw=Gr,Yo=Jw("%Object.getOwnPropertyDescriptor%",!0);if(Yo)try{Yo([],"length")}catch{Yo=null}var Dg=Yo,vf=Iu(),Qw=Bg,Zi=Kn,bf=Dg,tE=function(t,e,i){if(!t||typeof t!="object"&&typeof t!="function")throw new Zi("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new Zi("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Zi("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Zi("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Zi("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Zi("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,h=!!bf&&bf(t,e);if(vf)vf(t,e,{configurable:o===null&&h?h.configurable:!o,enumerable:r===null&&h?h.enumerable:!r,value:i,writable:n===null&&h?h.writable:!n});else if(a||!r&&!n&&!o)t[e]=i;else throw new Qw("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},zl=Iu(),Lg=function(){return!!zl};Lg.hasArrayLengthDefineBug=function(){if(!zl)return null;try{return zl([],"length",{value:1}).length!==1}catch{return!0}};var eE=Lg,sE=Gr,wf=tE,iE=eE(),Ef=Dg,Af=Kn,rE=sE("%Math.floor%"),nE=function(t,e){if(typeof t!="function")throw new Af("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||rE(e)!==e)throw new Af("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,n=!0;if("length"in t&&Ef){var o=Ef(t,"length");o&&!o.configurable&&(r=!1),o&&!o.writable&&(n=!1)}return(r||n||!i)&&(iE?wf(t,"length",e,!0,!0):wf(t,"length",e)),t};(function(s){var t=Ru,e=Gr,i=nE,r=Kn,n=e("%Function.prototype.apply%"),o=e("%Function.prototype.call%"),a=e("%Reflect.apply%",!0)||t.call(o,n),h=Iu(),l=e("%Math.max%");s.exports=function(d){if(typeof d!="function")throw new r("a function is required");var f=a(t,o,arguments);return i(f,1+l(0,d.length-(arguments.length-1)),!0)};var c=function(){return a(t,n,arguments)};h?h(s.exports,"apply",{value:c}):s.exports.apply=c})(Og);var oE=Og.exports,Ng=Gr,kg=oE,aE=kg(Ng("String.prototype.indexOf")),hE=function(t,e){var i=Ng(t,!!e);return typeof i=="function"&&aE(t,".prototype.")>-1?kg(i):i};const lE={},cE=Object.freeze(Object.defineProperty({__proto__:null,default:lE},Symbol.toStringTag,{value:"Module"})),uE=j1(cE);var Pu=typeof Map=="function"&&Map.prototype,Oh=Object.getOwnPropertyDescriptor&&Pu?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ya=Pu&&Oh&&typeof Oh.get=="function"?Oh.get:null,Tf=Pu&&Map.prototype.forEach,Mu=typeof Set=="function"&&Set.prototype,Dh=Object.getOwnPropertyDescriptor&&Mu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,xa=Mu&&Dh&&typeof Dh.get=="function"?Dh.get:null,Sf=Mu&&Set.prototype.forEach,dE=typeof WeakMap=="function"&&WeakMap.prototype,Sn=dE?WeakMap.prototype.has:null,fE=typeof WeakSet=="function"&&WeakSet.prototype,Cn=fE?WeakSet.prototype.has:null,pE=typeof WeakRef=="function"&&WeakRef.prototype,Cf=pE?WeakRef.prototype.deref:null,mE=Boolean.prototype.valueOf,gE=Object.prototype.toString,_E=Function.prototype.toString,yE=String.prototype.match,Bu=String.prototype.slice,qs=String.prototype.replace,xE=String.prototype.toUpperCase,Rf=String.prototype.toLowerCase,Ug=RegExp.prototype.test,If=Array.prototype.concat,ls=Array.prototype.join,vE=Array.prototype.slice,Pf=Math.floor,jl=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Lh=Object.getOwnPropertySymbols,Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Pr||!0)?Symbol.toStringTag:null,Gg=Object.prototype.propertyIsEnumerable,Mf=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(s){return s.__proto__}:null);function Bf(s,t){if(s===1/0||s===-1/0||s!==s||s&&s>-1e3&&s<1e3||Ug.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof s=="number"){var i=s<0?-Pf(-s):Pf(s);if(i!==s){var r=String(i),n=Bu.call(t,r.length+1);return qs.call(r,e,"$&_")+"."+qs.call(qs.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return qs.call(t,e,"$&_")}var ql=uE,Ff=ql.custom,Of=Hg(Ff)?Ff:null,bE=function s(t,e,i,r){var n=e||{};if(zs(n,"quoteStyle")&&n.quoteStyle!=="single"&&n.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(zs(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=zs(n,"customInspect")?n.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(zs(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(zs(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=n.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Vg(t,n);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var h=String(t);return a?Bf(t,h):h}if(typeof t=="bigint"){var l=String(t)+"n";return a?Bf(t,l):l}var c=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=c&&c>0&&typeof t=="object")return Kl(t)?"[Array]":"[Object]";var u=UE(n,i);if(typeof r>"u")r=[];else if(Xg(r,t)>=0)return"[Circular]";function d(T,F,K){if(F&&(r=vE.call(r),r.push(F)),K){var z={depth:n.depth};return zs(n,"quoteStyle")&&(z.quoteStyle=n.quoteStyle),s(T,z,i+1,r)}return s(T,n,i+1,r)}if(typeof t=="function"&&!Df(t)){var f=PE(t),p=uo(t,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+ls.call(p,", ")+" }":"")}if(Hg(t)){var m=Pr?qs.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Yl.call(t);return typeof t=="object"&&!Pr?qr(m):m}if(LE(t)){for(var g="<"+Rf.call(String(t.nodeName)),y=t.attributes||[],v=0;v<y.length;v++)g+=" "+y[v].name+"="+$g(wE(y[v].value),"double",n);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+Rf.call(String(t.nodeName))+">",g}if(Kl(t)){if(t.length===0)return"[]";var _=uo(t,d);return u&&!kE(_)?"["+Zl(_,u)+"]":"[ "+ls.call(_,", ")+" ]"}if(AE(t)){var w=uo(t,d);return!("cause"in Error.prototype)&&"cause"in t&&!Gg.call(t,"cause")?"{ ["+String(t)+"] "+ls.call(If.call("[cause]: "+d(t.cause),w),", ")+" }":w.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+ls.call(w,", ")+" }"}if(typeof t=="object"&&o){if(Of&&typeof t[Of]=="function"&&ql)return ql(t,{depth:c-i});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(ME(t)){var A=[];return Tf&&Tf.call(t,function(T,F){A.push(d(F,t,!0)+" => "+d(T,t))}),Lf("Map",ya.call(t),A,u)}if(OE(t)){var R=[];return Sf&&Sf.call(t,function(T){R.push(d(T,t))}),Lf("Set",xa.call(t),R,u)}if(BE(t))return Nh("WeakMap");if(DE(t))return Nh("WeakSet");if(FE(t))return Nh("WeakRef");if(SE(t))return qr(d(Number(t)));if(RE(t))return qr(d(jl.call(t)));if(CE(t))return qr(mE.call(t));if(TE(t))return qr(d(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===jo)return"{ [object globalThis] }";if(!EE(t)&&!Df(t)){var P=uo(t,d),S=Mf?Mf(t)===Object.prototype:t instanceof Object||t.constructor===Object,B=t instanceof Object?"":"null prototype",$=!S&&pe&&Object(t)===t&&pe in t?Bu.call(ci(t),8,-1):B?"Object":"",rt=S||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",V=rt+($||B?"["+ls.call(If.call([],$||[],B||[]),": ")+"] ":"");return P.length===0?V+"{}":u?V+"{"+Zl(P,u)+"}":V+"{ "+ls.call(P,", ")+" }"}return String(t)};function $g(s,t,e){var i=(e.quoteStyle||t)==="double"?'"':"'";return i+s+i}function wE(s){return qs.call(String(s),/"/g,"&quot;")}function Kl(s){return ci(s)==="[object Array]"&&(!pe||!(typeof s=="object"&&pe in s))}function EE(s){return ci(s)==="[object Date]"&&(!pe||!(typeof s=="object"&&pe in s))}function Df(s){return ci(s)==="[object RegExp]"&&(!pe||!(typeof s=="object"&&pe in s))}function AE(s){return ci(s)==="[object Error]"&&(!pe||!(typeof s=="object"&&pe in s))}function TE(s){return ci(s)==="[object String]"&&(!pe||!(typeof s=="object"&&pe in s))}function SE(s){return ci(s)==="[object Number]"&&(!pe||!(typeof s=="object"&&pe in s))}function CE(s){return ci(s)==="[object Boolean]"&&(!pe||!(typeof s=="object"&&pe in s))}function Hg(s){if(Pr)return s&&typeof s=="object"&&s instanceof Symbol;if(typeof s=="symbol")return!0;if(!s||typeof s!="object"||!Yl)return!1;try{return Yl.call(s),!0}catch{}return!1}function RE(s){if(!s||typeof s!="object"||!jl)return!1;try{return jl.call(s),!0}catch{}return!1}var IE=Object.prototype.hasOwnProperty||function(s){return s in this};function zs(s,t){return IE.call(s,t)}function ci(s){return gE.call(s)}function PE(s){if(s.name)return s.name;var t=yE.call(_E.call(s),/^function\s*([\w$]+)/);return t?t[1]:null}function Xg(s,t){if(s.indexOf)return s.indexOf(t);for(var e=0,i=s.length;e<i;e++)if(s[e]===t)return e;return-1}function ME(s){if(!ya||!s||typeof s!="object")return!1;try{ya.call(s);try{xa.call(s)}catch{return!0}return s instanceof Map}catch{}return!1}function BE(s){if(!Sn||!s||typeof s!="object")return!1;try{Sn.call(s,Sn);try{Cn.call(s,Cn)}catch{return!0}return s instanceof WeakMap}catch{}return!1}function FE(s){if(!Cf||!s||typeof s!="object")return!1;try{return Cf.call(s),!0}catch{}return!1}function OE(s){if(!xa||!s||typeof s!="object")return!1;try{xa.call(s);try{ya.call(s)}catch{return!0}return s instanceof Set}catch{}return!1}function DE(s){if(!Cn||!s||typeof s!="object")return!1;try{Cn.call(s,Cn);try{Sn.call(s,Sn)}catch{return!0}return s instanceof WeakSet}catch{}return!1}function LE(s){return!s||typeof s!="object"?!1:typeof HTMLElement<"u"&&s instanceof HTMLElement?!0:typeof s.nodeName=="string"&&typeof s.getAttribute=="function"}function Vg(s,t){if(s.length>t.maxStringLength){var e=s.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return Vg(Bu.call(s,0,t.maxStringLength),t)+i}var r=qs.call(qs.call(s,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,NE);return $g(r,"single",t)}function NE(s){var t=s.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+xE.call(t.toString(16))}function qr(s){return"Object("+s+")"}function Nh(s){return s+" { ? }"}function Lf(s,t,e,i){var r=i?Zl(e,i):ls.call(e,", ");return s+" ("+t+") {"+r+"}"}function kE(s){for(var t=0;t<s.length;t++)if(Xg(s[t],`
`)>=0)return!1;return!0}function UE(s,t){var e;if(s.indent==="	")e="	";else if(typeof s.indent=="number"&&s.indent>0)e=ls.call(Array(s.indent+1)," ");else return null;return{base:e,prev:ls.call(Array(t+1),e)}}function Zl(s,t){if(s.length===0)return"";var e=`
`+t.prev+t.base;return e+ls.call(s,","+e)+`
`+t.prev}function uo(s,t){var e=Kl(s),i=[];if(e){i.length=s.length;for(var r=0;r<s.length;r++)i[r]=zs(s,r)?t(s[r],s):""}var n=typeof Lh=="function"?Lh(s):[],o;if(Pr){o={};for(var a=0;a<n.length;a++)o["$"+n[a]]=n[a]}for(var h in s)zs(s,h)&&(e&&String(Number(h))===h&&h<s.length||Pr&&o["$"+h]instanceof Symbol||(Ug.call(/[^\w$]/,h)?i.push(t(h,s)+": "+t(s[h],s)):i.push(h+": "+t(s[h],s))));if(typeof Lh=="function")for(var l=0;l<n.length;l++)Gg.call(s,n[l])&&i.push("["+t(n[l])+"]: "+t(s[n[l]],s));return i}var Wg=Gr,$r=hE,GE=bE,$E=Kn,fo=Wg("%WeakMap%",!0),po=Wg("%Map%",!0),HE=$r("WeakMap.prototype.get",!0),XE=$r("WeakMap.prototype.set",!0),VE=$r("WeakMap.prototype.has",!0),WE=$r("Map.prototype.get",!0),zE=$r("Map.prototype.set",!0),jE=$r("Map.prototype.has",!0),Fu=function(s,t){for(var e=s,i;(i=e.next)!==null;e=i)if(i.key===t)return e.next=i.next,i.next=s.next,s.next=i,i},YE=function(s,t){var e=Fu(s,t);return e&&e.value},qE=function(s,t,e){var i=Fu(s,t);i?i.value=e:s.next={key:t,next:s.next,value:e}},KE=function(s,t){return!!Fu(s,t)},ZE=function(){var t,e,i,r={assert:function(n){if(!r.has(n))throw new $E("Side channel does not contain "+GE(n))},get:function(n){if(fo&&n&&(typeof n=="object"||typeof n=="function")){if(t)return HE(t,n)}else if(po){if(e)return WE(e,n)}else if(i)return YE(i,n)},has:function(n){if(fo&&n&&(typeof n=="object"||typeof n=="function")){if(t)return VE(t,n)}else if(po){if(e)return jE(e,n)}else if(i)return KE(i,n);return!1},set:function(n,o){fo&&n&&(typeof n=="object"||typeof n=="function")?(t||(t=new fo),XE(t,n,o)):po?(e||(e=new po),zE(e,n,o)):(i||(i={key:{},next:null}),qE(i,n,o))}};return r},JE=String.prototype.replace,QE=/%20/g,kh={RFC1738:"RFC1738",RFC3986:"RFC3986"},Ou={default:kh.RFC3986,formatters:{RFC1738:function(s){return JE.call(s,QE,"+")},RFC3986:function(s){return String(s)}},RFC1738:kh.RFC1738,RFC3986:kh.RFC3986},tA=Ou,Uh=Object.prototype.hasOwnProperty,Ii=Array.isArray,es=function(){for(var s=[],t=0;t<256;++t)s.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return s}(),eA=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(Ii(i)){for(var r=[],n=0;n<i.length;++n)typeof i[n]<"u"&&r.push(i[n]);e.obj[e.prop]=r}}},zg=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)typeof t[r]<"u"&&(i[r]=t[r]);return i},sA=function s(t,e,i){if(!e)return t;if(typeof e!="object"){if(Ii(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!Uh.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var r=t;return Ii(t)&&!Ii(e)&&(r=zg(t,i)),Ii(t)&&Ii(e)?(e.forEach(function(n,o){if(Uh.call(t,o)){var a=t[o];a&&typeof a=="object"&&n&&typeof n=="object"?t[o]=s(a,n,i):t.push(n)}else t[o]=n}),t):Object.keys(e).reduce(function(n,o){var a=e[o];return Uh.call(n,o)?n[o]=s(n[o],a,i):n[o]=a,n},r)},iA=function(t,e){return Object.keys(e).reduce(function(i,r){return i[r]=e[r],i},t)},rA=function(s,t,e){var i=s.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Gh=1024,nA=function(t,e,i,r,n){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",h=0;h<o.length;h+=Gh){for(var l=o.length>=Gh?o.slice(h,h+Gh):o,c=[],u=0;u<l.length;++u){var d=l.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||n===tA.RFC1738&&(d===40||d===41)){c[c.length]=l.charAt(u);continue}if(d<128){c[c.length]=es[d];continue}if(d<2048){c[c.length]=es[192|d>>6]+es[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=es[224|d>>12]+es[128|d>>6&63]+es[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=es[240|d>>18]+es[128|d>>12&63]+es[128|d>>6&63]+es[128|d&63]}a+=c.join("")}return a},oA=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],r=0;r<e.length;++r)for(var n=e[r],o=n.obj[n.prop],a=Object.keys(o),h=0;h<a.length;++h){var l=a[h],c=o[l];typeof c=="object"&&c!==null&&i.indexOf(c)===-1&&(e.push({obj:o,prop:l}),i.push(c))}return eA(e),t},aA=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},hA=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},lA=function(t,e){return[].concat(t,e)},cA=function(t,e){if(Ii(t)){for(var i=[],r=0;r<t.length;r+=1)i.push(e(t[r]));return i}return e(t)},jg={arrayToObject:zg,assign:iA,combine:lA,compact:oA,decode:rA,encode:nA,isBuffer:hA,isRegExp:aA,maybeMap:cA,merge:sA},Yg=ZE,qo=jg,Rn=Ou,uA=Object.prototype.hasOwnProperty,qg={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},os=Array.isArray,dA=Array.prototype.push,Kg=function(s,t){dA.apply(s,os(t)?t:[t])},fA=Date.prototype.toISOString,Nf=Rn.default,qt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:qo.encode,encodeValuesOnly:!1,format:Nf,formatter:Rn.formatters[Nf],indices:!1,serializeDate:function(t){return fA.call(t)},skipNulls:!1,strictNullHandling:!1},pA=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},$h={},mA=function s(t,e,i,r,n,o,a,h,l,c,u,d,f,p,m,g,y,v){for(var _=t,w=v,A=0,R=!1;(w=w.get($h))!==void 0&&!R;){var P=w.get(t);if(A+=1,typeof P<"u"){if(P===A)throw new RangeError("Cyclic object value");R=!0}typeof w.get($h)>"u"&&(A=0)}if(typeof c=="function"?_=c(e,_):_ instanceof Date?_=f(_):i==="comma"&&os(_)&&(_=qo.maybeMap(_,function(L){return L instanceof Date?f(L):L})),_===null){if(o)return l&&!g?l(e,qt.encoder,y,"key",p):e;_=""}if(pA(_)||qo.isBuffer(_)){if(l){var S=g?e:l(e,qt.encoder,y,"key",p);return[m(S)+"="+m(l(_,qt.encoder,y,"value",p))]}return[m(e)+"="+m(String(_))]}var B=[];if(typeof _>"u")return B;var $;if(i==="comma"&&os(_))g&&l&&(_=qo.maybeMap(_,l)),$=[{value:_.length>0?_.join(",")||null:void 0}];else if(os(c))$=c;else{var rt=Object.keys(_);$=u?rt.sort(u):rt}var V=h?e.replace(/\./g,"%2E"):e,T=r&&os(_)&&_.length===1?V+"[]":V;if(n&&os(_)&&_.length===0)return T+"[]";for(var F=0;F<$.length;++F){var K=$[F],z=typeof K=="object"&&typeof K.value<"u"?K.value:_[K];if(!(a&&z===null)){var H=d&&h?K.replace(/\./g,"%2E"):K,j=os(_)?typeof i=="function"?i(T,H):T:T+(d?"."+H:"["+H+"]");v.set(t,A);var At=Yg();At.set($h,v),Kg(B,s(z,j,i,r,n,o,a,h,i==="comma"&&g&&os(_)?null:l,c,u,d,f,p,m,g,y,At))}}return B},gA=function(t){if(!t)return qt;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||qt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Rn.default;if(typeof t.format<"u"){if(!uA.call(Rn.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var r=Rn.formatters[i],n=qt.filter;(typeof t.filter=="function"||os(t.filter))&&(n=t.filter);var o;if(t.arrayFormat in qg?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=qt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:qt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:qt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:qt.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:qt.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?qt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:qt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:qt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:qt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:qt.encodeValuesOnly,filter:n,format:i,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:qt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:qt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:qt.strictNullHandling}},_A=function(s,t){var e=s,i=gA(t),r,n;typeof i.filter=="function"?(n=i.filter,e=n("",e)):os(i.filter)&&(n=i.filter,r=n);var o=[];if(typeof e!="object"||e===null)return"";var a=qg[i.arrayFormat],h=a==="comma"&&i.commaRoundTrip;r||(r=Object.keys(e)),i.sort&&r.sort(i.sort);for(var l=Yg(),c=0;c<r.length;++c){var u=r[c];i.skipNulls&&e[u]===null||Kg(o,mA(e[u],u,a,h,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,l))}var d=o.join(i.delimiter),f=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""},Mr=jg,Jl=Object.prototype.hasOwnProperty,yA=Array.isArray,Ht={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Mr.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},xA=function(s){return s.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},Zg=function(s,t){return s&&typeof s=="string"&&t.comma&&s.indexOf(",")>-1?s.split(","):s},vA="utf8=%26%2310003%3B",bA="utf8=%E2%9C%93",wA=function(t,e){var i={__proto__:null},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=e.parameterLimit===1/0?void 0:e.parameterLimit,o=r.split(e.delimiter,n),a=-1,h,l=e.charset;if(e.charsetSentinel)for(h=0;h<o.length;++h)o[h].indexOf("utf8=")===0&&(o[h]===bA?l="utf-8":o[h]===vA&&(l="iso-8859-1"),a=h,h=o.length);for(h=0;h<o.length;++h)if(h!==a){var c=o[h],u=c.indexOf("]="),d=u===-1?c.indexOf("="):u+1,f,p;d===-1?(f=e.decoder(c,Ht.decoder,l,"key"),p=e.strictNullHandling?null:""):(f=e.decoder(c.slice(0,d),Ht.decoder,l,"key"),p=Mr.maybeMap(Zg(c.slice(d+1),e),function(g){return e.decoder(g,Ht.decoder,l,"value")})),p&&e.interpretNumericEntities&&l==="iso-8859-1"&&(p=xA(p)),c.indexOf("[]=")>-1&&(p=yA(p)?[p]:p);var m=Jl.call(i,f);m&&e.duplicates==="combine"?i[f]=Mr.combine(i[f],p):(!m||e.duplicates==="last")&&(i[f]=p)}return i},EA=function(s,t,e,i){for(var r=i?t:Zg(t,e),n=s.length-1;n>=0;--n){var o,a=s[n];if(a==="[]"&&e.parseArrays)o=e.allowEmptyArrays&&r===""?[]:[].concat(r);else{o=e.plainObjects?Object.create(null):{};var h=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=e.decodeDotInKeys?h.replace(/%2E/g,"."):h,c=parseInt(l,10);!e.parseArrays&&l===""?o={0:r}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&e.parseArrays&&c<=e.arrayLimit?(o=[],o[c]=r):l!=="__proto__"&&(o[l]=r)}r=o}return r},AA=function(t,e,i,r){if(t){var n=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,h=i.depth>0&&o.exec(n),l=h?n.slice(0,h.index):n,c=[];if(l){if(!i.plainObjects&&Jl.call(Object.prototype,l)&&!i.allowPrototypes)return;c.push(l)}for(var u=0;i.depth>0&&(h=a.exec(n))!==null&&u<i.depth;){if(u+=1,!i.plainObjects&&Jl.call(Object.prototype,h[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(h[1])}return h&&c.push("["+n.slice(h.index)+"]"),EA(c,e,i,r)}},TA=function(t){if(!t)return Ht;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Ht.charset:t.charset,i=typeof t.duplicates>"u"?Ht.duplicates:t.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var r=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Ht.allowDots:!!t.allowDots;return{allowDots:r,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ht.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ht.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ht.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ht.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ht.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ht.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Ht.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Ht.decoder,delimiter:typeof t.delimiter=="string"||Mr.isRegExp(t.delimiter)?t.delimiter:Ht.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ht.depth,duplicates:i,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ht.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ht.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ht.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ht.strictNullHandling}},SA=function(s,t){var e=TA(t);if(s===""||s===null||typeof s>"u")return e.plainObjects?Object.create(null):{};for(var i=typeof s=="string"?wA(s,e):s,r=e.plainObjects?Object.create(null):{},n=Object.keys(i),o=0;o<n.length;++o){var a=n[o],h=AA(a,i[a],e,typeof s=="string");r=Mr.merge(r,h,e)}return e.allowSparse===!0?r:Mr.compact(r)},CA=_A,RA=SA,IA=Ou,PA={formats:IA,parse:RA,stringify:CA},MA=dw;function Is(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var BA=/^([a-z0-9.+-]+:)/i,FA=/:[0-9]*$/,OA=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,DA=["<",">",'"',"`"," ","\r",`
`,"	"],LA=["{","}","|","\\","^","`"].concat(DA),Ql=["'"].concat(LA),kf=["%","/","?",";","#"].concat(Ql),Uf=["/","?","#"],NA=255,Gf=/^[+a-z0-9A-Z_-]{0,63}$/,kA=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,UA={javascript:!0,"javascript:":!0},tc={javascript:!0,"javascript:":!0},vr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ec=PA;function GA(s,t,e){if(s&&typeof s=="object"&&s instanceof Is)return s;var i=new Is;return i.parse(s,t,e),i}Is.prototype.parse=function(s,t,e){if(typeof s!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var i=s.indexOf("?"),r=i!==-1&&i<s.indexOf("#")?"?":"#",n=s.split(r),o=/\\/g;n[0]=n[0].replace(o,"/"),s=n.join(r);var a=s;if(a=a.trim(),!e&&s.split("#").length===1){var h=OA.exec(a);if(h)return this.path=a,this.href=a,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=ec.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=BA.exec(a);if(l){l=l[0];var c=l.toLowerCase();this.protocol=c,a=a.substr(l.length)}if(e||l||a.match(/^\/\/[^@/]+@[^@/]+/)){var u=a.substr(0,2)==="//";u&&!(l&&tc[l])&&(a=a.substr(2),this.slashes=!0)}if(!tc[l]&&(u||l&&!vr[l])){for(var d=-1,f=0;f<Uf.length;f++){var p=a.indexOf(Uf[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,g;d===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",d),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<kf.length;f++){var p=a.indexOf(kf[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var v=this.hostname.split(/\./),f=0,_=v.length;f<_;f++){var w=v[f];if(w&&!w.match(Gf)){for(var A="",R=0,P=w.length;R<P;R++)w.charCodeAt(R)>127?A+="x":A+=w[R];if(!A.match(Gf)){var S=v.slice(0,f),B=v.slice(f+1),$=w.match(kA);$&&(S.push($[1]),B.unshift($[2])),B.length&&(a="/"+B.join(".")+a),this.hostname=S.join(".");break}}}this.hostname.length>NA?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=MA.toASCII(this.hostname));var rt=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+rt,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!UA[c])for(var f=0,_=Ql.length;f<_;f++){var T=Ql[f];if(a.indexOf(T)!==-1){var F=encodeURIComponent(T);F===T&&(F=escape(T)),a=a.split(T).join(F)}}var K=a.indexOf("#");K!==-1&&(this.hash=a.substr(K),a=a.slice(0,K));var z=a.indexOf("?");if(z!==-1?(this.search=a.substr(z),this.query=a.substr(z+1),t&&(this.query=ec.parse(this.query)),a=a.slice(0,z)):t&&(this.search="",this.query={}),a&&(this.pathname=a),vr[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var rt=this.pathname||"",H=this.search||"";this.path=rt+H}return this.href=this.format(),this};Is.prototype.format=function(){var s=this.auth||"";s&&(s=encodeURIComponent(s),s=s.replace(/%3A/i,":"),s+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",r=!1,n="";this.host?r=s+this.host:this.hostname&&(r=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=ec.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||vr[t])&&r!==!1?(r="//"+(r||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):r||(r=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+r+e+o+i};Is.prototype.resolve=function(s){return this.resolveObject(GA(s,!1,!0)).format()};Is.prototype.resolveObject=function(s){if(typeof s=="string"){var t=new Is;t.parse(s,!1,!0),s=t}for(var e=new Is,i=Object.keys(this),r=0;r<i.length;r++){var n=i[r];e[n]=this[n]}if(e.hash=s.hash,s.href==="")return e.href=e.format(),e;if(s.slashes&&!s.protocol){for(var o=Object.keys(s),a=0;a<o.length;a++){var h=o[a];h!=="protocol"&&(e[h]=s[h])}return vr[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(s.protocol&&s.protocol!==e.protocol){if(!vr[s.protocol]){for(var l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];e[u]=s[u]}return e.href=e.format(),e}if(e.protocol=s.protocol,!s.host&&!tc[s.protocol]){for(var _=(s.pathname||"").split("/");_.length&&!(s.host=_.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),e.pathname=_.join("/")}else e.pathname=s.pathname;if(e.search=s.search,e.query=s.query,e.host=s.host||"",e.auth=s.auth,e.hostname=s.hostname||s.host,e.port=s.port,e.pathname||e.search){var d=e.pathname||"",f=e.search||"";e.path=d+f}return e.slashes=e.slashes||s.slashes,e.href=e.format(),e}var p=e.pathname&&e.pathname.charAt(0)==="/",m=s.host||s.pathname&&s.pathname.charAt(0)==="/",g=m||p||e.host&&s.pathname,y=g,v=e.pathname&&e.pathname.split("/")||[],_=s.pathname&&s.pathname.split("/")||[],w=e.protocol&&!vr[e.protocol];if(w&&(e.hostname="",e.port=null,e.host&&(v[0]===""?v[0]=e.host:v.unshift(e.host)),e.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(_[0]===""?_[0]=s.host:_.unshift(s.host)),s.host=null),g=g&&(_[0]===""||v[0]==="")),m)e.host=s.host||s.host===""?s.host:e.host,e.hostname=s.hostname||s.hostname===""?s.hostname:e.hostname,e.search=s.search,e.query=s.query,v=_;else if(_.length)v||(v=[]),v.pop(),v=v.concat(_),e.search=s.search,e.query=s.query;else if(s.search!=null){if(w){e.host=v.shift(),e.hostname=e.host;var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.hostname=A.shift(),e.host=e.hostname)}return e.search=s.search,e.query=s.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!v.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var R=v.slice(-1)[0],P=(e.host||s.host||v.length>1)&&(R==="."||R==="..")||R==="",S=0,B=v.length;B>=0;B--)R=v[B],R==="."?v.splice(B,1):R===".."?(v.splice(B,1),S++):S&&(v.splice(B,1),S--);if(!g&&!y)for(;S--;S)v.unshift("..");g&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),P&&v.join("/").substr(-1)!=="/"&&v.push("");var $=v[0]===""||v[0]&&v[0].charAt(0)==="/";if(w){e.hostname=$?"":v.length?v.shift():"",e.host=e.hostname;var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.hostname=A.shift(),e.host=e.hostname)}return g=g||e.host&&v.length,g&&!$&&v.unshift(""),v.length>0?e.pathname=v.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=s.auth||e.auth,e.slashes=e.slashes||s.slashes,e.href=e.format(),e};Is.prototype.parseHost=function(){var s=this.host,t=FA.exec(s);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),s=s.substr(0,s.length-t.length)),s&&(this.hostname=s)};const $f={};function yt(s,t,e=3){if($f[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${s}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`),console.warn(i))),$f[t]=!0}function ke(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function Kr(s){return s.split("?")[0].split("#")[0]}function $A(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function HA(s,t,e){return s.replace(new RegExp($A(t),"g"),e)}function XA(s,t){let e="",i=0,r=-1,n=0,o=-1;for(let a=0;a<=s.length;++a){if(a<s.length)o=s.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const h=e.lastIndexOf("/");if(h!==e.length-1){h===-1?(e="",i=0):(e=e.slice(0,h),i=e.length-1-e.lastIndexOf("/")),r=a,n=0;continue}}else if(e.length===2||e.length===1){e="",i=0,r=a,n=0;continue}}}else e.length>0?e+=`/${s.slice(r+1,a)}`:e=s.slice(r+1,a),i=a-r-1;r=a,n=0}else o===46&&n!==-1?++n:n=-1}return e}const oe={toPosix(s){return HA(s,"\\","/")},isUrl(s){return/^https?:/.test(this.toPosix(s))},isDataUrl(s){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(s)},isBlobUrl(s){return s.startsWith("blob:")},hasProtocol(s){return/^[^/:]+:/.test(this.toPosix(s))},getProtocol(s){ke(s),s=this.toPosix(s);const t=/^file:\/\/\//.exec(s);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(s);return e?e[0]:""},toAbsolute(s,t,e){if(ke(s),this.isDataUrl(s)||this.isBlobUrl(s))return s;const i=Kr(this.toPosix(t??Q.ADAPTER.getBaseUrl())),r=Kr(this.toPosix(e??this.rootname(i)));return s=this.toPosix(s),s.startsWith("/")?oe.join(r,s.slice(1)):this.isAbsolute(s)?s:this.join(i,s)},normalize(s){if(ke(s),s.length===0)return".";if(this.isDataUrl(s)||this.isBlobUrl(s))return s;s=this.toPosix(s);let t="";const e=s.startsWith("/");this.hasProtocol(s)&&(t=this.rootname(s),s=s.slice(t.length));const i=s.endsWith("/");return s=XA(s),s.length>0&&i&&(s+="/"),e?`/${s}`:t+s},isAbsolute(s){return ke(s),s=this.toPosix(s),this.hasProtocol(s)?!0:s.startsWith("/")},join(...s){if(s.length===0)return".";let t;for(let e=0;e<s.length;++e){const i=s[e];if(ke(i),i.length>0)if(t===void 0)t=i;else{const r=s[e-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(s){if(ke(s),s.length===0)return".";s=this.toPosix(s);let t=s.charCodeAt(0);const e=t===47;let i=-1,r=!0;const n=this.getProtocol(s),o=s;s=s.slice(n.length);for(let a=s.length-1;a>=1;--a)if(t=s.charCodeAt(a),t===47){if(!r){i=a;break}}else r=!1;return i===-1?e?"/":this.isUrl(o)?n+s:n:e&&i===1?"//":n+s.slice(0,i)},rootname(s){ke(s),s=this.toPosix(s);let t="";if(s.startsWith("/")?t="/":t=this.getProtocol(s),this.isUrl(s)){const e=s.indexOf("/",t.length);e!==-1?t=s.slice(0,e):t=s,t.endsWith("/")||(t+="/")}return t},basename(s,t){ke(s),t&&ke(t),s=Kr(this.toPosix(s));let e=0,i=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";let o=t.length-1,a=-1;for(n=s.length-1;n>=0;--n){const h=s.charCodeAt(n);if(h===47){if(!r){e=n+1;break}}else a===-1&&(r=!1,a=n+1),o>=0&&(h===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=s.length),s.slice(e,i)}for(n=s.length-1;n>=0;--n)if(s.charCodeAt(n)===47){if(!r){e=n+1;break}}else i===-1&&(r=!1,i=n+1);return i===-1?"":s.slice(e,i)},extname(s){ke(s),s=Kr(this.toPosix(s));let t=-1,e=0,i=-1,r=!0,n=0;for(let o=s.length-1;o>=0;--o){const a=s.charCodeAt(o);if(a===47){if(!r){e=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===46?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===e+1?"":s.slice(t,i)},parse(s){ke(s);const t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;s=Kr(this.toPosix(s));let e=s.charCodeAt(0);const i=this.isAbsolute(s);let r;t.root=this.rootname(s),i||this.hasProtocol(s)?r=1:r=0;let n=-1,o=0,a=-1,h=!0,l=s.length-1,c=0;for(;l>=r;--l){if(e=s.charCodeAt(l),e===47){if(!h){o=l+1;break}continue}a===-1&&(h=!1,a=l+1),e===46?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||a===-1||c===0||c===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&i?t.base=t.name=s.slice(1,a):t.base=t.name=s.slice(o,a)):(o===0&&i?(t.name=s.slice(1,n),t.base=s.slice(1,a)):(t.name=s.slice(o,n),t.base=s.slice(o,a)),t.ext=s.slice(n,a)),t.dir=this.dirname(s),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let Hh;async function VA(){return Hh??(Hh=(async()=>{var n;const s=document.createElement("canvas").getContext("webgl");if(!s)return _e.UNPACK;const t=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!t)return _e.UNPACK;const e=s.createTexture();s.bindTexture(s.TEXTURE_2D,e);const i=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,i),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e,0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t);const r=new Uint8Array(4);return s.readPixels(0,0,1,1,s.RGBA,s.UNSIGNED_BYTE,r),s.deleteFramebuffer(i),s.deleteTexture(e),(n=s.getExtension("WEBGL_lose_context"))==null||n.loseContext(),r[0]<=r[3]?_e.PMA:_e.UNPACK})()),Hh}let Xh;function WA(){return typeof Xh>"u"&&(Xh=function(){var t;const s={stencil:!0,failIfMajorPerformanceCaveat:Q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Q.ADAPTER.getWebGLRenderingContext())return!1;const e=Q.ADAPTER.createCanvas();let i=e.getContext("webgl",s)||e.getContext("experimental-webgl",s);const r=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch{return!1}}()),Xh}var zA={grad:.9,turn:360,rad:360/(2*Math.PI)},Es=function(s){return typeof s=="string"?s.length>0:typeof s=="number"},se=function(s,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*s)/e+0},De=function(s,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),s>e?e:s>t?s:t},Jg=function(s){return(s=isFinite(s)?s%360:0)>0?s:s+360},Hf=function(s){return{r:De(s.r,0,255),g:De(s.g,0,255),b:De(s.b,0,255),a:De(s.a)}},Vh=function(s){return{r:se(s.r),g:se(s.g),b:se(s.b),a:se(s.a,3)}},jA=/^#([0-9a-f]{3,8})$/i,mo=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},Qg=function(s){var t=s.r,e=s.g,i=s.b,r=s.a,n=Math.max(t,e,i),o=n-Math.min(t,e,i),a=o?n===t?(e-i)/o:n===e?2+(i-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:r}},t_=function(s){var t=s.h,e=s.s,i=s.v,r=s.a;t=t/360*6,e/=100,i/=100;var n=Math.floor(t),o=i*(1-e),a=i*(1-(t-n)*e),h=i*(1-(1-t+n)*e),l=n%6;return{r:255*[i,a,o,o,h,i][l],g:255*[h,i,i,a,o,o][l],b:255*[o,o,h,i,i,a][l],a:r}},Xf=function(s){return{h:Jg(s.h),s:De(s.s,0,100),l:De(s.l,0,100),a:De(s.a)}},Vf=function(s){return{h:se(s.h),s:se(s.s),l:se(s.l),a:se(s.a,3)}},Wf=function(s){return t_((e=(t=s).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},In=function(s){return{h:(t=Qg(s)).h,s:(r=(200-(e=t.s))*(i=t.v)/100)>0&&r<200?e*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,e,i,r},YA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KA=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ZA=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sc={string:[[function(s){var t=jA.exec(s);return t?(s=t[1]).length<=4?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?se(parseInt(s[3]+s[3],16)/255,2):1}:s.length===6||s.length===8?{r:parseInt(s.substr(0,2),16),g:parseInt(s.substr(2,2),16),b:parseInt(s.substr(4,2),16),a:s.length===8?se(parseInt(s.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(s){var t=KA.exec(s)||ZA.exec(s);return t?t[2]!==t[4]||t[4]!==t[6]?null:Hf({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(s){var t=YA.exec(s)||qA.exec(s);if(!t)return null;var e,i,r=Xf({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(zA[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Wf(r)},"hsl"]],object:[[function(s){var t=s.r,e=s.g,i=s.b,r=s.a,n=r===void 0?1:r;return Es(t)&&Es(e)&&Es(i)?Hf({r:Number(t),g:Number(e),b:Number(i),a:Number(n)}):null},"rgb"],[function(s){var t=s.h,e=s.s,i=s.l,r=s.a,n=r===void 0?1:r;if(!Es(t)||!Es(e)||!Es(i))return null;var o=Xf({h:Number(t),s:Number(e),l:Number(i),a:Number(n)});return Wf(o)},"hsl"],[function(s){var t=s.h,e=s.s,i=s.v,r=s.a,n=r===void 0?1:r;if(!Es(t)||!Es(e)||!Es(i))return null;var o=function(a){return{h:Jg(a.h),s:De(a.s,0,100),v:De(a.v,0,100),a:De(a.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(n)});return t_(o)},"hsv"]]},zf=function(s,t){for(var e=0;e<t.length;e++){var i=t[e][0](s);if(i)return[i,t[e][1]]}return[null,void 0]},JA=function(s){return typeof s=="string"?zf(s.trim(),sc.string):typeof s=="object"&&s!==null?zf(s,sc.object):[null,void 0]},Wh=function(s,t){var e=In(s);return{h:e.h,s:De(e.s+100*t,0,100),l:e.l,a:e.a}},zh=function(s){return(299*s.r+587*s.g+114*s.b)/1e3/255},jf=function(s,t){var e=In(s);return{h:e.h,s:e.s,l:De(e.l+100*t,0,100),a:e.a}},ic=function(){function s(t){this.parsed=JA(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return s.prototype.isValid=function(){return this.parsed!==null},s.prototype.brightness=function(){return se(zh(this.rgba),2)},s.prototype.isDark=function(){return zh(this.rgba)<.5},s.prototype.isLight=function(){return zh(this.rgba)>=.5},s.prototype.toHex=function(){return t=Vh(this.rgba),e=t.r,i=t.g,r=t.b,o=(n=t.a)<1?mo(se(255*n)):"","#"+mo(e)+mo(i)+mo(r)+o;var t,e,i,r,n,o},s.prototype.toRgb=function(){return Vh(this.rgba)},s.prototype.toRgbString=function(){return t=Vh(this.rgba),e=t.r,i=t.g,r=t.b,(n=t.a)<1?"rgba("+e+", "+i+", "+r+", "+n+")":"rgb("+e+", "+i+", "+r+")";var t,e,i,r,n},s.prototype.toHsl=function(){return Vf(In(this.rgba))},s.prototype.toHslString=function(){return t=Vf(In(this.rgba)),e=t.h,i=t.s,r=t.l,(n=t.a)<1?"hsla("+e+", "+i+"%, "+r+"%, "+n+")":"hsl("+e+", "+i+"%, "+r+"%)";var t,e,i,r,n},s.prototype.toHsv=function(){return t=Qg(this.rgba),{h:se(t.h),s:se(t.s),v:se(t.v),a:se(t.a,3)};var t},s.prototype.invert=function(){return Xe({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},s.prototype.saturate=function(t){return t===void 0&&(t=.1),Xe(Wh(this.rgba,t))},s.prototype.desaturate=function(t){return t===void 0&&(t=.1),Xe(Wh(this.rgba,-t))},s.prototype.grayscale=function(){return Xe(Wh(this.rgba,-1))},s.prototype.lighten=function(t){return t===void 0&&(t=.1),Xe(jf(this.rgba,t))},s.prototype.darken=function(t){return t===void 0&&(t=.1),Xe(jf(this.rgba,-t))},s.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},s.prototype.alpha=function(t){return typeof t=="number"?Xe({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):se(this.rgba.a,3);var e},s.prototype.hue=function(t){var e=In(this.rgba);return typeof t=="number"?Xe({h:t,s:e.s,l:e.l,a:e.a}):se(e.h)},s.prototype.isEqual=function(t){return this.toHex()===Xe(t).toHex()},s}(),Xe=function(s){return s instanceof ic?s:new ic(s)},Yf=[],e_=function(s){s.forEach(function(t){Yf.indexOf(t)<0&&(t(ic,sc),Yf.push(t))})};function s_(s,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in e)i[e[r]]=r;var n={};s.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,h,l=i[this.toHex()];if(l)return l;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,d="black";if(!n.length)for(var f in e)n[f]=new s(e[f]).toRgb();for(var p in e){var m=(a=c,h=n[p],Math.pow(a.r-h.r,2)+Math.pow(a.g-h.g,2)+Math.pow(a.b-h.b,2));m<u&&(u=m,d=p)}return d}},t.string.push([function(o){var a=o.toLowerCase(),h=a==="transparent"?"#0000":e[a];return h?new s(h).toRgb():null},"name"])}e_([s_]);const sr=class Ko{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Ko)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((r,n)=>r===e[n]);if(t!==null&&e!==null){const r=Object.keys(t),n=Object.keys(e);return r.length!==n.length?!1:r.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,i,r]=this._components;return{r:t,g:e,b:i,a:r}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,r]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(r*255),t}toRgbArray(t){t=t??[];const[e,i,r]=this._components;return t[0]=e,t[1]=i,t[2]=r,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,r,n]=Ko.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=r,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,n=this._int&255;return e&&(i=i*t+.5|0,r=r*t+.5|0,n=n*t+.5|0),(t*255<<24)+(i<<16)+(r<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,i,r]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(r*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,i,r,n]=this._components;return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}normalize(t){let e,i,r,n;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,r=(o&255)/255,n=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,r,n=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,r,n=255]=t,e/=255,i/=255,r/=255,n/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=Ko.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=Xe(t);o.isValid()&&({r:e,g:i,b:r,a:n}=o.rgba,e/=255,i/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=r,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((r,n)=>{t[n]=Math.min(Math.max(r,e),i)}),t)}};sr.shared=new sr,sr.temp=new sr,sr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ft=sr;function QA(s){return yt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ft.shared.setValue(s).toHex()}function tT(s){return yt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Ft.shared.setValue(s).toNumber()}function eT(){const s=[],t=[];for(let i=0;i<32;i++)s[i]=i,t[i]=i;s[ht.NORMAL_NPM]=ht.NORMAL,s[ht.ADD_NPM]=ht.ADD,s[ht.SCREEN_NPM]=ht.SCREEN,t[ht.NORMAL]=ht.NORMAL_NPM,t[ht.ADD]=ht.ADD_NPM,t[ht.SCREEN]=ht.SCREEN_NPM;const e=[];return e.push(t),e.push(s),e}const i_=eT();function r_(s,t){return i_[t?1:0][s]}function sT(s,t=null){const e=s*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,r=0;i<e;i+=6,r+=4)t[i+0]=r+0,t[i+1]=r+1,t[i+2]=r+2,t[i+3]=r+0,t[i+4]=r+2,t[i+5]=r+3;return t}function n_(s){if(s.BYTES_PER_ELEMENT===4)return s instanceof Float32Array?"Float32Array":s instanceof Uint32Array?"Uint32Array":"Int32Array";if(s.BYTES_PER_ELEMENT===2){if(s instanceof Uint16Array)return"Uint16Array"}else if(s.BYTES_PER_ELEMENT===1&&s instanceof Uint8Array)return"Uint8Array";return null}function va(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function qf(s){return!(s&s-1)&&!!s}function Kf(s){let t=(s>65535?1:0)<<4;s>>>=t;let e=(s>255?1:0)<<3;return s>>>=e,t|=e,e=(s>15?1:0)<<2,s>>>=e,t|=e,e=(s>3?1:0)<<1,s>>>=e,t|=e,t|s>>1}function br(s,t,e){const i=s.length;let r;if(t>=i||e===0)return;e=t+e>i?i-t:e;const n=i-e;for(r=t;r<n;++r)s[r]=s[r+e];s.length=n}function Ks(s){return s===0?0:s<0?-1:1}let iT=0;function Hi(){return++iT}const rc=class{constructor(s,t,e,i){this.left=s,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};rc.EMPTY=new rc(0,0,0,0);let Zf=rc;const Jf={},ss=Object.create(null),ks=Object.create(null);class rT{constructor(t,e,i){this._canvas=Q.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||Q.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Qf(s,t,e){for(let i=0,r=4*e*t;i<t;++i,r+=4)if(s[r+3]!==0)return!1;return!0}function tp(s,t,e,i,r){const n=4*t;for(let o=i,a=i*n+4*e;o<=r;++o,a+=n)if(s[a+3]!==0)return!1;return!0}function nT(s){const{width:t,height:e}=s,i=s.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const r=i.getImageData(0,0,t,e).data;let n=0,o=0,a=t-1,h=e-1;for(;o<e&&Qf(r,t,o);)++o;if(o===e)return Zf.EMPTY;for(;Qf(r,t,h);)--h;for(;tp(r,t,n,o,h);)++n;for(;tp(r,t,a,o,h);)--a;return++a,++h,new Zf(n,o,a,h)}function oT(s){const t=nT(s),{width:e,height:i}=t;let r=null;if(!t.isEmpty()){const n=s.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");r=n.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:r}}function aT(s,t=globalThis.location){if(s.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(s,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function Ms(s,t=1){var i;const e=(i=Q.RETINA_PREFIX)==null?void 0:i.exec(s);return e?parseFloat(e[1]):t}var q=(s=>(s.Renderer="renderer",s.Application="application",s.RendererSystem="renderer-webgl-system",s.RendererPlugin="renderer-webgl-plugin",s.CanvasRendererSystem="renderer-canvas-system",s.CanvasRendererPlugin="renderer-canvas-plugin",s.Asset="asset",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser",s))(q||{});const nc=s=>{if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");s={...typeof s.extension!="object"?{type:s.extension}:s.extension,ref:s}}if(typeof s=="object")s={...s};else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},ep=(s,t)=>nc(s).priority??t,et={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...s){return s.map(nc).forEach(t=>{t.type.forEach(e=>{var i,r;return(r=(i=this._removeHandlers)[e])==null?void 0:r.call(i,t)})}),this},add(...s){return s.map(nc).forEach(t=>{t.type.forEach(e=>{var n,o;const i=this._addHandlers,r=this._queue;i[e]?(n=i[e])==null||n.call(i,t):(r[e]=r[e]||[],(o=r[e])==null||o.push(t))})}),this},handle(s,t,e){var o;const i=this._addHandlers,r=this._removeHandlers;if(i[s]||r[s])throw new Error(`Extension type ${s} already has a handler`);i[s]=t,r[s]=e;const n=this._queue;return n[s]&&((o=n[s])==null||o.forEach(a=>t(a)),delete n[s]),this},handleByMap(s,t){return this.handle(s,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(s,t,e=-1){return this.handle(s,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((r,n)=>ep(n,e)-ep(r,e)))},i=>{const r=t.indexOf(i.ref);r!==-1&&t.splice(r,1)})}};class oc{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const hT=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function lT(s){let t="";for(let e=0;e<s;++e)e>0&&(t+=`
else `),e<s-1&&(t+=`if(test == ${e}.0){}`);return t}function cT(s,t){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=hT.replace(/%forloop%/gi,lT(s));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))s=s/2|0;else break}return s}const jh=0,Yh=1,qh=2,Kh=3,Zh=4,Jh=5;class vs{constructor(){this.data=0,this.blendMode=ht.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<jh)}set blend(t){!!(this.data&1<<jh)!==t&&(this.data^=1<<jh)}get offsets(){return!!(this.data&1<<Yh)}set offsets(t){!!(this.data&1<<Yh)!==t&&(this.data^=1<<Yh)}get culling(){return!!(this.data&1<<qh)}set culling(t){!!(this.data&1<<qh)!==t&&(this.data^=1<<qh)}get depthTest(){return!!(this.data&1<<Kh)}set depthTest(t){!!(this.data&1<<Kh)!==t&&(this.data^=1<<Kh)}get depthMask(){return!!(this.data&1<<Jh)}set depthMask(t){!!(this.data&1<<Jh)!==t&&(this.data^=1<<Jh)}get clockwiseFrontFace(){return!!(this.data&1<<Zh)}set clockwiseFrontFace(t){!!(this.data&1<<Zh)!==t&&(this.data^=1<<Zh)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ht.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new vs;return t.depthTest=!1,t.blend=!0,t}}vs.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const ac=[];function o_(s,t){if(!s)return null;let e="";if(typeof s=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(s);i&&(e=i[1].toLowerCase())}for(let i=ac.length-1;i>=0;--i){const r=ac[i];if(r.test&&r.test(s,e))return new r(s,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ye{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,r,n,o,a,h){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:c}=this;this._aliasCount++;for(let u=0,d=c.length;u<d;u++)c[u][l](t,e,i,r,n,o,a,h);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ye.prototype,{dispatch:{value:Ye.prototype.emit},run:{value:Ye.prototype.emit}});class Gn{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ye("setRealSize"),this.onUpdate=new Ye("update"),this.onError=new Ye("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class sh extends Gn{constructor(t,e){const{width:i,height:r}=e||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,i){const r=t.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,this.unpackAlignment),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===_e.UNPACK);const n=e.realWidth,o=e.realHeight;return i.width===n&&i.height===o?r.texSubImage2D(e.target,0,0,0,n,o,e.format,i.type,this.data):(i.width=n,i.height=o,r.texImage2D(e.target,0,i.internalFormat,n,o,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const uT={scaleMode:As.NEAREST,alphaMode:_e.NPM},hc=class ir extends qn{constructor(t=null,e=null){super(),e=Object.assign({},ir.defaultOptions,e);const{alphaMode:i,mipmap:r,anisotropicLevel:n,scaleMode:o,width:a,height:h,wrapMode:l,format:c,type:u,target:d,resolution:f,resourceOptions:p}=e;t&&!(t instanceof Gn)&&(t=o_(t,p),t.internal=!0),this.resolution=f||Q.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((h||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=n,this._wrapMode=l,this._scaleMode=o,this.format=c,this.type=u,this.target=d,this.alphaMode=i,this.uid=Hi(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&h>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=qf(this.realWidth)&&qf(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ks[this.cacheId],delete ss[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),ir.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=Q.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let n=null;if(r)n=t;else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Hi()}`}n=t._pixiId}let o=ks[n];if(r&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return o||(o=new ir(t,e),o.cacheId=n,ir.addToCache(o,n)),o}static fromBuffer(t,e,i,r){t=t||new Float32Array(e*i*4);const n=new sh(t,{width:e,height:i,...r==null?void 0:r.resourceOptions});let o,a;return t instanceof Float32Array?(o=D.RGBA,a=it.FLOAT):t instanceof Int32Array?(o=D.RGBA_INTEGER,a=it.INT):t instanceof Uint32Array?(o=D.RGBA_INTEGER,a=it.UNSIGNED_INT):t instanceof Int16Array?(o=D.RGBA_INTEGER,a=it.SHORT):t instanceof Uint16Array?(o=D.RGBA_INTEGER,a=it.UNSIGNED_SHORT):t instanceof Int8Array?(o=D.RGBA,a=it.BYTE):(o=D.RGBA,a=it.UNSIGNED_BYTE),n.internal=!0,new ir(n,Object.assign({},uT,{type:a,format:o},r))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),ks[e]&&ks[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),ks[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=ks[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete ks[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete ks[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};hc.defaultOptions={mipmap:ys.POW2,anisotropicLevel:0,scaleMode:As.LINEAR,wrapMode:Rs.CLAMP,alphaMode:_e.UNPACK,target:yr.TEXTURE_2D,format:D.RGBA,type:it.UNSIGNED_BYTE},hc._globalBatch=0;let pt=hc;class lc{constructor(){this.texArray=null,this.blend=0,this.type=us.TRIANGLES,this.start=0,this.size=0,this.data=null}}let dT=0;class Xt{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=dT++,this.disposeRunner=new Ye("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?ps.ELEMENT_ARRAY_BUFFER:ps.ARRAY_BUFFER}get index(){return this.type===ps.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Xt(t)}}class ba{constructor(t,e=0,i=!1,r=it.FLOAT,n,o,a,h=1){this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=n,this.start=o,this.instance=a,this.divisor=h}destroy(){this.buffer=null}static from(t,e,i,r,n){return new ba(t,e,i,r,n)}}const fT={Float32Array,Uint32Array,Int32Array,Uint8Array};function pT(s,t){let e=0,i=0;const r={};for(let h=0;h<s.length;h++)i+=t[h],e+=s[h].length;const n=new ArrayBuffer(e*4);let o=null,a=0;for(let h=0;h<s.length;h++){const l=t[h],c=s[h],u=n_(c);r[u]||(r[u]=new fT[u](n)),o=r[u];for(let d=0;d<c.length;d++){const f=(d/l|0)*i+a,p=d%l;o[f+p]=c[d]}a+=l}return new Float32Array(n)}const sp={5126:4,5123:2,5121:1};let mT=0;const gT={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ni{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=mT++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ye("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,r=!1,n,o,a,h=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Xt||(e instanceof Array&&(e=new Float32Array(e)),e=new Xt(e));const l=t.split("|");if(l.length>1){for(let u=0;u<l.length;u++)this.addAttribute(l[u],e,i,r,n);return this}let c=this.buffers.indexOf(e);return c===-1&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new ba(c,i,r,n,o,a,h),this.instanced=this.instanced||h,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Xt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Xt(t)),t.type=ps.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new Xt;let r;for(r in this.attributes){const n=this.attributes[r],o=this.buffers[n.buffer];t.push(o.data),e.push(n.size*sp[n.type]/4),n.buffer=0}for(i.data=pT(t,e),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new ni;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new Xt(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new ba(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=ps.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new ni,i=[],r=[],n=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let h=0;h<o.buffers.length;h++)r[h]=r[h]||0,r[h]+=o.buffers[h].data.length,n[h]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new gT[n_(o.buffers[a].data)](r[a]),e.buffers[a]=new Xt(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let h=0;h<o.buffers.length;h++)i[h].set(o.buffers[h].data,n[h]),n[h]+=o.buffers[h].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=ps.ELEMENT_ARRAY_BUFFER;let a=0,h=0,l=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===c&&(h+=d.size*sp[d.type]/4)}for(let u=0;u<t.length;u++){const d=t[u].indexBuffer.data;for(let f=0;f<d.length;f++)e.indexBuffer.data[f+l]+=a;a+=t[u].buffers[c].data.length/h,l+=d.length}}return e}}class a_ extends ni{constructor(t=!1){super(),this._buffer=new Xt(null,t,!1),this._indexBuffer=new Xt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,it.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,it.FLOAT).addAttribute("aColor",this._buffer,4,!0,it.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,it.FLOAT).addIndex(this._indexBuffer)}}const wa=Math.PI*2,_T=180/Math.PI,yT=Math.PI/180;var le=(s=>(s[s.POLY=0]="POLY",s[s.RECT=1]="RECT",s[s.CIRC=2]="CIRC",s[s.ELIP=3]="ELIP",s[s.RREC=4]="RREC",s))(le||{});let Rt=class h_{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new h_(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}};Rt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const go=[new Rt,new Rt,new Rt,new Rt];let gt=class cc{constructor(t=0,e=0,i=0,r=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=le.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new cc(0,0,0,0)}clone(){return new cc(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const S=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=S)return!1;const B=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>B}const i=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=i||o<=n)return!1;const a=go[0].set(t.left,t.top),h=go[1].set(t.left,t.bottom),l=go[2].set(t.right,t.top),c=go[3].set(t.right,t.bottom);if(l.x<=a.x||h.y<=a.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(a,a),e.apply(h,h),e.apply(l,l),e.apply(c,c),Math.max(a.x,h.x,l.x,c.x)<=i||Math.min(a.x,h.x,l.x,c.x)>=r||Math.max(a.y,h.y,l.y,c.y)<=n||Math.min(a.y,h.y,l.y,c.y)>=o))return!1;const d=u*(h.y-a.y),f=u*(a.x-h.x),p=d*i+f*n,m=d*r+f*n,g=d*i+f*o,y=d*r+f*o;if(Math.max(p,m,g,y)<=d*a.x+f*a.y||Math.min(p,m,g,y)>=d*c.x+f*c.y)return!1;const v=u*(a.y-l.y),_=u*(l.x-a.x),w=v*i+_*n,A=v*r+_*n,R=v*i+_*o,P=v*r+_*o;return!(Math.max(w,A,R,P)<=v*a.x+_*a.y||Math.min(w,A,R,P)>=v*c.x+_*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this}};gt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ih{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=le.CIRC}clone(){return new ih(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-t,n=this.y-e;return r*=r,n*=n,r+n<=i}getBounds(){return new gt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}ih.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class rh{constructor(t=0,e=0,i=0,r=0){this.x=t,this.y=e,this.width=i,this.height=r,this.type=le.ELIP}clone(){return new rh(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,r=(e-this.y)/this.height;return i*=i,r*=r,i+r<=1}getBounds(){return new gt(this.x-this.width,this.y-this.height,this.width,this.height)}}rh.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ni{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let r=0,n=e.length;r<n;r++)i.push(e[r].x,e[r].y);e=i}this.points=e,this.type=le.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Ni(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const r=this.points.length/2;for(let n=0,o=r-1;n<r;o=n++){const a=this.points[n*2],h=this.points[n*2+1],l=this.points[o*2],c=this.points[o*2+1];h>e!=c>e&&t<(l-a)*((e-h)/(c-h))+a&&(i=!i)}return i}}Ni.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((s,t)=>`${s}, ${t}`,"")}]`};class nh{constructor(t=0,e=0,i=0,r=0,n=20){this.x=t,this.y=e,this.width=i,this.height=r,this.radius=n,this.type=le.RREC}clone(){return new nh(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),n=e-(this.y+i);const o=i*i;if(r*r+n*n<=o||(r=t-(this.x+this.width-i),r*r+n*n<=o)||(n=e-(this.y+this.height-i),r*r+n*n<=o)||(r=t-(this.x+i),r*r+n*n<=o))return!0}return!1}}nh.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};let zt=class Zo{constructor(t=1,e=0,i=0,r=1,n=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Rt;const i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e}applyInverse(t,e){e=e||new Rt;const i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}setTransform(t,e,i,r,n,o,a,h,l){return this.a=Math.cos(a+l)*n,this.b=Math.sin(a+l)*n,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,r=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-r,n),h=Math.atan2(i,e),l=Math.abs(a+h);return l<1e-5||Math.abs(wa-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*n),t}invert(){const t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Zo;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new Zo}static get TEMP_MATRIX(){return new Zo}};zt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const yi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],xi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],bi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],uc=[],l_=[],_o=Math.sign;function xT(){for(let s=0;s<16;s++){const t=[];uc.push(t);for(let e=0;e<16;e++){const i=_o(yi[s]*yi[e]+vi[s]*xi[e]),r=_o(xi[s]*yi[e]+bi[s]*xi[e]),n=_o(yi[s]*vi[e]+vi[s]*bi[e]),o=_o(xi[s]*vi[e]+bi[s]*bi[e]);for(let a=0;a<16;a++)if(yi[a]===i&&xi[a]===r&&vi[a]===n&&bi[a]===o){t.push(a);break}}}for(let s=0;s<16;s++){const t=new zt;t.set(yi[s],xi[s],vi[s],bi[s],0,0),l_.push(t)}}xT();const Ut={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:s=>yi[s],uY:s=>xi[s],vX:s=>vi[s],vY:s=>bi[s],inv:s=>s&8?s&15:-s&7,add:(s,t)=>uc[s][t],sub:(s,t)=>uc[s][Ut.inv(t)],rotate180:s=>s^4,isVertical:s=>(s&3)===2,byDirection:(s,t)=>Math.abs(s)*2<=Math.abs(t)?t>=0?Ut.S:Ut.N:Math.abs(t)*2<=Math.abs(s)?s>0?Ut.E:Ut.W:t>0?s>0?Ut.SE:Ut.SW:s>0?Ut.NE:Ut.NW,matrixAppendRotationInv:(s,t,e=0,i=0)=>{const r=l_[Ut.inv(t)];r.tx=e,r.ty=i,s.append(r)}};let Bi=class c_{constructor(t,e,i=0,r=0){this._x=i,this._y=r,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new c_(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}};Bi.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const dc=class{constructor(){this.worldTransform=new zt,this.localTransform=new zt,this.position=new Bi(this.onChange,this,0,0),this.scale=new Bi(this.onChange,this,1,1),this.pivot=new Bi(this.onChange,this,0,0),this.skew=new Bi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const s=this.localTransform;this._localID!==this._currentLocalID&&(s.a=this._cx*this.scale.x,s.b=this._sx*this.scale.x,s.c=this._cy*this.scale.y,s.d=this._sy*this.scale.y,s.tx=this.position.x-(this.pivot.x*s.a+this.pivot.y*s.c),s.ty=this.position.y-(this.pivot.x*s.b+this.pivot.y*s.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(s){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==s._worldID){const e=s.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=s._worldID,this._worldID++}}setFromMatrix(s){s.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(s){this._rotation!==s&&(this._rotation=s,this.updateSkew())}};dc.IDENTITY=new dc;let oh=dc;oh.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var vT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,bT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function ip(s,t,e){const i=s.createShader(t);return s.shaderSource(i,e),s.compileShader(i),i}function Qh(s){const t=new Array(s);for(let e=0;e<t.length;e++)t[e]=!1;return t}function u_(s,t){switch(s){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Qh(2*t);case"bvec3":return Qh(3*t);case"bvec4":return Qh(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const wr=[{test:s=>s.type==="float"&&s.size===1&&!s.isArray,code:s=>`
            if(uv["${s}"] !== ud["${s}"].value)
            {
                ud["${s}"].value = uv["${s}"]
                gl.uniform1f(ud["${s}"].location, uv["${s}"])
            }
            `},{test:(s,t)=>(s.type==="sampler2D"||s.type==="samplerCube"||s.type==="sampler2DArray")&&s.size===1&&!s.isArray&&(t==null||t.castToBaseTexture!==void 0),code:s=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${s}"], t);

            if(ud["${s}"].value !== t)
            {
                ud["${s}"].value = t;
                gl.uniform1i(ud["${s}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(s,t)=>s.type==="mat3"&&s.size===1&&!s.isArray&&t.a!==void 0,code:s=>`
            gl.uniformMatrix3fv(ud["${s}"].location, false, uv["${s}"].toArray(true));
            `,codeUbo:s=>`
                var ${s}_matrix = uv.${s}.toArray(true);

                data[offset] = ${s}_matrix[0];
                data[offset+1] = ${s}_matrix[1];
                data[offset+2] = ${s}_matrix[2];
        
                data[offset + 4] = ${s}_matrix[3];
                data[offset + 5] = ${s}_matrix[4];
                data[offset + 6] = ${s}_matrix[5];
        
                data[offset + 8] = ${s}_matrix[6];
                data[offset + 9] = ${s}_matrix[7];
                data[offset + 10] = ${s}_matrix[8];
            `},{test:(s,t)=>s.type==="vec2"&&s.size===1&&!s.isArray&&t.x!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${s}"].location, v.x, v.y);
                }`,codeUbo:s=>`
                v = uv.${s};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:s=>s.type==="vec2"&&s.size===1&&!s.isArray,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${s}"].location, v[0], v[1]);
                }
            `},{test:(s,t)=>s.type==="vec4"&&s.size===1&&!s.isArray&&t.width!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${s}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(s,t)=>s.type==="vec4"&&s.size===1&&!s.isArray&&t.red!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${s}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(s,t)=>s.type==="vec3"&&s.size===1&&!s.isArray&&t.red!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${s}"].location, v.red, v.green, v.blue)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:s=>s.type==="vec4"&&s.size===1&&!s.isArray,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${s}"].location, v[0], v[1], v[2], v[3])
                }`}],wT={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},ET={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function AT(s,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in s.uniforms){const n=t[r];if(!n){((i=s.uniforms[r])==null?void 0:i.group)===!0&&(s.uniforms[r].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const o=s.uniforms[r];let a=!1;for(let h=0;h<wr.length;h++)if(wr[h].test(n,o)){e.push(wr[h].code(r,o)),a=!0;break}if(!a){const h=(n.size===1&&!n.isArray?wT:ET)[n.type].replace("location",`ud["${r}"].location`);e.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const d_={};let Ji=d_;function TT(){if(Ji===d_||Ji!=null&&Ji.isContextLost()){const s=Q.ADAPTER.createCanvas();let t;Q.PREFER_ENV>=Wi.WEBGL2&&(t=s.getContext("webgl2",{})),t||(t=s.getContext("webgl",{})||s.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Ji=t}return Ji}let yo;function ST(){if(!yo){yo=Oe.MEDIUM;const s=TT();if(s&&s.getShaderPrecisionFormat){const t=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);t&&(yo=t.precision?Oe.HIGH:Oe.MEDIUM)}}return yo}function rp(s,t){const e=s.getShaderSource(t).split(`
`).map((l,c)=>`${c}: ${l}`),i=s.getShaderInfoLog(t),r=i.split(`
`),n={},o=r.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!n[l]?(n[l]=!0,!0):!1),a=[""];o.forEach(l=>{e[l-1]=`%c${e[l-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=e.join(`
`);a[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function CT(s,t,e,i){s.getProgramParameter(t,s.LINK_STATUS)||(s.getShaderParameter(e,s.COMPILE_STATUS)||rp(s,e),s.getShaderParameter(i,s.COMPILE_STATUS)||rp(s,i),console.error("PixiJS Error: Could not initialize shader."),s.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",s.getProgramInfoLog(t)))}const RT={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function f_(s){return RT[s]}let xo=null;const np={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function p_(s,t){if(!xo){const e=Object.keys(np);xo={};for(let i=0;i<e.length;++i){const r=e[i];xo[s[r]]=np[r]}}return xo[t]}function op(s,t,e){if(s.substring(0,9)!=="precision"){let i=t;return t===Oe.HIGH&&e!==Oe.HIGH&&(i=Oe.MEDIUM),`precision ${i} float;
${s}`}else if(e!==Oe.HIGH&&s.substring(0,15)==="precision highp")return s.replace("precision highp","precision mediump");return s}let Zr;function IT(){if(typeof Zr=="boolean")return Zr;try{Zr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Zr=!1}return Zr}let PT=0;const vo={},fc=class rr{constructor(t,e,i="pixi-shader",r={}){this.extra={},this.id=PT++,this.vertexSrc=t||rr.defaultVertexSrc,this.fragmentSrc=e||rr.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),vo[i]?(vo[i]++,i+=`-${vo[i]}`):vo[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=op(this.vertexSrc,rr.defaultVertexPrecision,Oe.HIGH),this.fragmentSrc=op(this.fragmentSrc,rr.defaultFragmentPrecision,ST())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return bT}static get defaultFragmentSrc(){return vT}static from(t,e,i){const r=t+e;let n=Jf[r];return n||(Jf[r]=n=new rr(t,e,i)),n}};fc.defaultVertexPrecision=Oe.HIGH,fc.defaultFragmentPrecision=Ts.apple.device?Oe.HIGH:Oe.MEDIUM;let Ss=fc,MT=0;class qe{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=MT++,this.static=!!e,this.ubo=!!i,t instanceof Xt?(this.buffer=t,this.buffer.type=ps.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Xt(new Float32Array(1)),this.buffer.type=ps.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new qe(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new qe(t,e,i)}static uboFrom(t,e){return new qe(t,e??!0,!0)}}class ms{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof qe?this.uniformGroup=e:this.uniformGroup=new qe(e):this.uniformGroup=new qe({}),this.disposeRunner=new Ye("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const r=e.uniforms[i];if(r.group===!0&&this.checkUniformExists(t,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const r=Ss.from(t,e);return new ms(r,i)}}class BT{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;this.defaultGroupCache[t]=qe.from({uSamplers:i},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ss(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new zt,default:this.defaultGroupCache[t]};return new ms(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class pc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function FT(){return!Ts.apple.device}function OT(s){let t=!0;const e=Q.ADAPTER.getNavigator();if(Ts.tablet||Ts.phone){if(Ts.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(Ts.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?s:4}class ah{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var DT=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,LT=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const nn=class $e extends ah{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=a_,this.vertexSize=6,this.state=vs.for2d(),this.size=$e.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??OT(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??FT(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return yt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return LT}static get defaultFragmentTemplate(){return DT}setShaderGenerator({vertex:t=$e.defaultVertexSrc,fragment:e=$e.defaultFragmentTemplate}={}){this.shaderGenerator=new BT(t,e)}contextChange(){const t=this.renderer.gl;Q.PREFER_ENV===Wi.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),$e.defaultMaxTextures),this.maxTextures=cT(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=$e,i=this.size/4,r=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new lc);for(;e.length<r;)e.push(new pc);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,i=$e._textureArrayPool,r=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++pt._globalBatch,h=0,l=i[0],c=0;r.copyBoundTextures(n,e);for(let u=0;u<this._bufferSize;++u){const d=t[u];t[u]=null,d._batchEnabled!==a&&(l.count>=e&&(r.boundArray(l,n,a,e),this.buildDrawCalls(l,c,u),c=u,l=i[++h],++a),d._batchEnabled=a,d.touched=o,l.elements[l.count++]=d)}l.count>0&&(r.boundArray(l,n,a,e),this.buildDrawCalls(l,c,this._bufferSize),++h,++a);for(let u=0;u<n.length;u++)n[u]=null;pt._globalBatch=a}buildDrawCalls(t,e,i){const{_bufferedElements:r,_attributeBuffer:n,_indexBuffer:o,vertexSize:a}=this,h=$e._drawCallPool;let l=this._dcIndex,c=this._aIndex,u=this._iIndex,d=h[l];d.start=this._iIndex,d.texArray=t;for(let f=e;f<i;++f){const p=r[f],m=p._texture.baseTexture,g=i_[m.alphaMode?1:0][p.blendMode];r[f]=null,e<f&&d.blend!==g&&(d.size=u-d.start,e=f,d=h[++l],d.texArray=t,d.start=u),this.packInterleavedGeometry(p,n,o,c,u),c+=p.vertexData.length/2*a,u+=p.indices.length,d.blend=g}e<i&&(d.size=u-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=u}bindAndClearTexArray(t){const e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;$e.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:i}=this.renderer,r=$e._drawCallPool;let n=null;for(let o=0;o<t;o++){const{texArray:a,type:h,size:l,start:c,blend:u}=r[o];n!==a&&(n=a,this.bindAndClearTexArray(a)),this.state.blendMode=u,i.set(this.state),e.drawElements(h,l,e.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),$e.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=va(Math.ceil(t/8)),i=Kf(e),r=e*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new oc(r*this.vertexSize*4)),n}getIndexBuffer(t){const e=va(Math.ceil(t/12)),i=Kf(e),r=e*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n}packInterleavedGeometry(t,e,i,r,n){const{uint32View:o,float32View:a}=e,h=r/this.vertexSize,l=t.uvs,c=t.indices,u=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=Ft.shared.setValue(t._tintRGB).toPremultiplied(f,t._texture.baseTexture.alphaMode>0);for(let m=0;m<u.length;m+=2)a[r++]=u[m],a[r++]=u[m+1],a[r++]=l[m],a[r++]=l[m+1],o[r++]=p,a[r++]=d;for(let m=0;m<c.length;m++)i[n++]=h+c[m]}};nn.defaultBatchSize=4096,nn.extension={name:"batch",type:q.RendererPlugin},nn._drawCallPool=[],nn._textureArrayPool=[];let wi=nn;et.add(wi);var NT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,kT=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const mc=class on extends ms{constructor(t,e,i){const r=Ss.from(t||on.defaultVertexSrc,e||on.defaultFragmentSrc);super(r,i),this.padding=0,this.resolution=on.defaultResolution,this.multisample=on.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new vs}apply(t,e,i,r,n){t.applyFilter(this,e,i,r)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return kT}static get defaultFragmentSrc(){return NT}};mc.defaultResolution=1,mc.defaultMultisample=jt.NONE;let de=mc;class Ea{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ft(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:i,backgroundAlpha:r}=t,n=i??e;n!==void 0&&(this.color=n),this.alpha=r}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Ea.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Ea.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"background"};et.add(Ea);class m_{constructor(t){this.renderer=t,this.emptyRenderer=new ah(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)}boundArray(t,e,i,r){const{elements:n,ids:o,count:a}=t;let h=0;for(let l=0;l<a;l++){const c=n[l],u=c._batchLocation;if(u>=0&&u<r&&e[u]===c){o[l]=u;continue}for(;h<r;){const d=e[h];if(d&&d._batchEnabled===i&&d._batchLocation===h){h++;continue}o[l]=h,c._batchLocation=h,e[h]=c;break}}}destroy(){this.renderer=null}}m_.extension={type:q.RendererSystem,name:"batch"};et.add(m_);let ap=0;class Aa{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ap++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ap++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(Q.PREFER_ENV>=Wi.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Aa.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Aa.extension={type:q.RendererSystem,name:"context"};et.add(Aa);class gc{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ye("disposeFramebuffer"),this.multisample=jt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new pt(null,{scaleMode:As.NEAREST,resolution:1,mipmap:ys.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new pt(null,{scaleMode:As.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ys.OFF,format:D.DEPTH_COMPONENT,type:it.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class g_ extends pt{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3];t={width:e,height:i,scaleMode:r,resolution:n}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=jt.NONE),super(null,t),this.mipmap=ys.OFF,this.valid=!0,this._clear=new Ft([0,0,0,0]),this.framebuffer=new gc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Bs extends Gn{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,r=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(i,r),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=aT(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,r){const n=t.gl,o=e.realWidth,a=e.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||r.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===_e.UNPACK),!this.noSubImage&&e.target===n.TEXTURE_2D&&i.width===o&&i.height===a?n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,i.type,r):(i.width=o,i.height=a,n.texImage2D(e.target,0,i.internalFormat,e.format,i.type,r)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}class __ extends Bs{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;Bs.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??Q.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(r=>r.blob()).then(r=>e(r,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===_e.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let r=!0;const n=e._glTextures;for(const o in n){const a=n[o];if(a!==i&&a.dirtyId!==e.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Du{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const r=e.width,n=e.height;if(i){const o=t.width/2/r,a=t.height/2/n,h=t.x/r+o,l=t.y/n+a;i=Ut.add(i,Ut.NW),this.x0=h+o*Ut.uX(i),this.y0=l+a*Ut.uY(i),i=Ut.add(i,2),this.x1=h+o*Ut.uX(i),this.y1=l+a*Ut.uY(i),i=Ut.add(i,2),this.x2=h+o*Ut.uX(i),this.y2=l+a*Ut.uY(i),i=Ut.add(i,2),this.x3=h+o*Ut.uX(i),this.y3=l+a*Ut.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Du.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const hp=new Du;function bo(s){s.destroy=function(){},s.on=function(){},s.once=function(){},s.emit=function(){}}let ct=class Bt extends qn{constructor(t,e,i,r,n,o,a){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new gt(0,0,1,1)),t instanceof Bt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=r,this.valid=!1,this.destroyed=!1,this._uvs=hp,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Rt(o.x,o.y):new Rt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&ss[e.url]&&Bt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Bt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var r;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new Bt(this.baseTexture,!this.noFrame&&t,e,(r=this.trim)==null?void 0:r.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===hp&&(this._uvs=new Du),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=Q.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let n=null;if(r)n=t;else if(t instanceof pt){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Hi()}`,pt.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Hi()}`}n=t._pixiId}let o=ss[n];if(r&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!o&&!(t instanceof pt)?(e.resolution||(e.resolution=Ms(t)),o=new Bt(new pt(t,e)),o.baseTexture.cacheId=n,pt.addToCache(o.baseTexture,n),Bt.addToCache(o,n)):!o&&t instanceof pt&&(o=new Bt(t),Bt.addToCache(o,n)),o}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),r=Bt.from(t,Object.assign({resourceOptions:i},e),!1),n=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):n.load().then(()=>Promise.resolve(r))}static fromBuffer(t,e,i,r){return new Bt(pt.fromBuffer(t,e,i,r))}static fromLoader(t,e,i,r){const n=new pt(t,Object.assign({scaleMode:pt.defaultOptions.scaleMode,resolution:Ms(e)},r)),{resource:o}=n;o instanceof __&&(o.url=e);const a=new Bt(n);return i||(i=e),pt.addToCache(a.baseTexture,i),Bt.addToCache(a,i),i!==e&&(pt.addToCache(a.baseTexture,e),Bt.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(h=>{a.baseTexture.once("loaded",()=>h(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),ss[e]&&ss[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),ss[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=ss[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete ss[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)ss[t.textureCacheIds[e]]===t&&delete ss[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:r,height:n}=t,o=e+r>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){const h=o&&a?"and":"or",l=`X: ${e} + ${r} = ${e+r} > ${this.baseTexture.width}`,c=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${l} ${h} ${c}`)}this.valid=r&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Bt._EMPTY||(Bt._EMPTY=new Bt(new pt),bo(Bt._EMPTY),bo(Bt._EMPTY.baseTexture)),Bt._EMPTY}static get WHITE(){if(!Bt._WHITE){const t=Q.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),Bt._WHITE=new Bt(pt.from(t)),bo(Bt._WHITE),bo(Bt._WHITE.baseTexture)}return Bt._WHITE}};class zi extends ct{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const r=this.baseTexture.resolution,n=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new zi(new g_(t))}}class y_{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=jt.NONE){const r=new g_(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new zi(r)}getOptimalTexture(t,e,i=1,r=jt.NONE){let n;t=Math.max(Math.ceil(t*i-1e-6),1),e=Math.max(Math.ceil(e*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=va(t),e=va(e),n=((t&65535)<<16|e&65535)>>>0,r>1&&(n+=r*4294967296)):n=r>1?-r:-1,this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e,r)),o.filterPoolKey=n,o.setResolution(i),o}getFilterTexture(t,e,i){const r=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||jt.NONE);return r.filterFrame=t.filterFrame,r}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}y_.SCREEN_KEY=-1;class UT extends ni{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class x_ extends ni{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Xt(this.vertices),this.uvBuffer=new Xt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class GT{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=jt.NONE,this.sourceFrame=new gt,this.destinationFrame=new gt,this.bindingSourceFrame=new gt,this.bindingDestinationFrame=new gt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const wo=[new Rt,new Rt,new Rt,new Rt],tl=new zt;class v_{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new y_,this.statePool=[],this.quad=new UT,this.quadUv=new x_,this.tempRect=new gt,this.activeState={},this.globalUniforms=new qe({outputFrame:new gt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new GT,o=i.renderTexture;let a,h;if(o.current){const g=o.current;a=g.resolution,h=g.multisample}else a=i.resolution,h=i.multisample;let l=e[0].resolution||a,c=e[0].multisample??h,u=e[0].padding,d=e[0].autoFit,f=e[0].legacy??!0;for(let g=1;g<e.length;g++){const y=e[g];l=Math.min(l,y.resolution||a),c=Math.min(c,y.multisample??h),u=this.useMaxPadding?Math.max(u,y.padding):u+y.padding,d=d&&y.autoFit,f=f||(y.legacy??!0)}r.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(n),n.resolution=l,n.multisample=c,n.legacy=f,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(u);const p=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(tl.copyFrom(i.projection.transform).invert(),p),d?(n.sourceFrame.fit(p),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(p)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,l,c),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=n.sourceFrame.width,m.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(o.sourceFrame),n.bindingDestinationFrame.copyFrom(o.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,o.bind(n.renderTexture,n.sourceFrame,m),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;const n=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*e.resolution),o[1]=Math.round(n[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*n[2]-.5*o[2],a[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){const l=r.filterArea;l[0]=e.destinationFrame.width,l[1]=e.destinationFrame.height,l[2]=e.sourceFrame.x,l[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const h=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,h.renderTexture,hs.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let l=e.renderTexture,c=this.getOptimalFilterTexture(l.width,l.height,e.resolution);c.filterFrame=l.filterFrame;let u=0;for(u=0;u<i.length-1;++u){u===1&&e.multisample>1&&(c=this.getOptimalFilterTexture(l.width,l.height,e.resolution),c.filterFrame=l.filterFrame),i[u].apply(this,l,c,hs.CLEAR,e);const d=l;l=c,c=d}i[u].apply(this,l,h.renderTexture,hs.BLEND,e),u>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=hs.CLEAR){const{renderTexture:i,state:r}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=r.stateId&1||this.forceClear;(e===hs.CLEAR||e===hs.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,r){const n=this.renderer;n.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(us.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(us.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:n}=e._texture,o=t.set(r.width,0,0,r.height,i.x,i.y),a=e.worldTransform.copyTo(zt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,r=jt.NONE){return this.texturePool.getOptimalTexture(t,e,i,r)}getFilterTexture(t,e,i){if(typeof t=="number"){const n=t;t=e,e=n}t=t||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||jt.NONE);return r.filterFrame=t.filterFrame,r}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=wo[0],r=wo[1],n=wo[2],o=wo[3];i.set(e.left,e.top),r.set(e.left,e.bottom),n.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(r,r),t.apply(n,n),t.apply(o,o);const a=Math.min(i.x,r.x,n.x,o.x),h=Math.min(i.y,r.y,n.y,o.y),l=Math.max(i.x,r.x,n.x,o.x),c=Math.max(i.y,r.y,n.y,o.y);e.x=a,e.y=h,e.width=l-a,e.height=c-h}roundFrame(t,e,i,r,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){const{a:o,b:a,c:h,d:l}=n;if((Math.abs(a)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}n=n?tl.copyFrom(n):tl.identity(),n.translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}}}v_.extension={type:q.RendererSystem,name:"filter"};et.add(v_);class $T{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=jt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const HT=new gt;class b_{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new gc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new gt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Q.PREFER_ENV===Wi.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=r=>e.drawBuffersWEBGL(r):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:r}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>i,a=e.height>>i,h=o/e.width;this.setViewport(e.x*h,e.y*h,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,r){const n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),(n.width!==i||n.height!==r||n.x!==t||n.y!==e)&&(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,r,n=Hl.COLOR|Hl.DEPTH){const{gl:o}=this;o.clearColor(t,e,i,r),o.clear(n)}initFramebuffer(t){const{gl:e}=this,i=new $T(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];if(i.stencil){e.bindRenderbuffer(e.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=e.DEPTH_STENCIL:t.depth&&t.stencil?o=e.DEPTH24_STENCIL8:t.depth?o=e.DEPTH_COMPONENT24:o=e.STENCIL_INDEX8,i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,o,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,o,t.width,t.height)}const r=t.colorTextures;let n=r.length;e.drawBuffers||(n=Math.min(n,1));for(let o=0;o<n;o++){const a=r[o],h=a.parentTextureArray||a;this.renderer.texture.bind(h,0),o===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let o=n.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer():r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let h=0;h<o;h++){const l=n[h],c=l.parentTextureArray||l;this.renderer.texture.bind(c,0),h===0&&r.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,l.target,c._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+h))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){r.stencil=r.stencil||i.createRenderbuffer();let h,l;this.renderer.context.webGLVersion===1?(h=i.DEPTH_STENCIL_ATTACHMENT,l=i.DEPTH_STENCIL):t.depth&&t.stencil?(h=i.DEPTH_STENCIL_ATTACHMENT,l=i.DEPTH24_STENCIL8):t.depth?(h=i.DEPTH_ATTACHMENT,l=i.DEPTH_COMPONENT24):(h=i.STENCIL_ATTACHMENT,l=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,l,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,l,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,h,i.RENDERBUFFER,r.stencil)}else r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=jt.NONE;if(t<=1||e===null)return i;for(let r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}return i===1&&(i=jt.NONE),i}blit(t,e,i){const{current:r,renderer:n,gl:o,CONTEXT_UID:a}=this;if(n.context.webGLVersion!==2||!r)return;const h=r.glFramebuffers[a];if(!h)return;if(!t){if(!h.msaaBuffer)return;const c=r.colorTextures[0];if(!c)return;h.blitFramebuffer||(h.blitFramebuffer=new gc(r.width,r.height),h.blitFramebuffer.addColorTexture(0,c)),t=h.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==r.width||t.height!==r.height)&&(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||(e=HT,e.width=r.width,e.height=r.height),i||(i=e);const l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const i=t.width,r=t.height,n=this.gl,o=e.stencil=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o);let a,h;this.renderer.context.webGLVersion===1?(a=n.DEPTH_STENCIL_ATTACHMENT,h=n.DEPTH_STENCIL):t.depth?(a=n.DEPTH_STENCIL_ATTACHMENT,h=n.DEPTH24_STENCIL8):(a=n.STENCIL_ATTACHMENT,h=n.STENCIL_INDEX8),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,h,i,r):n.renderbufferStorage(n.RENDERBUFFER,h,i,r),n.framebufferRenderbuffer(n.FRAMEBUFFER,a,n.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new gt}destroy(){this.renderer=null}}b_.extension={type:q.RendererSystem,name:"framebuffer"};et.add(b_);const el={5126:4,5123:2,5121:1};class w_{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;Q.PREFER_ENV===Wi.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=r=>i.bindVertexArrayOES(r),t.deleteVertexArray=r=>i.deleteVertexArrayOES(r)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(r,n)=>i.vertexAttribDivisorANGLE(r,n),t.drawElementsInstanced=(r,n,o,a,h)=>i.drawElementsInstancedANGLE(r,n,o,a,h),t.drawArraysInstanced=(r,n,o,a)=>i.drawArraysInstancedANGLE(r,n,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);const o=r[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const r=t.buffers[i];e.update(r)}}checkCompatibility(t,e){const i=t.attributes,r=e.attributeData;for(const n in r)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(t,e){const i=t.attributes,r=e.attributeData,n=["g",t.id];for(const o in i)r[o]&&n.push(o,r[o].location);return n.join("-")}initGeometryVao(t,e,i=!0){const r=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const h=this.getSignature(t,a),l=t.glVertexArrayObjects[this.CONTEXT_UID];let c=l[h];if(c)return l[a.id]=c,c;const u=t.buffers,d=t.attributes,f={},p={};for(const m in u)f[m]=0,p[m]=0;for(const m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*el[d[m].type];for(const m in d){const g=d[m],y=g.size;g.stride===void 0&&(f[g.buffer]===y*el[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=y*el[g.type])}c=r.createVertexArray(),r.bindVertexArray(c);for(let m=0;m<u.length;m++){const g=u[m];o.bind(g),i&&g._glBuffers[n].refCount++}return this.activateVao(t,a),l[a.id]=c,l[h]=c,r.bindVertexArray(null),o.unbind(ps.ARRAY_BUFFER),c}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,n=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let h=0;h<n.length;h++){const l=n[h]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&o.dispose(n[h],e))}if(!e){for(const h in i)if(h[0]==="g"){const l=i[h];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let h=null;for(const l in a){const c=a[l],u=o[c.buffer],d=u._glBuffers[r];if(e.attributeData[l]){h!==d&&(n.bind(u),h=d);const f=e.attributeData[l].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)i.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,r){const{gl:n}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,h=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,h,(i||0)*a,r||1):n.drawElements(t,e||o.indexBuffer.data.length,h,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),r||1):n.drawArrays(t,i,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}w_.extension={type:q.RendererSystem,name:"geometry"};et.add(w_);const lp=new zt;let Lu=class{constructor(t,e){this._texture=t,this.mapCoord=new zt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let r=0;r<t.length;r+=2){const n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=e.orig,n=e.trim;n&&(lp.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(lp));const o=e.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(e._frame.x+h+l)/o.width,a[1]=(e._frame.y+h+l)/o.height,a[2]=(e._frame.x+e._frame.width-h+l)/o.width,a[3]=(e._frame.y+e._frame.height-h+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}};var XT=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,VT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class WT extends de{constructor(t,e,i){let r=null;typeof t!="string"&&e===void 0&&i===void 0&&(r=t,t=void 0,e=void 0,i=void 0),super(t||VT,e||XT,i),this.maskSprite=r,this.maskMatrix=new zt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,r){const n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Lu(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))}}class zT{constructor(t=null){this.type=Kt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=de.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Kt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class E_{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const n=this.maskDataPool.pop()||new zT;n.pooled=!0,n.maskObject=e,i=n}const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==Kt.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Kt.SCISSOR:this.renderer.scissor.push(i);break;case Kt.STENCIL:this.renderer.stencil.push(i);break;case Kt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Kt.COLOR:this.pushColorMask(i);break}i.type===Kt.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Kt.SCISSOR:this.renderer.scissor.pop(e);break;case Kt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Kt.SPRITE:this.popSpriteMask(e);break;case Kt.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Kt.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Kt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Kt.SCISSOR:t.type=Kt.STENCIL:t.type=Kt.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let r=t._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new WT])),r[0].resolution=t.resolution,r[0].multisample=t.multisample,r[0].maskSprite=e;const n=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,r),i.filterArea=n,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}E_.extension={type:q.RendererSystem,name:"mask"};et.add(E_);class A_{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const r=this.getStackLength();r!==i&&(r===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const cp=new zt,up=[],T_=class Jo extends A_{constructor(t){super(t),this.glConst=Q.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:i}=t,{renderer:r}=this,n=r.renderTexture,o=i.getBounds(!0,up.pop()??new gt);this.roundFrameToPixels(o,n.current?n.current.resolution:r.resolution,n.sourceFrame,n.destinationFrame,r.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:i,c:r,d:n}=t;return(Math.abs(i)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Jo.isMatrixRotated(e.worldTransform)||Jo.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,r,n){Jo.isMatrixRotated(n)||(n=n?cp.copyFrom(n):cp.identity(),n.translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.renderer.filter.transformAABB(n,t),t.fit(r),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&up.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};T_.extension={type:q.RendererSystem,name:"scissor"};let jT=T_;et.add(jT);class S_ extends A_{constructor(t){super(t),this.glConst=Q.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,r=t._stencilCounter;r===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;n!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(t._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;r!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,r!==0&&(i._colorMask=r,e.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}S_.extension={type:q.RendererSystem,name:"stencil"};et.add(S_);class C_{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}C_.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"_plugin"};et.add(C_);class R_{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new zt,this.transform=null}update(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,e,i,r){const n=this.projectionMatrix,o=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d}setTransform(t){}destroy(){this.renderer=null}}R_.extension={type:q.RendererSystem,name:"projection"};et.add(R_);const YT=new oh,dp=new gt;class I_{constructor(t){this.renderer=t,this._tempMatrix=new zt}generateTexture(t,e){const{region:i,...r}=e||{},n=(i==null?void 0:i.copyTo(dp))||t.getLocalBounds(dp,!0),o=r.resolution||this.renderer.resolution;n.width=Math.max(n.width,1/o),n.height=Math.max(n.height,1/o),r.width=n.width,r.height=n.height,r.resolution=o,r.multisample??(r.multisample=this.renderer.multisample);const a=zi.create(r);this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const h=t.transform;return t.transform=YT,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=h,a}destroy(){}}I_.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"textureGenerator"};et.add(I_);const gi=new gt,Jr=new gt;class P_{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new gt,this.destinationFrame=new gt,this.viewportFrame=new gt}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,i){const r=this.renderer;this.current=t;let n,o,a;t?(n=t.baseTexture,a=n.resolution,e||(gi.width=t.frame.width,gi.height=t.frame.height,e=gi),i||(Jr.x=t.frame.x,Jr.y=t.frame.y,Jr.width=e.width,Jr.height=e.height,i=Jr),o=n.framebuffer):(a=r.resolution,e||(gi.width=r._view.screen.width,gi.height=r._view.screen.height,e=gi),i||(i=gi,i.width=e.width,i.height=e.height));const h=this.viewportFrame;h.x=i.x*a,h.y=i.y*a,h.width=i.width*a,h.height=i.height*a,t||(h.y=r.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(o,h),this.renderer.projection.update(i,e,a,!o),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=Ft.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);const n=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=n.width!==o.width||n.height!==o.height;if(a){let{x:h,y:l,width:c,height:u}=this.viewportFrame;h=Math.round(h),l=Math.round(l),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,l,c,u)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,e),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}P_.extension={type:q.RendererSystem,name:"renderTexture"};et.add(P_);class qT{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function KT(s,t){const e={},i=t.getProgramParameter(s,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const n=t.getActiveAttrib(s,r);if(n.name.startsWith("gl_"))continue;const o=p_(t,n.type),a={type:o,name:n.name,size:f_(o),location:t.getAttribLocation(s,n.name)};e[n.name]=a}return e}function ZT(s,t){const e={},i=t.getProgramParameter(s,t.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){const n=t.getActiveUniform(s,r),o=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),h=p_(t,n.type);e[o]={name:o,index:r,type:h,size:n.size,isArray:a,value:u_(h,n.size)}}return e}function JT(s,t){var a;const e=ip(s,s.VERTEX_SHADER,t.vertexSrc),i=ip(s,s.FRAGMENT_SHADER,t.fragmentSrc),r=s.createProgram();s.attachShader(r,e),s.attachShader(r,i);const n=(a=t.extra)==null?void 0:a.transformFeedbackVaryings;if(n&&(typeof s.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):s.transformFeedbackVaryings(r,n.names,n.bufferMode==="separate"?s.SEPARATE_ATTRIBS:s.INTERLEAVED_ATTRIBS)),s.linkProgram(r),s.getProgramParameter(r,s.LINK_STATUS)||CT(s,r,e,i),t.attributeData=KT(r,s),t.uniformData=ZT(r,s),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((l,c)=>l>c?1:-1);for(let l=0;l<h.length;l++)t.attributeData[h[l]].location=l,s.bindAttribLocation(r,l,h[l]);s.linkProgram(r)}s.deleteShader(e),s.deleteShader(i);const o={};for(const h in t.uniformData){const l=t.uniformData[h];o[h]={location:s.getUniformLocation(r,h),value:u_(l.type,l.size)}}return new qT(r,o)}function QT(s,t,e,i,r){e.buffer.update(r)}const tS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},M_={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function eS(s){const t=s.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let e=0,i=0,r=0;for(let n=0;n<t.length;n++){const o=t[n];if(e=M_[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,i%e!==0&&i<16){const a=i%e%16;i+=a,r+=a}i+e>16?(r=Math.ceil(r/16)*16,o.offset=r,r+=e,i=e):(o.offset=r,i+=e,r+=e)}return r=Math.ceil(r/16)*16,{uboElements:t,size:r}}function sS(s,t){const e=[];for(const i in s)t[i]&&e.push(t[i]);return e.sort((i,r)=>i.index-r.index),e}function iS(s,t){if(!s.autoManage)return{size:0,syncFunc:QT};const e=sS(s.uniforms,t),{uboElements:i,size:r}=eS(e),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],h=s.uniforms[a.data.name],l=a.data.name;let c=!1;for(let u=0;u<wr.length;u++){const d=wr[u];if(d.codeUbo&&d.test(a.data,h)){n.push(`offset = ${a.offset/4};`,wr[u].codeUbo(a.data.name,h)),c=!0;break}}if(!c)if(a.data.size>1){const u=f_(a.data.type),d=Math.max(M_[a.data.type]/16,1),f=u/d,p=(4-f%4)%4;n.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const u=tS[a.data.type];n.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${a.offset/4};
                ${u};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let rS=0;const Eo={textureCount:0,uboCount:0};class B_{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=rS++}systemCheck(){if(!IT())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(Eo.textureCount=0,Eo.uboCount=0,this.syncUniformGroup(t.uniformGroup,Eo)),r}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=AT(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const r=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),r(i.uniformData,t.uniforms,this.renderer,Eo,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:r}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=iS(t,this.shader.program.uniformData)),t.autoManage){const h=new Float32Array(a.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const r=t.uniforms,n=[`${i}-`];for(const o in r)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,r=JT(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}B_.extension={type:q.RendererSystem,name:"shader"};et.add(B_);class Ta{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.2 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}Ta.defaultOptions={hello:!1},Ta.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"startup"};et.add(Ta);function nS(s,t=[]){return t[ht.NORMAL]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.ADD]=[s.ONE,s.ONE],t[ht.MULTIPLY]=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.SCREEN]=[s.ONE,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.OVERLAY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.DARKEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.LIGHTEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.COLOR_DODGE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.COLOR_BURN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.HARD_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.SOFT_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.DIFFERENCE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.EXCLUSION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.HUE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.SATURATION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.COLOR]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.LUMINOSITY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.NONE]=[0,0],t[ht.NORMAL_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.ADD_NPM]=[s.SRC_ALPHA,s.ONE,s.ONE,s.ONE],t[ht.SCREEN_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ht.SRC_IN]=[s.DST_ALPHA,s.ZERO],t[ht.SRC_OUT]=[s.ONE_MINUS_DST_ALPHA,s.ZERO],t[ht.SRC_ATOP]=[s.DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],t[ht.DST_OVER]=[s.ONE_MINUS_DST_ALPHA,s.ONE],t[ht.DST_IN]=[s.ZERO,s.SRC_ALPHA],t[ht.DST_OUT]=[s.ZERO,s.ONE_MINUS_SRC_ALPHA],t[ht.DST_ATOP]=[s.ONE_MINUS_DST_ALPHA,s.SRC_ALPHA],t[ht.XOR]=[s.ONE_MINUS_DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],t[ht.SUBTRACT]=[s.ONE,s.ONE,s.ONE,s.ONE,s.FUNC_REVERSE_SUBTRACT,s.FUNC_ADD],t}const oS=0,aS=1,hS=2,lS=3,cS=4,uS=5,F_=class _c{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ht.NONE,this._blendEq=!1,this.map=[],this.map[oS]=this.setBlend,this.map[aS]=this.setOffset,this.map[hS]=this.setCullFace,this.map[lS]=this.setDepthTest,this.map[cS]=this.setFrontFace,this.map[uS]=this.setDepthMask,this.checks=[],this.defaultState=new vs,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=nS(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(_c.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(_c.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};F_.extension={type:q.RendererSystem,name:"state"};let dS=F_;et.add(dS);class fS extends qn{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(r=>t.systems[r]),i=[...e,...Object.keys(t.systems).filter(r=>!e.includes(r))];for(const r of i)this.addSystem(t.systems[r],r)}addRunners(...t){t.forEach(e=>{this.runners[e]=new Ye(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const r in this.runners)this.runners[r].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(r=>{const n=i.find(o=>this._systemsHash[o]===r);r[t.name](e[n])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const an=class Qo{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Qo.defaultMaxIdle,this.checkCountMax=Qo.defaultCheckCountMax,this.mode=Qo.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Tu.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let i=!1;for(let r=0;r<e.length;r++){const n=e[r];n.resource&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){let r=0;for(let n=0;n<e.length;n++)e[n]!==null&&(e[r++]=e[n]);e.length=r}}unload(t){const e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let r=t.children.length-1;r>=0;r--)this.unload(t.children[r])}destroy(){this.renderer=null}};an.defaultMode=Tu.AUTO,an.defaultMaxIdle=60*60,an.defaultCheckCountMax=60*10,an.extension={type:q.RendererSystem,name:"textureGC"};let Ei=an;et.add(Ei);class sl{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=it.UNSIGNED_BYTE,this.internalFormat=D.RGBA,this.samplerType=0}}function pS(s){let t;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?t={[s.RGB]:J.FLOAT,[s.RGBA]:J.FLOAT,[s.ALPHA]:J.FLOAT,[s.LUMINANCE]:J.FLOAT,[s.LUMINANCE_ALPHA]:J.FLOAT,[s.R8]:J.FLOAT,[s.R8_SNORM]:J.FLOAT,[s.RG8]:J.FLOAT,[s.RG8_SNORM]:J.FLOAT,[s.RGB8]:J.FLOAT,[s.RGB8_SNORM]:J.FLOAT,[s.RGB565]:J.FLOAT,[s.RGBA4]:J.FLOAT,[s.RGB5_A1]:J.FLOAT,[s.RGBA8]:J.FLOAT,[s.RGBA8_SNORM]:J.FLOAT,[s.RGB10_A2]:J.FLOAT,[s.RGB10_A2UI]:J.FLOAT,[s.SRGB8]:J.FLOAT,[s.SRGB8_ALPHA8]:J.FLOAT,[s.R16F]:J.FLOAT,[s.RG16F]:J.FLOAT,[s.RGB16F]:J.FLOAT,[s.RGBA16F]:J.FLOAT,[s.R32F]:J.FLOAT,[s.RG32F]:J.FLOAT,[s.RGB32F]:J.FLOAT,[s.RGBA32F]:J.FLOAT,[s.R11F_G11F_B10F]:J.FLOAT,[s.RGB9_E5]:J.FLOAT,[s.R8I]:J.INT,[s.R8UI]:J.UINT,[s.R16I]:J.INT,[s.R16UI]:J.UINT,[s.R32I]:J.INT,[s.R32UI]:J.UINT,[s.RG8I]:J.INT,[s.RG8UI]:J.UINT,[s.RG16I]:J.INT,[s.RG16UI]:J.UINT,[s.RG32I]:J.INT,[s.RG32UI]:J.UINT,[s.RGB8I]:J.INT,[s.RGB8UI]:J.UINT,[s.RGB16I]:J.INT,[s.RGB16UI]:J.UINT,[s.RGB32I]:J.INT,[s.RGB32UI]:J.UINT,[s.RGBA8I]:J.INT,[s.RGBA8UI]:J.UINT,[s.RGBA16I]:J.INT,[s.RGBA16UI]:J.UINT,[s.RGBA32I]:J.INT,[s.RGBA32UI]:J.UINT,[s.DEPTH_COMPONENT16]:J.FLOAT,[s.DEPTH_COMPONENT24]:J.FLOAT,[s.DEPTH_COMPONENT32F]:J.FLOAT,[s.DEPTH_STENCIL]:J.FLOAT,[s.DEPTH24_STENCIL8]:J.FLOAT,[s.DEPTH32F_STENCIL8]:J.FLOAT}:t={[s.RGB]:J.FLOAT,[s.RGBA]:J.FLOAT,[s.ALPHA]:J.FLOAT,[s.LUMINANCE]:J.FLOAT,[s.LUMINANCE_ALPHA]:J.FLOAT,[s.DEPTH_STENCIL]:J.FLOAT},t}function mS(s){let t;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?t={[it.UNSIGNED_BYTE]:{[D.RGBA]:s.RGBA8,[D.RGB]:s.RGB8,[D.RG]:s.RG8,[D.RED]:s.R8,[D.RGBA_INTEGER]:s.RGBA8UI,[D.RGB_INTEGER]:s.RGB8UI,[D.RG_INTEGER]:s.RG8UI,[D.RED_INTEGER]:s.R8UI,[D.ALPHA]:s.ALPHA,[D.LUMINANCE]:s.LUMINANCE,[D.LUMINANCE_ALPHA]:s.LUMINANCE_ALPHA},[it.BYTE]:{[D.RGBA]:s.RGBA8_SNORM,[D.RGB]:s.RGB8_SNORM,[D.RG]:s.RG8_SNORM,[D.RED]:s.R8_SNORM,[D.RGBA_INTEGER]:s.RGBA8I,[D.RGB_INTEGER]:s.RGB8I,[D.RG_INTEGER]:s.RG8I,[D.RED_INTEGER]:s.R8I},[it.UNSIGNED_SHORT]:{[D.RGBA_INTEGER]:s.RGBA16UI,[D.RGB_INTEGER]:s.RGB16UI,[D.RG_INTEGER]:s.RG16UI,[D.RED_INTEGER]:s.R16UI,[D.DEPTH_COMPONENT]:s.DEPTH_COMPONENT16},[it.SHORT]:{[D.RGBA_INTEGER]:s.RGBA16I,[D.RGB_INTEGER]:s.RGB16I,[D.RG_INTEGER]:s.RG16I,[D.RED_INTEGER]:s.R16I},[it.UNSIGNED_INT]:{[D.RGBA_INTEGER]:s.RGBA32UI,[D.RGB_INTEGER]:s.RGB32UI,[D.RG_INTEGER]:s.RG32UI,[D.RED_INTEGER]:s.R32UI,[D.DEPTH_COMPONENT]:s.DEPTH_COMPONENT24},[it.INT]:{[D.RGBA_INTEGER]:s.RGBA32I,[D.RGB_INTEGER]:s.RGB32I,[D.RG_INTEGER]:s.RG32I,[D.RED_INTEGER]:s.R32I},[it.FLOAT]:{[D.RGBA]:s.RGBA32F,[D.RGB]:s.RGB32F,[D.RG]:s.RG32F,[D.RED]:s.R32F,[D.DEPTH_COMPONENT]:s.DEPTH_COMPONENT32F},[it.HALF_FLOAT]:{[D.RGBA]:s.RGBA16F,[D.RGB]:s.RGB16F,[D.RG]:s.RG16F,[D.RED]:s.R16F},[it.UNSIGNED_SHORT_5_6_5]:{[D.RGB]:s.RGB565},[it.UNSIGNED_SHORT_4_4_4_4]:{[D.RGBA]:s.RGBA4},[it.UNSIGNED_SHORT_5_5_5_1]:{[D.RGBA]:s.RGB5_A1},[it.UNSIGNED_INT_2_10_10_10_REV]:{[D.RGBA]:s.RGB10_A2,[D.RGBA_INTEGER]:s.RGB10_A2UI},[it.UNSIGNED_INT_10F_11F_11F_REV]:{[D.RGB]:s.R11F_G11F_B10F},[it.UNSIGNED_INT_5_9_9_9_REV]:{[D.RGB]:s.RGB9_E5},[it.UNSIGNED_INT_24_8]:{[D.DEPTH_STENCIL]:s.DEPTH24_STENCIL8},[it.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[D.DEPTH_STENCIL]:s.DEPTH32F_STENCIL8}}:t={[it.UNSIGNED_BYTE]:{[D.RGBA]:s.RGBA,[D.RGB]:s.RGB,[D.ALPHA]:s.ALPHA,[D.LUMINANCE]:s.LUMINANCE,[D.LUMINANCE_ALPHA]:s.LUMINANCE_ALPHA},[it.UNSIGNED_SHORT_5_6_5]:{[D.RGB]:s.RGB},[it.UNSIGNED_SHORT_4_4_4_4]:{[D.RGBA]:s.RGBA},[it.UNSIGNED_SHORT_5_5_5_1]:{[D.RGBA]:s.RGBA}},t}class O_{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new pt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mS(t),this.samplerTypes=pS(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};const i=new sl(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new sl(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:r}=this;if(i)for(let n=t-1;n>=0;--n){const o=e[n];o&&o._glTextures[r].samplerType!==J.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new sl(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??J.FLOAT,this.webGLVersion===2&&t.type===it.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var r;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(r=t.resource)==null?void 0:r.upload(i,t,e))e.samplerType!==J.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,o=t.realHeight,a=i.gl;(e.width!==n||e.height!==o||e.dirtyId<0)&&(e.width=n,e.height=o,a.texImage2D(t.target,0,e.internalFormat,n,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const r=this.managedTextures.indexOf(t);r!==-1&&br(this.managedTextures,r,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===ys.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Rs.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==ys.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===As.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===As.LINEAR){const n=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===As.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===As.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}O_.extension={type:q.RendererSystem,name:"texture"};et.add(O_);class D_{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,r=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:r}=this;e&&r.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:r}=this,n=e.createTransformFeedback();t._glTransformFeedbacks[r]=n,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[r].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const h=a._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!e&&n.dispose(a,e))}i&&(e||r.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}D_.extension={type:q.RendererSystem,name:"transformFeedback"};et.add(D_);class Sa{constructor(t){this.renderer=t}init(t){this.screen=new gt(0,0,t.width,t.height),this.element=t.view||Q.ADAPTER.createCanvas(),this.resolution=t.resolution||Q.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",i,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Sa.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Sa.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"_view"};et.add(Sa);Q.PREFER_ENV=Wi.WEBGL2;Q.STRICT_TEXTURE_CACHE=!1;Q.RENDER_OPTIONS={...Aa.defaultOptions,...Ea.defaultOptions,...Sa.defaultOptions,...Ta.defaultOptions};Object.defineProperties(Q,{WRAP_MODE:{get(){return pt.defaultOptions.wrapMode},set(s){yt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),pt.defaultOptions.wrapMode=s}},SCALE_MODE:{get(){return pt.defaultOptions.scaleMode},set(s){yt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),pt.defaultOptions.scaleMode=s}},MIPMAP_TEXTURES:{get(){return pt.defaultOptions.mipmap},set(s){yt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),pt.defaultOptions.mipmap=s}},ANISOTROPIC_LEVEL:{get(){return pt.defaultOptions.anisotropicLevel},set(s){yt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),pt.defaultOptions.anisotropicLevel=s}},FILTER_RESOLUTION:{get(){return yt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),de.defaultResolution},set(s){de.defaultResolution=s}},FILTER_MULTISAMPLE:{get(){return yt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),de.defaultMultisample},set(s){de.defaultMultisample=s}},SPRITE_MAX_TEXTURES:{get(){return wi.defaultMaxTextures},set(s){yt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),wi.defaultMaxTextures=s}},SPRITE_BATCH_SIZE:{get(){return wi.defaultBatchSize},set(s){yt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),wi.defaultBatchSize=s}},CAN_UPLOAD_SAME_BUFFER:{get(){return wi.canUploadSameBuffer},set(s){yt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),wi.canUploadSameBuffer=s}},GC_MODE:{get(){return Ei.defaultMode},set(s){yt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ei.defaultMode=s}},GC_MAX_IDLE:{get(){return Ei.defaultMaxIdle},set(s){yt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ei.defaultMaxIdle=s}},GC_MAX_CHECK_COUNT:{get(){return Ei.defaultCheckCountMax},set(s){yt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ei.defaultCheckCountMax=s}},PRECISION_VERTEX:{get(){return Ss.defaultVertexPrecision},set(s){yt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ss.defaultVertexPrecision=s}},PRECISION_FRAGMENT:{get(){return Ss.defaultFragmentPrecision},set(s){yt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ss.defaultFragmentPrecision=s}}});var oi=(s=>(s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY",s))(oi||{});let il=class{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}};const L_=class Ee{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new il(null,null,1/0),this.deltaMS=1/Ee.targetFPMS,this.elapsedMS=1/Ee.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=oi.NORMAL){return this._addListener(new il(t,e,i))}addOnce(t,e,i=oi.NORMAL){return this._addListener(new il(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ee.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Ee.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Ee._shared){const t=Ee._shared=new Ee;t.autoStart=!0,t._protected=!0}return Ee._shared}static get system(){if(!Ee._system){const t=Ee._system=new Ee;t.autoStart=!0,t._protected=!0}return Ee._system}};L_.targetFPMS=.06;let Jt=L_;Object.defineProperties(Q,{TARGET_FPMS:{get(){return Jt.targetFPMS},set(s){yt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Jt.targetFPMS=s}}});class N_{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,oi.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Jt.shared:new Jt,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}N_.extension=q.Application;et.add(N_);const k_=[];et.handleByList(q.Renderer,k_);function gS(s){for(const t of k_)if(t.test(s))return new t(s);throw new Error("Unable to auto-detect a suitable renderer.")}var _S=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,yS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const xS=_S,U_=yS;class G_{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=jt.HIGH?this.multisample=jt.HIGH:e>=jt.MEDIUM?this.multisample=jt.MEDIUM:e>=jt.LOW?this.multisample=jt.LOW:this.multisample=jt.NONE}destroy(){}}G_.extension={type:q.RendererSystem,name:"_multisample"};et.add(G_);class vS{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class $_{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,r=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:r}=this;if(this.boundBufferBases[e]!==t){const n=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}}bindBufferRange(t,e,i){const{gl:r,CONTEXT_UID:n}=this;i=i||0;const o=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,r=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new vS(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}$_.extension={type:q.RendererSystem,name:"buffer"};et.add($_);class H_{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let r,n,o,a;if(e&&(r=e.renderTexture,n=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!r,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(r||(this.lastObjectRendered=t),!a){const h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}i.renderTexture.bind(r),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),r&&(e.blit&&i.framebuffer.blit(),r.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}H_.extension={type:q.RendererSystem,name:"objectRenderer"};et.add(H_);const ta=class yc extends fS{constructor(t){super(),this.type=Cg.WEBGL,t=Object.assign({},Q.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new qe({projectionMatrix:new zt},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:yc.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(yt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=yc.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:WA()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return yt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return yt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return yt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return yt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};ta.extension={type:q.Renderer,priority:1},ta.__plugins={},ta.__systems={};let Nu=ta;et.handleByMap(q.RendererPlugin,Nu.__plugins);et.handleByMap(q.RendererSystem,Nu.__systems);et.add(Nu);class X_ extends Gn{constructor(t,e){const{width:i,height:r}=e||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(let n=0;n<t;n++){const o=new pt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Gn?this.addResourceAt(t[i],i):this.addResourceAt(o_(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:i}=this.items[0];return this.resize(e,i),this.update(),Promise.resolve(this)}),this._load}}class bS extends X_{constructor(t,e){const{width:i,height:r}=e||{};let n,o;Array.isArray(t)?(n=t,o=t.length):o=t,super(o,{width:i,height:r}),n&&this.initFromArray(n,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=yr.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:r,itemDirtyIds:n,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,e.format,i.type,null);for(let h=0;h<r;h++){const l=o[h];n[h]<l.dirtyId&&(n[h]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,l.resource.width,l.resource.height,1,e.format,i.type,l.resource.source))}return!0}}class wS extends Bs{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const V_=class hn extends X_{constructor(t,e){const{width:i,height:r,autoLoad:n,linkBaseTexture:o}=e||{};if(t&&t.length!==hn.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:r});for(let a=0;a<hn.SIDES;a++)this.items[a].target=yr.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,e),n!==!1&&this.load()}bind(t){super.bind(t),t.target=yr.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=yr.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){const r=this.itemDirtyIds;for(let n=0;n<hn.SIDES;n++){const o=this.items[n];(r[n]<o.dirtyId||i.dirtyId<e.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,i),r[n]=o.dirtyId):r[n]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),r[n]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===hn.SIDES}};V_.SIDES=6;let ES=V_;class fr extends Bs{constructor(t,e){e=e||{};let i,r,n;typeof t=="string"?(i=fr.EMPTY,r=t,n=!0):(i=t,r=null,n=!1),super(i),this.url=r,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??n,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await Q.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===_e.UNPACK?"premultiply":"none"});if(this.destroyed){n.close();return}this.source=n,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return fr._EMPTY=fr._EMPTY??Q.ADAPTER.createCanvas(0,0),fr._EMPTY}}const xc=class ea extends Bs{constructor(t,e){e=e||{},super(Q.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},ea.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Bs.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=e*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/i*e,n=this._overrideHeight||this._overrideWidth/e*i),r=Math.round(r),n=Math.round(n);const o=this.source;o.width=r,o.height=n,o._pixiId=`canvas_${Hi()}`,o.getContext("2d").drawImage(t,0,0,e,i,0,0,r,n),this._resolve(),this._resolve=null}}static getSize(t){const e=ea.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&ea.SVG_XML.test(t)}};xc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,xc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let vc=xc;class AS extends Bs{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const bc=class wc extends Bs{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const i=document.createElement("video");e.autoLoad!==!1&&i.setAttribute("preload","auto"),e.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),e.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),e.loop===!0&&i.setAttribute("loop",""),e.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const r=t[0].src||t[0];Bs.crossOrigin(i,r,e.crossorigin);for(let n=0;n<t.length;++n){const o=document.createElement("source");let{src:a,mime:h}=t[n];if(a=a||t[n],a.startsWith("data:"))h=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const l=a.split("?").shift().toLowerCase(),c=l.slice(l.lastIndexOf(".")+1);h=h||wc.MIME_TYPES[c]||`video/${c}`}o.src=a,h&&(o.type=h),i.appendChild(o)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=Jt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,i)=>{this.valid?e(this):(this._resolve=e,this._reject=i,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Jt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||wc.TYPES.includes(e)}};bc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],bc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let W_=bc;ac.push(fr,__,wS,W_,AS,vc,sh,ES,bS);let Ca=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?gt.EMPTY:(t=t||new gt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:r,c:n,d:o,tx:a,ty:h}=t,l=i*e.x+n*e.y+a,c=r*e.x+o*e.y+h;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[2],a=t[3],e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[4],a=t[5],e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[6],a=t[7],e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n}addFrame(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)}addFrameMatrix(t,e,i,r,n){const o=t.a,a=t.b,h=t.c,l=t.d,c=t.tx,u=t.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*e+h*i+c,y=a*e+l*i+u;d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*r+h*i+c,y=a*r+l*i+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*e+h*n+c,y=a*e+l*n+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*r+h*n+c,y=a*r+l*n+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(t,e,i){let r=this.minX,n=this.minY,o=this.maxX,a=this.maxY;for(let h=e;h<i;h+=2){const l=t[h],c=t[h+1];r=l<r?l:r,n=c<n?c:n,o=l>o?l:o,a=c>a?c:a}this.minX=r,this.minY=n,this.maxX=o,this.maxY=a}addVertices(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)}addVerticesMatrix(t,e,i,r,n=0,o=n){const a=t.a,h=t.b,l=t.c,c=t.d,u=t.tx,d=t.ty;let f=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let y=i;y<r;y+=2){const v=e[y],_=e[y+1],w=a*v+l*_+u,A=c*_+h*v+d;f=Math.min(f,w-n),m=Math.max(m,w+n),p=Math.min(p,A-o),g=Math.max(g,A+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=g}addBounds(t){const e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=o){const a=this.minX,h=this.minY,l=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=r<h?r:h,this.maxX=n>l?n:l,this.maxY=o>c?o:c}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=o){const a=this.minX,h=this.minY,l=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=r<h?r:h,this.maxX=n>l?n:l,this.maxY=o>c?o:c}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,r,n,o){t-=n,e-=o,i+=n,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r}};class Nt extends qn{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new oh,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ca,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const r=e[i];Object.defineProperty(Nt.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new gt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new gt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Ca);const e=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-n,o}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,r=1,n=0,o=0,a=0,h=0,l=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=h,this.pivot.y=l,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TS),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*_T}set angle(t){this.transform.rotation=t*yT}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class TS extends Nt{constructor(){super(...arguments),this.sortDirty=null}}Nt.prototype.displayObjectUpdateTransform=Nt.prototype.updateTransform;const SS=new zt;function CS(s,t){return s.zIndex===t.zIndex?s._lastSortedIndex-t._lastSortedIndex:s.zIndex-t.zIndex}const z_=class Ec extends Nt{constructor(){super(),this.children=[],this.sortableChildren=Ec.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(t);br(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],i=this.children.indexOf(e);if(i===-1)return null;e.parent=null,e.transform._parentID=-1,br(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,br(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=t,r=e,n=r-i;let o;if(n>0&&n<=r){o=this.children.splice(i,n);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){const r=this.children[e];r._lastSortedIndex=e,!t&&r.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(CS),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=super.getLocalBounds(t);if(!e)for(let r=0,n=this.children.length;r<n;++r){const o=this.children[r];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,r;this.cullArea?(i=this.cullArea,r=this.worldTransform):this._render!==Ec.prototype._render&&(i=this.getBounds(!0));const n=t.projection.transform;if(n&&(r?(r=SS.copyFrom(r),r.prepend(n)):r=n),i&&e.intersects(i,r))this._render(t);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const h=this.children[o],l=h.cullable;h.cullable=l||!this.cullArea,h.render(t),h.cullable=l}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,r=this.children.length;i<r;++i)this.children[i].render(t)}}renderAdvanced(t){var n,o,a;const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let h=0;h<e.length;h++)e[h].enabled&&this._enabledFilters.push(e[h])}const r=e&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Kt.NONE));if(r&&t.batch.flush(),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let h=0,l=this.children.length;h<l;++h)this.children[h].render(t)}r&&t.batch.flush(),i&&t.mask.pop(this),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<i.length;++r)i[r].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};z_.defaultSortableChildren=!1;let ve=z_;ve.prototype.containerUpdateTransform=ve.prototype.updateTransform;Object.defineProperties(Q,{SORTABLE_CHILDREN:{get(){return ve.defaultSortableChildren},set(s){yt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ve.defaultSortableChildren=s}}});const Qr=new Rt,RS=new Uint16Array([0,1,2,0,2,3]);let ui=class j_ extends ve{constructor(t){super(),this._anchor=new Bi(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ft(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ht.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ct.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=RS,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Q.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ks(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ks(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,a=e.tx,h=e.ty,l=this.vertexData,c=t.trim,u=t.orig,d=this._anchor;let f=0,p=0,m=0,g=0;if(c?(p=c.x-d._x*u.width,f=p+c.width,g=c.y-d._y*u.height,m=g+c.height):(p=-d._x*u.width,f=p+u.width,g=-d._y*u.height,m=g+u.height),l[0]=i*p+n*g+a,l[1]=o*g+r*p+h,l[2]=i*f+n*g+a,l[3]=o*g+r*f+h,l[4]=i*f+n*m+a,l[5]=o*m+r*f+h,l[6]=i*p+n*m+a,l[7]=o*m+r*p+h,this._roundPixels){const y=Q.RESOLUTION;for(let v=0;v<l.length;++v)l[v]=Math.round(l[v]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,h=n.c,l=n.d,c=n.tx,u=n.ty,d=-r._x*i.width,f=d+i.width,p=-r._y*i.height,m=p+i.height;if(e[0]=o*d+h*p+c,e[1]=l*p+a*d+u,e[2]=o*f+h*p+c,e[3]=l*p+a*f+u,e[4]=o*f+h*m+c,e[5]=l*m+a*f+u,e[6]=o*d+h*m+c,e[7]=l*m+a*d+u,this._roundPixels){const g=Q.RESOLUTION;for(let y=0;y<e.length;++y)e[y]=Math.round(e[y]*g)/g}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Ca),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new gt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Qr);const e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x;let n=0;return Qr.x>=r&&Qr.x<r+e&&(n=-i*this.anchor.y,Qr.y>=n&&Qr.y<n+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const i=t instanceof ct?t:ct.from(t,e);return new j_(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Ks(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Ks(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ct.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}};const Y_=new zt;Nt.prototype._cacheAsBitmap=!1;Nt.prototype._cacheData=null;Nt.prototype._cacheAsBitmapResolution=null;Nt.prototype._cacheAsBitmapMultisample=null;class IS{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Nt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(s){s!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(s){s!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(s){if(this._cacheAsBitmap===s)return;this._cacheAsBitmap=s;let t;s?(this._cacheData||(this._cacheData=new IS),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Nt.prototype._renderCached=function(s){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(s),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(s))};Nt.prototype._initCachedDisplayObject=function(s){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const t=this.alpha;this.alpha=1,s.batch.flush();const e=this.getLocalBounds(new gt,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;e.pad(p)}const i=this.cacheAsBitmapResolution||s.resolution;e.ceil(i),e.width=Math.max(e.width,1/i),e.height=Math.max(e.height,1/i);const r=s.renderTexture.current,n=s.renderTexture.sourceFrame.clone(),o=s.renderTexture.destinationFrame.clone(),a=s.projection.transform,h=zi.create({width:e.width,height:e.height,resolution:i,multisample:this.cacheAsBitmapMultisample??s.multisample}),l=`cacheAsBitmap_${Hi()}`;this._cacheData.textureCacheId=l,pt.addToCache(h.baseTexture,l),ct.addToCache(h,l);const c=this.transform.localTransform.copyTo(Y_).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,s.render(this,{renderTexture:h,clear:!0,transform:c,skipUpdateTransform:!1}),s.framebuffer.blit(),s.projection.transform=a,s.renderTexture.bind(r,n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new ui(h);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};Nt.prototype._renderCachedCanvas=function(s){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(s),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(s))};Nt.prototype._initCachedDisplayObjectCanvas=function(s){var c;if((c=this._cacheData)!=null&&c.sprite)return;const t=this.getLocalBounds(new gt,!0),e=this.alpha;this.alpha=1;const i=s.canvasContext.activeContext,r=s._projTransform,n=this.cacheAsBitmapResolution||s.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const o=zi.create({width:t.width,height:t.height,resolution:n}),a=`cacheAsBitmap_${Hi()}`;this._cacheData.textureCacheId=a,pt.addToCache(o.baseTexture,a),ct.addToCache(o,a);const h=Y_;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=t.x,h.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,s.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),s.canvasContext.activeContext=i,s._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const l=new ui(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(t.x/t.width),l.anchor.y=-(t.y/t.height),l.alpha=e,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=s._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)};Nt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Nt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Nt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,pt.removeFromCache(this._cacheData.textureCacheId),ct.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Nt.prototype._cacheAsBitmapDestroy=function(s){this.cacheAsBitmap=!1,this.destroy(s)};Nt.prototype.name=null;ve.prototype.getChildByName=function(s,t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].name===s)return this.children[e];if(t)for(let e=0,i=this.children.length;e<i;e++){const r=this.children[e];if(!r.getChildByName)continue;const n=r.getChildByName(s,!0);if(n)return n}return null};Nt.prototype.getGlobalPosition=function(s=new Rt,t=!1){return this.parent?this.parent.toGlobal(this.position,s,t):(s.x=this.position.x,s.y=this.position.y),s};var PS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class q_ extends de{constructor(t=1){super(xS,PS,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const MS={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},BS=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function FS(s){const t=MS[s],e=t.length;let i=BS,r="";const n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<s;a++){let h=n.replace("%index%",a.toString());o=a,a>=e&&(o=s-a-1),h=h.replace("%value%",t[o].toString()),r+=h,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",s.toString()),i}const OS=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function DS(s,t){const e=Math.ceil(s/2);let i=OS,r="",n;t?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<s;o++){let a=n.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),r+=a,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",s.toString()),i}class Ac extends de{constructor(t,e=8,i=4,r=de.defaultResolution,n=5){const o=DS(n,t),a=FS(n);super(o,a),this.horizontal=t,this.resolution=r,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,i,r);else{const n=t.getFilterTexture(),o=t.renderer;let a=e,h=n;this.state.blend=!1,t.applyFilter(this,a,h,hs.CLEAR);for(let l=1;l<this.passes-1;l++){t.bindAndClear(a,hs.BLIT),this.uniforms.uSampler=h;const c=h;h=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,h,i,r),t.returnFilterTexture(n)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class K_ extends de{constructor(t=8,e=4,i=de.defaultResolution,r=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Ac(!0,t,e,i,r),this.blurYFilter=new Ac(!1,t,e,i,r),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,r){const n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,hs.CLEAR),this.blurYFilter.apply(t,a,i,r),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,i,r):this.blurXFilter.apply(t,e,i,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var LS=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Ra extends de{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(U_,LS,t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const[i,r,n]=Ft.shared.setValue(t).toArray(),o=[i,0,0,0,0,0,r,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),r=Math.sin(t),n=Math.sqrt,o=1/3,a=n(o),h=i+(1-i)*o,l=o*(1-i)-a*r,c=o*(1-i)+a*r,u=o*(1-i)+a*r,d=i+o*(1-i),f=o*(1-i)-a*r,p=o*(1-i)-a*r,m=o*(1-i)+a*r,g=i+o*(1-i),y=[h,l,c,0,0,u,d,f,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(y,e)}contrast(t,e){const i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)}saturate(t=0,e){const i=t*2/3+1,r=(i-1)*-.5,n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,r,n){t=t||.2,e=e||.15,i=i||16770432,r=r||3375104;const o=Ft.shared,[a,h,l]=o.setValue(i).toArray(),[c,u,d]=o.setValue(r).toArray(),f=[.3,.59,.11,0,0,a,h,l,t,0,c,u,d,e,0,a-c,h-u,l-d,0,0];this._loadMatrix(f,n)}night(t,e){t=t||.1;const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Ra.prototype.grayscale=Ra.prototype.greyscale;var NS=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,kS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class Z_ extends de{constructor(t,e){const i=new zt;t.renderable=!1,super(kS,NS,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,e==null&&(e=20),this.scale=new Rt(e,e)}apply(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),t.applyFilter(this,e,i,r)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var US=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,GS=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class J_ extends de{constructor(){super(GS,US)}}var $S=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class Q_ extends de{constructor(t=.5,e=Math.random()){super(U_,$S,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const fp={AlphaFilter:q_,BlurFilter:K_,BlurFilterPass:Ac,ColorMatrixFilter:Ra,DisplacementFilter:Z_,FXAAFilter:J_,NoiseFilter:Q_};Object.entries(fp).forEach(([s,t])=>{Object.defineProperty(fp,s,{get(){return yt("7.1.0",`filters.${s} has moved to ${s}`),t}})});class HS{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Jt.system.add(this.tickerUpdate,this,oi.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Jt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Ys=new HS;class Jn{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Jn.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Rt,this.page=new Rt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,r,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Ia extends Jn{constructor(){super(...arguments),this.client=new Rt,this.movement=new Rt,this.offset=new Rt,this.global=new Rt,this.screen=new Rt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,r,n,o,a,h,l,c,u,d,f,p,m){throw new Error("Method not implemented.")}}class He extends Ia{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Er extends Ia{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Er.DOM_DELTA_PIXEL=0,Er.DOM_DELTA_LINE=1,Er.DOM_DELTA_PAGE=2;const XS=2048,VS=new Rt,rl=new Rt;class WS{constructor(t){this.dispatch=new qn,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,r)=>i.priority-r.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,r=e.length;i<r;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Ys.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[i](this.rootTarget,this.rootTarget.eventMode,VS.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,n=i.length-1;r<n;r++)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const r=Array.isArray(e)?e:[e];for(let n=i.length-1;n>=0;n--)r.forEach(o=>{t.currentTarget=i[n],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let i=0;i<XS&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,r,n,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Ys.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let u=c.length-1;u>=0;u--){const d=c[u],f=this.hitTestMoveRecursive(d,this._isInteractive(e)?e:d.eventMode,i,r,n,o||n(t,i));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=t.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(t),f.push(t)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const h=this._isInteractive(e),l=t.isInteractive();return h&&l&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:h&&!n(t,i)&&r(t,i)?l?[t]:[]:null}hitTestRecursive(t,e,i,r,n){if(this._interactivePrune(t)||n(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Ys.pauseUpdate=!1),t.interactiveChildren&&t.children){const h=t.children;for(let l=h.length-1;l>=0;l--){const c=h[l],u=this.hitTestRecursive(c,this._isInteractive(e)?e:c.eventMode,i,r,n);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const d=t.isInteractive();return(u.length>0||d)&&u.push(t),u}}}const o=this._isInteractive(e),a=t.isInteractive();return o&&r(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,rl),!t.hitArea.contains(rl.x,rl.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!((i=r.containsPoint)!=null&&i.call(r,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var n,o;e=e??t.type;const i=`on${e}`;(o=(n=t.currentTarget)[i])==null||o.call(n,t);const r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const r=e.button===2;this.dispatchEvent(e,r?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var h,l;if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=e.pointerType==="mouse"||e.pointerType==="pen",r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.overTargets);if(((h=r.overTargets)==null?void 0:h.length)>0&&n!==e.target){const c=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,c,n);if(this.dispatchEvent(u,"pointerout"),i&&this.dispatchEvent(u,"mouseout"),!e.composedPath().includes(n)){const d=this.createPointerEvent(t,"pointerleave",n);for(d.eventPhase=d.AT_TARGET;d.target&&!e.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),i&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(u)}if(n!==e.target){const c=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(e,c);this.dispatchEvent(u,"pointerover"),i&&this.dispatchEvent(u,"mouseover");let d=n==null?void 0:n.parent;for(;d&&d!==this.rootTarget.parent&&d!==e.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const f=this.clonePointerEvent(e,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==n&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(l=e.target)==null?void 0:l.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),r=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",r=this.findMountedTarget(e.overTargets),n=this.createPointerEvent(t,"pointerout",r);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const o=this.createPointerEvent(t,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(n),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[t.button]);let o=n;if(n&&!i.composedPath().includes(n)){let a=n;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const h=i.button===2;this.notifyTarget(i,h?"rightupoutside":"mouseupoutside")}a=a.parent}delete r.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,r.clicksByButton[t.button]||(r.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const h=r.clicksByButton[t.button];if(h.target===a.target&&e-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=a.target,h.timeStamp=e,a.detail=h.clickCount,a.pointerType==="mouse"){const l=a.button===2;this.dispatchEvent(a,l?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),r=this.createPointerEvent(t);if(i){let n=i;for(;n;)r.currentTarget=n,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(r)}mapWheel(t){if(!(t instanceof Er)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const r=this.allocateEvent(He);return this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=i??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof e=="string"&&(r.type=e),r}createWheelEvent(t){const e=this.allocateEvent(Er);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(He);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof He&&e instanceof He&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Ia&&e instanceof Ia&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let r=0,n=i.length;r<n&&!t.propagationImmediatelyStopped;r++)i[r].once&&t.currentTarget.removeListener(e,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,t)}}const zS=1,jS={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Tc=class Sc{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new WS(null),Ys.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new He(null),this.rootWheelEvent=new Er(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Sc.defaultEventFeatures},{set:(e,i,r)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),e[i]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,Sc._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,r=e.length;i<r;i++){const n=e[i],o=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Ys.pointerMoved();const e=this.normalizeToPointerData(t);for(let i=0,r=e.length;i<r;i++){const n=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",r=this.normalizeToPointerData(t);for(let n=0,o=r.length;n<o;n++){const a=this.bootstrapEvent(this.rootPointerEvent,r[n]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let i=0,r=e.length;i<r;i++){const n=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Ys.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Ys.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Ys.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){const r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},n=1/this.resolution;t.x=(e-r.left)*(this.domElement.width/r.width)*n,t.y=(i-r.top)*(this.domElement.height/r.height)*n}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,r=t.changedTouches.length;i<r;i++){const n=t.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=t.type,e.push(n)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=zS),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=jS[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};Tc.extension={name:"events",type:[q.RendererSystem,q.CanvasRendererSystem]},Tc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Cc=Tc;et.add(Cc);function pp(s){return s==="dynamic"||s==="static"}const YS={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??pp(Cc.defaultEventMode)},set interactive(s){yt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=s,this.eventMode=s?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Cc.defaultEventMode},set eventMode(s){this._internalInteractive=pp(s),this._internalEventMode=s},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(s,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,r=typeof e=="object"?e.signal:void 0,n=typeof e=="object"?e.once===!0:!1,o=typeof t=="function"?void 0:t;s=i?`${s}capture`:s;const a=typeof t=="function"?t:t.handleEvent,h=this;r&&r.addEventListener("abort",()=>{h.off(s,a,o)}),n?h.once(s,a,o):h.on(s,a,o)},removeEventListener(s,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,r=typeof t=="function"?void 0:t;s=i?`${s}capture`:s,t=typeof t=="function"?t:t.handleEvent,this.off(s,t,r)},dispatchEvent(s){if(!(s instanceof Jn))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return s.defaultPrevented=!1,s.path=null,s.target=this,s.manager.dispatchEvent(s),!s.defaultPrevented}};Nt.mixin(YS);const qS={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Nt.mixin(qS);const KS=9,Ao=100,ZS=0,JS=0,mp=2,gp=1,QS=-1e3,tC=-1e3,eC=2;class ty{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ts.tablet||Ts.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${Ao}px`,e.style.height=`${Ao}px`,e.style.position="absolute",e.style.top=`${ZS}px`,e.style.left=`${JS}px`,e.style.zIndex=mp.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${gp}px`,t.style.height=`${gp}px`,t.style.position="absolute",t.style.top=`${QS}px`,t.style.left=`${tC}px`,t.style.zIndex=eC.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){const t=performance.now();if(Ts.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:i,width:r,height:n}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:h}=this.renderer,l=r/o*h,c=n/a*h;let u=this.div;u.style.left=`${e}px`,u.style.top=`${i}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,br(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{u=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(u.style.left=`${(m.tx+p.x*m.a)*l}px`,u.style.top=`${(m.ty+p.y*m.d)*c}px`,u.style.width=`${p.width*m.a*l}px`,u.style.height=`${p.height*m.d*c}px`):(p=f.getBounds(),this.capHitArea(p),u.style.left=`${p.x*l}px`,u.style.top=`${p.y*c}px`,u.style.width=`${p.width*l}px`,u.style.height=`${p.height*c}px`,u.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(u.title=f.accessibleTitle),u.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&u.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==u.title||f.tabIndex!==u.tabIndex)&&(u.title=f.accessibleTitle,u.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${Ao}px`,e.style.height=`${Ao}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=mp.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:i}=t.target,r=this.renderer.events.rootBoundary,n=Object.assign(new Jn(r),{target:i});r.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>r.dispatchEvent(n,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===KS&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}ty.extension={name:"accessibility",type:[q.RendererPlugin,q.CanvasRendererPlugin]};et.add(ty);const ey=class Rc{constructor(t){this.stage=new ve,t=Object.assign({forceCanvas:!1},t),this.renderer=gS(t),Rc._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const i=Rc._plugins.slice(0);i.reverse(),i.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};ey._plugins=[];let sy=ey;et.handleByList(q.Application,sy._plugins);class iy{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;e=r,i=n}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}iy.extension=q.Application;et.add(iy);const _p={loader:q.LoadParser,resolver:q.ResolveParser,cache:q.CacheParser,detection:q.DetectionParser};et.handle(q.Asset,s=>{const t=s.ref;Object.entries(_p).filter(([e])=>!!t[e]).forEach(([e,i])=>et.add(Object.assign(t[e],{extension:t[e].extension??i})))},s=>{const t=s.ref;Object.keys(_p).filter(e=>!!t[e]).forEach(e=>et.remove(t[e]))});class sC{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Hr(s,t){if(Array.isArray(t)){for(const e of t)if(s.startsWith(`data:${e}`))return!0;return!1}return s.startsWith(`data:${t}`)}function di(s,t){const e=s.split("?")[0],i=oe.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const We=(s,t,e=!1)=>(Array.isArray(s)||(s=[s]),t?s.map(i=>typeof i=="string"||e?t(i):i):s),Ic=(s,t)=>{const e=t.split("?")[1];return e&&(s+=`?${e}`),s};function ry(s,t,e,i,r){const n=t[e];for(let o=0;o<n.length;o++){const a=n[o];e<t.length-1?ry(s.replace(i[e],a),t,e+1,i,r):r.push(s.replace(i[e],a))}}function iC(s){const t=/\{(.*?)\}/g,e=s.match(t),i=[];if(e){const r=[];e.forEach(n=>{const o=n.substring(1,n.length-1).split(",");r.push(o)}),ry(s,r,0,e,i)}else i.push(s);return i}const Pa=s=>!Array.isArray(s);let rC=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=We(t);let r;for(let a=0;a<this.parsers.length;a++){const h=this.parsers[a];if(h.test(e)){r=h.getCacheableAssets(i,e);break}}r||(r={},i.forEach(a=>{r[a]=e}));const n=Object.keys(r),o={cacheKeys:n,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),n.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==e&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),e instanceof ct){const a=e;i.forEach(h=>{a.baseTexture!==ct.EMPTY.baseTexture&&pt.addToCache(a.baseTexture,h),ct.addToCache(a,h)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}};const Pi=new rC;let nC=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let r=null,n=null;if(e.loadParser&&(n=this._parserHash[e.loadParser],n||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!n){for(let h=0;h<this.parsers.length;h++){const l=this.parsers[h];if(l.load&&((o=l.test)!=null&&o.call(l,t,e,this))){n=l;break}}if(!n)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await n.load(t,e,this),i.parser=n;for(let h=0;h<this.parsers.length;h++){const l=this.parsers[h];l.parse&&l.parse&&await((a=l.testParse)==null?void 0:a.call(l,r,e,this))&&(r=await l.parse(r,e,this)||r,i.parser=l)}return r})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const r={},n=Pa(t),o=We(t,l=>({alias:[l],src:l})),a=o.length,h=o.map(async l=>{const c=oe.toAbsolute(l.src);if(!r[l.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,l)),r[l.src]=await this.promiseCache[c].promise,e&&e(++i/a)}catch(u){throw delete this.promiseCache[c],delete r[l.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(h),n?r[o[0].src]:r}async unload(t){const e=We(t,i=>({alias:[i],src:i})).map(async i=>{var o,a;const r=oe.toAbsolute(i.src),n=this.promiseCache[r];if(n){const h=await n.promise;delete this.promiseCache[r],(a=(o=n.parser)==null?void 0:o.unload)==null||a.call(o,h,i,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}};var Ze=(s=>(s[s.Low=0]="Low",s[s.Normal=1]="Normal",s[s.High=2]="High",s))(Ze||{});const oC=".json",aC="application/json",hC={extension:{type:q.LoadParser,priority:Ze.Low},name:"loadJson",test(s){return Hr(s,aC)||di(s,oC)},async load(s){return await(await Q.ADAPTER.fetch(s)).json()}};et.add(hC);const lC=".txt",cC="text/plain",uC={name:"loadTxt",extension:{type:q.LoadParser,priority:Ze.Low},test(s){return Hr(s,cC)||di(s,lC)},async load(s){return await(await Q.ADAPTER.fetch(s)).text()}};et.add(uC);const dC=["normal","bold","100","200","300","400","500","600","700","800","900"],fC=[".ttf",".otf",".woff",".woff2"],pC=["font/ttf","font/otf","font/woff","font/woff2"],mC=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function gC(s){const t=oe.extname(s),e=oe.basename(s,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1));let i=e.length>0;for(const n of e)if(!n.match(mC)){i=!1;break}let r=e.join(" ");return i||(r=`"${r.replace(/[\\"]/g,"\\$&")}"`),r}const _C=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function yC(s){return _C.test(s)?s:encodeURI(s)}const xC={extension:{type:q.LoadParser,priority:Ze.Low},name:"loadWebFont",test(s){return Hr(s,pC)||di(s,fC)},async load(s,t){var i,r,n;const e=Q.ADAPTER.getFontFaceSet();if(e){const o=[],a=((i=t.data)==null?void 0:i.family)??gC(s),h=((n=(r=t.data)==null?void 0:r.weights)==null?void 0:n.filter(c=>dC.includes(c)))??["normal"],l=t.data??{};for(let c=0;c<h.length;c++){const u=h[c],d=new FontFace(a,`url(${yC(s)})`,{...l,weight:u});await d.load(),e.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(s){(Array.isArray(s)?s:[s]).forEach(t=>Q.ADAPTER.getFontFaceSet().delete(t))}};et.add(xC);const vC=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Ar=null,Pc=class{constructor(){Ar||(Ar=URL.createObjectURL(new Blob([vC],{type:"application/javascript"}))),this.worker=new Worker(Ar)}};Pc.revokeObjectURL=function(){Ar&&(URL.revokeObjectURL(Ar),Ar=null)};const bC=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Tr=null;class ny{constructor(){Tr||(Tr=URL.createObjectURL(new Blob([bC],{type:"application/javascript"}))),this.worker=new Worker(Tr)}}ny.revokeObjectURL=function(){Tr&&(URL.revokeObjectURL(Tr),Tr=null)};let yp=0,nl;class wC{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Pc;e.addEventListener("message",i=>{e.terminate(),Pc.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){nl===void 0&&(nl=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<nl&&(this._createdWorkers++,t=new ny().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((r,n)=>{this.queue.push({id:t,arguments:e,resolve:r,reject:n})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[yp]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:yp++,id:i})}}const xp=new wC;function Qn(s,t,e){s.resource.internal=!0;const i=new ct(s),r=()=>{delete t.promiseCache[e],Pi.has(e)&&Pi.remove(e)};return i.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),r())}),i.once("destroyed",()=>{s.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),i}const EC=[".jpeg",".jpg",".png",".webp",".avif"],AC=["image/jpeg","image/png","image/webp","image/avif"];async function TC(s){const t=await Q.ADAPTER.fetch(s);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${s}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const hh={name:"loadTextures",extension:{type:q.LoadParser,priority:Ze.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(s){return Hr(s,AC)||di(s,EC)},async load(s,t,e){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let r;i?this.config.preferWorkers&&await xp.isImageBitmapSupported()?r=await xp.loadImageBitmap(s):r=await TC(s):r=await new Promise((h,l)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=s,c.complete?h(c):(c.onload=()=>h(c),c.onerror=u=>l(u))});const n={...t.data};n.resolution??(n.resolution=Ms(s)),i&&((a=n.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(n.resourceOptions={...n.resourceOptions},n.resourceOptions.ownsImageBitmap=!0);const o=new pt(r,n);return o.resource.src=s,Qn(o,e,s)},unload(s){s.destroy(!0)}};et.add(hh);const SC=".svg",CC="image/svg+xml",RC={extension:{type:q.LoadParser,priority:Ze.High},name:"loadSVG",test(s){return Hr(s,CC)||di(s,SC)},async testParse(s){return vc.test(s)},async parse(s,t,e){var n;const i=new vc(s,(n=t==null?void 0:t.data)==null?void 0:n.resourceOptions);await i.load();const r=new pt(i,{resolution:Ms(s),...t==null?void 0:t.data});return r.resource.src=t.src,Qn(r,e,t.src)},async load(s,t){return(await Q.ADAPTER.fetch(s)).text()},unload:hh.unload};et.add(RC);const IC=[".mp4",".m4v",".webm",".ogv"],PC=["video/mp4","video/webm","video/ogg"],MC={name:"loadVideo",extension:{type:q.LoadParser,priority:Ze.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(s){return Hr(s,PC)||di(s,IC)},async load(s,t,e){var o;let i;const r=await(await Q.ADAPTER.fetch(s)).blob(),n=URL.createObjectURL(r);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions,autoLoad:!0},h=new W_(n,a);await h.load();const l=new pt(h,{alphaMode:await VA(),resolution:Ms(s),...t==null?void 0:t.data});l.resource.src=s,i=Qn(l,e,s),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(n)})}catch(a){throw URL.revokeObjectURL(n),a}return i},unload(s){s.destroy(!0)}};et.add(MC);let BC=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,name:i,src:r,srcs:n}=t;return We(e||i||r||n,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(r=>{const n=r.src??r.srcs,o=r.alias??r.name;let a;if(typeof o=="string"){const h=this._createBundleAssetId(t,o);i.push(h),a=[o,h]}else{const h=o.map(l=>this._createBundleAssetId(t,l));i.push(...h),a=[...o,...h]}this.add({...r,alias:a,src:n})}):Object.keys(e).forEach(r=>{const n=[r,this._createBundleAssetId(t,r)];if(typeof e[r]=="string")this.add({alias:n,src:e[r]});else if(Array.isArray(e[r]))this.add({alias:n,src:e[r]});else{const o=e[r],a=o.src??o.srcs;this.add({...o,alias:n,src:Array.isArray(a)?a:[a]})}i.push(...n)}),this._bundles[t]=i}add(t,e,i,r,n){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(yt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:e,data:i,format:r,loadParser:n})):Array.isArray(t)?o.push(...t):o.push(t);let a;a=h=>{this.hasKey(h)&&console.warn(`[Resolver] already has key: ${h} overwriting`)},We(o).forEach(h=>{const{src:l,srcs:c}=h;let{data:u,format:d,loadParser:f}=h;const p=We(l||c).map(y=>typeof y=="string"?iC(y):Array.isArray(y)?y:[y]),m=this.getAlias(h);Array.isArray(m)?m.forEach(a):a(m);const g=[];p.forEach(y=>{y.forEach(v=>{let _={};if(typeof v!="object"){_.src=v;for(let w=0;w<this._parsers.length;w++){const A=this._parsers[w];if(A.test(v)){_=A.parse(v);break}}}else u=v.data??u,d=v.format??d,f=v.loadParser??f,_={..._,...v};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:m,data:u,format:d,loadParser:f}),g.push(_)})}),m.forEach(y=>{this._assetMap[y]=g})})}resolveBundle(t){const e=Pa(t);t=We(t);const i={};return t.forEach(r=>{const n=this._bundles[r];if(n){const o=this.resolve(n),a={};for(const h in o){const l=o[h];a[this._extractAssetIdFromBundle(r,h)]=l}i[r]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const r in e)i[r]=e[r].src;return i}return e.src}resolve(t){const e=Pa(t);t=We(t);const i={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let n=this._assetMap[r];const o=n[0],a=this._getPreferredOrder(n);a==null||a.priority.forEach(h=>{a.params[h].forEach(l=>{const c=n.filter(u=>u[h]?u[h]===l:!1);c.length&&(n=c)})}),this._resolverHash[r]=n[0]??o}else this._resolverHash[r]=this.buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],r=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:i,data:r,loadParser:n,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=oe.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=n??t.loadParser,t.format=o??t.format??oe.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}};class FC{constructor(){this._detections=[],this._initialized=!1,this.resolver=new BC,this.loader=new nC,this.cache=Pi,this._backgroundLoader=new sC(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var n,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const e=((n=t.texturePreference)==null?void 0:n.resolution)??1,i=typeof e=="number"?[e]:e,r=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,i,r,n){this.resolver.add(t,e,i,r,n)}async load(t,e){this._initialized||await this.init();const i=Pa(t),r=We(t).map(a=>{if(typeof a!="string"){const h=this.resolver.getAlias(a);return h.some(l=>!this.resolver.hasKey(l))&&this.add(a),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),n=this.resolver.resolve(r),o=await this._mapLoadToResolve(n,e);return i?o[r[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const r=this.resolver.resolveBundle(t),n={},o=Object.keys(r);let a=0,h=0;const l=()=>{e==null||e(++a/h)},c=o.map(u=>{const d=r[u];return h+=Object.keys(d).length,this._mapLoadToResolve(d,l).then(f=>{n[u]=f})});return await Promise.all(c),i?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Pi.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Pi.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),r=Object.keys(t);this._backgroundLoader.active=!1;const n=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach((a,h)=>{const l=n[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[r[h]]=l,Pi.set(c,l)}),o}async unload(t){this._initialized||await this.init();const e=We(t).map(r=>typeof r!="string"?r.src:r),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=We(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(r=>this._unloadFromResolved(e[r]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Pi.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,r)=>e.indexOf(i)===r),e}get detections(){return this._detections}get preferWorkers(){return hh.config.preferWorkers}set preferWorkers(t){yt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const Zs=new FC;et.handleByList(q.LoadParser,Zs.loader.parsers).handleByList(q.ResolveParser,Zs.resolver.parsers).handleByList(q.CacheParser,Zs.cache.parsers).handleByList(q.DetectionParser,Zs.detections);const OC={extension:q.CacheParser,test:s=>Array.isArray(s)&&s.every(t=>t instanceof ct),getCacheableAssets:(s,t)=>{const e={};return s.forEach(i=>{t.forEach((r,n)=>{e[i+(n===0?"":n+1)]=r})}),e}};et.add(OC);async function oy(s){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=s});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(s)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const DC={extension:{type:q.DetectionParser,priority:1},test:async()=>oy("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async s=>[...s,"avif"],remove:async s=>s.filter(t=>t!=="avif")};et.add(DC);const LC={extension:{type:q.DetectionParser,priority:0},test:async()=>oy("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async s=>[...s,"webp"],remove:async s=>s.filter(t=>t!=="webp")};et.add(LC);const vp=["png","jpg","jpeg"],NC={extension:{type:q.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async s=>[...s,...vp],remove:async s=>s.filter(t=>!vp.includes(t))};et.add(NC);const kC="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ku(s){return kC?!1:document.createElement("video").canPlayType(s)!==""}const UC={extension:{type:q.DetectionParser,priority:0},test:async()=>ku("video/webm"),add:async s=>[...s,"webm"],remove:async s=>s.filter(t=>t!=="webm")};et.add(UC);const GC={extension:{type:q.DetectionParser,priority:0},test:async()=>ku("video/mp4"),add:async s=>[...s,"mp4","m4v"],remove:async s=>s.filter(t=>t!=="mp4"&&t!=="m4v")};et.add(GC);const $C={extension:{type:q.DetectionParser,priority:0},test:async()=>ku("video/ogg"),add:async s=>[...s,"ogv"],remove:async s=>s.filter(t=>t!=="ogv")};et.add($C);const HC={extension:q.ResolveParser,test:hh.test,parse:s=>{var t;return{resolution:parseFloat(((t=Q.RETINA_PREFIX.exec(s))==null?void 0:t[1])??"1"),format:oe.extname(s).slice(1),src:s}}};et.add(HC);var he=(s=>(s[s.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",s[s.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",s[s.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",s[s.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",s[s.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",s[s.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",s[s.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",s[s.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",s[s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",s[s.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",s[s.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",s[s.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",s[s.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",s[s.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",s[s.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",s[s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",s[s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",s[s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",s))(he||{});const Ma={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let is,nr;function bp(){nr={bptc:is.getExtension("EXT_texture_compression_bptc"),astc:is.getExtension("WEBGL_compressed_texture_astc"),etc:is.getExtension("WEBGL_compressed_texture_etc"),s3tc:is.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:is.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:is.getExtension("WEBGL_compressed_texture_pvrtc")||is.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:is.getExtension("WEBGL_compressed_texture_etc1"),atc:is.getExtension("WEBGL_compressed_texture_atc")}}const XC={extension:{type:q.DetectionParser,priority:2},test:async()=>{const s=Q.ADAPTER.createCanvas().getContext("webgl");return s?(is=s,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async s=>{nr||bp();const t=[];for(const e in nr)nr[e]&&t.push(e);return[...t,...s]},remove:async s=>(nr||bp(),s.filter(t=>!(t in nr)))};et.add(XC);class VC extends sh{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,r;typeof t=="string"?(i=t,r=new Uint8Array):(i=null,r=t),super(r,e),this.origin=i,this.buffer=r?new oc(r):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new oc(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class ki extends VC{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=ki._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||ki._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){const r=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;r.pixelStorei(r.UNPACK_ALIGNMENT,4);for(let n=0,o=this.levels;n<o;n++){const{levelID:a,levelWidth:h,levelHeight:l,levelBuffer:c}=this._levelBuffers[n];r.compressedTexImage2D(r.TEXTURE_2D,a,this.format,h,l,0,c)}return!0}onBlobLoaded(){this._levelBuffers=ki._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,e,i,r,n,o,a){const h=new Array(i);let l=t.byteOffset,c=o,u=a,d=c+r-1&~(r-1),f=u+n-1&~(n-1),p=d*f*Ma[e];for(let m=0;m<i;m++)h[m]={levelID:m,levelWidth:i>1?c:d,levelHeight:i>1?u:f,levelBuffer:new Uint8Array(t.buffer,l,p)},l+=p,c=c>>1||1,u=u>>1||1,d=c+r-1&~(r-1),f=u+n-1&~(n-1),p=d*f*Ma[e];return h}}const ol=4,To=124,WC=32,wp=20,zC=542327876,So={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},jC={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Co={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},YC=1,qC=2,KC=4,ZC=64,JC=512,QC=131072,tR=827611204,eR=861165636,sR=894720068,iR=808540228,rR=4,nR={[tR]:he.COMPRESSED_RGBA_S3TC_DXT1_EXT,[eR]:he.COMPRESSED_RGBA_S3TC_DXT3_EXT,[sR]:he.COMPRESSED_RGBA_S3TC_DXT5_EXT},oR={70:he.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:he.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:he.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:he.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:he.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:he.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:he.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:he.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:he.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:he.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:he.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:he.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:he.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function aR(s){const t=new Uint32Array(s);if(t[0]!==zC)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(s,0,To/Uint32Array.BYTES_PER_ELEMENT),i=e[So.HEIGHT],r=e[So.WIDTH],n=e[So.MIPMAP_COUNT],o=new Uint32Array(s,So.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,WC/Uint32Array.BYTES_PER_ELEMENT),a=o[YC];if(a&KC){const h=o[jC.FOURCC];if(h!==iR){const v=nR[h],_=ol+To,w=new Uint8Array(s,_);return[new ki(w,{format:v,width:r,height:i,levels:n})]}const l=ol+To,c=new Uint32Array(t.buffer,l,wp/Uint32Array.BYTES_PER_ELEMENT),u=c[Co.DXGI_FORMAT],d=c[Co.RESOURCE_DIMENSION],f=c[Co.MISC_FLAG],p=c[Co.ARRAY_SIZE],m=oR[u];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${u}`);if(f===rR)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const g=new Array,y=ol+To+wp;if(p===1)g.push(new Uint8Array(s,y));else{const v=Ma[m];let _=0,w=r,A=i;for(let P=0;P<n;P++){const S=Math.max(1,w+3&-4),B=Math.max(1,A+3&-4),$=S*B*v;_+=$,w=w>>>1,A=A>>>1}let R=y;for(let P=0;P<p;P++)g.push(new Uint8Array(s,R,_)),R+=_}return g.map(v=>new ki(v,{format:m,width:r,height:i,levels:n}))}throw a&ZC?new Error("DDSParser does not support uncompressed texture data."):a&JC?new Error("DDSParser does not supported YUV uncompressed texture data."):a&QC?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&qC?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Ep=[171,75,84,88,32,49,49,187,13,10,26,10],hR=67305985,Ue={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Mc=64,Ap={[it.UNSIGNED_BYTE]:1,[it.UNSIGNED_SHORT]:2,[it.INT]:4,[it.UNSIGNED_INT]:4,[it.FLOAT]:4,[it.HALF_FLOAT]:8},lR={[D.RGBA]:4,[D.RGB]:3,[D.RG]:2,[D.RED]:1,[D.LUMINANCE]:1,[D.LUMINANCE_ALPHA]:2,[D.ALPHA]:1},cR={[it.UNSIGNED_SHORT_4_4_4_4]:2,[it.UNSIGNED_SHORT_5_5_5_1]:2,[it.UNSIGNED_SHORT_5_6_5]:2};function uR(s,t,e=!1){const i=new DataView(t);if(!dR(s,i))return null;const r=i.getUint32(Ue.ENDIANNESS,!0)===hR,n=i.getUint32(Ue.GL_TYPE,r),o=i.getUint32(Ue.GL_FORMAT,r),a=i.getUint32(Ue.GL_INTERNAL_FORMAT,r),h=i.getUint32(Ue.PIXEL_WIDTH,r),l=i.getUint32(Ue.PIXEL_HEIGHT,r)||1,c=i.getUint32(Ue.PIXEL_DEPTH,r)||1,u=i.getUint32(Ue.NUMBER_OF_ARRAY_ELEMENTS,r)||1,d=i.getUint32(Ue.NUMBER_OF_FACES,r),f=i.getUint32(Ue.NUMBER_OF_MIPMAP_LEVELS,r),p=i.getUint32(Ue.BYTES_OF_KEY_VALUE_DATA,r);if(l===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const m=4,g=4,y=h+3&-4,v=l+3&-4,_=new Array(u);let w=h*l;n===0&&(w=y*v);let A;if(n!==0?Ap[n]?A=Ap[n]*lR[o]:A=cR[n]:A=Ma[a],A===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const R=e?pR(i,p,r):null;let P=w*A,S=h,B=l,$=y,rt=v,V=Mc+p;for(let T=0;T<f;T++){const F=i.getUint32(V,r);let K=V+4;for(let z=0;z<u;z++){let H=_[z];H||(H=_[z]=new Array(f)),H[T]={levelID:T,levelWidth:f>1||n!==0?S:$,levelHeight:f>1||n!==0?B:rt,levelBuffer:new Uint8Array(t,K,P)},K+=P}V+=F+4,V=V%4!==0?V+4-V%4:V,S=S>>1||1,B=B>>1||1,$=S+m-1&~(m-1),rt=B+g-1&~(g-1),P=$*rt*A}return n!==0?{uncompressed:_.map(T=>{let F=T[0].levelBuffer,K=!1;return n===it.FLOAT?F=new Float32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4):n===it.UNSIGNED_INT?(K=!0,F=new Uint32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4)):n===it.INT&&(K=!0,F=new Int32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4)),{resource:new sh(F,{width:T[0].levelWidth,height:T[0].levelHeight}),type:n,format:K?fR(o):o}}),kvData:R}:{compressed:_.map(T=>new ki(null,{format:a,width:h,height:l,levels:f,levelBuffers:T})),kvData:R}}function dR(s,t){for(let e=0;e<Ep.length;e++)if(t.getUint8(e)!==Ep[e])return console.error(`${s} is not a valid *.ktx file!`),!1;return!0}function fR(s){switch(s){case D.RGBA:return D.RGBA_INTEGER;case D.RGB:return D.RGB_INTEGER;case D.RG:return D.RG_INTEGER;case D.RED:return D.RED_INTEGER;default:return s}}function pR(s,t,e){const i=new Map;let r=0;for(;r<t;){const n=s.getUint32(Mc+r,e),o=Mc+r+4,a=3-(n+3)%4;if(n===0||n>t-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let h=0;for(;h<n&&s.getUint8(o+h)!==0;h++);if(h===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const l=new TextDecoder().decode(new Uint8Array(s.buffer,o,h)),c=new DataView(s.buffer,o+h+1,n-h-1);i.set(l,c),r+=4+n+a}return i}const mR={extension:{type:q.LoadParser,priority:Ze.High},name:"loadDDS",test(s){return di(s,".dds")},async load(s,t,e){const i=await(await Q.ADAPTER.fetch(s)).arrayBuffer(),r=aR(i).map(n=>{const o=new pt(n,{mipmap:ys.OFF,alphaMode:_e.NO_PREMULTIPLIED_ALPHA,resolution:Ms(s),...t.data});return Qn(o,e,s)});return r.length===1?r[0]:r},unload(s){Array.isArray(s)?s.forEach(t=>t.destroy(!0)):s.destroy(!0)}};et.add(mR);const gR={extension:{type:q.LoadParser,priority:Ze.High},name:"loadKTX",test(s){return di(s,".ktx")},async load(s,t,e){const i=await(await Q.ADAPTER.fetch(s)).arrayBuffer(),{compressed:r,uncompressed:n,kvData:o}=uR(s,i),a=r??n,h={mipmap:ys.OFF,alphaMode:_e.NO_PREMULTIPLIED_ALPHA,resolution:Ms(s),...t.data},l=a.map(c=>{a===n&&Object.assign(h,{type:c.type,format:c.format});const u=c.resource??c,d=new pt(u,h);return d.ktxKeyValueData=o,Qn(d,e,s)});return l.length===1?l[0]:l},unload(s){Array.isArray(s)?s.forEach(t=>t.destroy(!0)):s.destroy(!0)}};et.add(gR);const _R=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],yR={extension:q.ResolveParser,test:s=>{const t=oe.extname(s).slice(1);return["basis","ktx","dds"].includes(t)},parse:s=>{var i,r;const t=s.split("."),e=t.pop();if(["ktx","dds"].includes(e)){const n=t.pop();if(_R.includes(n))return{resolution:parseFloat(((i=Q.RETINA_PREFIX.exec(s))==null?void 0:i[1])??"1"),format:n,src:s}}return{resolution:parseFloat(((r=Q.RETINA_PREFIX.exec(s))==null?void 0:r[1])??"1"),format:e,src:s}}};et.add(yR);const Ro=new gt,xR=4,ay=class ln{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,i,r){const n=new Image;return n.src=await this.base64(t,e,i,r),n}async base64(t,e,i,r){const n=this.canvas(t,r);if(n.toBlob!==void 0)return new Promise((o,a)=>{n.toBlob(h=>{if(!h){a(new Error("ICanvas.toBlob failed!"));return}const l=new FileReader;l.onload=()=>o(l.result),l.onerror=a,l.readAsDataURL(h)},e,i)});if(n.toDataURL!==void 0)return n.toDataURL(e,i);if(n.convertToBlob!==void 0){const o=await n.convertToBlob({type:e,quality:i});return new Promise((a,h)=>{const l=new FileReader;l.onload=()=>a(l.result),l.onerror=h,l.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:i,width:r,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);o&&ln._flipY(i,r,n),a&&ln._unpremultiplyAlpha(i);const h=new rT(r,n,1),l=new ImageData(new Uint8ClampedArray(i.buffer),r,n);return h.context.putImageData(l,0,0),h.canvas}pixels(t,e){const{pixels:i,width:r,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);return o&&ln._flipY(i,r,n),a&&ln._unpremultiplyAlpha(i),i}_rawPixels(t,e){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let r,n=!1,o=!1,a,h=!1;t&&(t instanceof zi?a=t:(a=i.generateTexture(t,{region:e,resolution:i.resolution,multisample:i.multisample}),h=!0,e&&(Ro.width=e.width,Ro.height=e.height,e=Ro)));const l=i.gl;if(a){if(r=a.baseTexture.resolution,e=e??a.frame,n=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===D.RGBA,!h){i.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[i.CONTEXT_UID];f.blitFramebuffer&&i.framebuffer.bind(f.blitFramebuffer)}}else r=i.resolution,e||(e=Ro,e.width=i.width/r,e.height=i.height/r),n=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const c=Math.max(Math.round(e.width*r),1),u=Math.max(Math.round(e.height*r),1),d=new Uint8Array(xR*c*u);return l.readPixels(Math.round(e.x*r),Math.round(e.y*r),c,u,l.RGBA,l.UNSIGNED_BYTE,d),h&&(a==null||a.destroy(!0)),{pixels:d,width:c,height:u,flipY:n,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(t,e,i){const r=e<<2,n=i>>1,o=new Uint8Array(r);for(let a=0;a<n;a++){const h=a*r,l=(i-a-1)*r;o.set(t.subarray(h,h+r)),t.copyWithin(h,l,l+r),t.set(o,l)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let i=0;i<e;i+=4){const r=t[i+3];if(r!==0){const n=255.001/r;t[i]=t[i]*n+.5,t[i+1]=t[i+1]*n+.5,t[i+2]=t[i+2]*n+.5}}}};ay.extension={name:"extract",type:q.RendererSystem};let vR=ay;et.add(vR);const Ba={build(s){const t=s.points;let e,i,r,n,o,a;if(s.type===le.CIRC){const p=s.shape;e=p.x,i=p.y,o=a=p.radius,r=n=0}else if(s.type===le.ELIP){const p=s.shape;e=p.x,i=p.y,o=p.width,a=p.height,r=n=0}else{const p=s.shape,m=p.width/2,g=p.height/2;e=p.x+m,i=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),r=m-o,n=g-a}if(!(o>=0&&a>=0&&r>=0&&n>=0)){t.length=0;return}const h=Math.ceil(2.3*Math.sqrt(o+a)),l=h*8+(r?4:0)+(n?4:0);if(t.length=l,l===0)return;if(h===0){t.length=8,t[0]=t[6]=e+r,t[1]=t[3]=i+n,t[2]=t[4]=e-r,t[5]=t[7]=i-n;return}let c=0,u=h*4+(r?2:0)+2,d=u,f=l;{const p=r+o,m=n,g=e+p,y=e-p,v=i+m;if(t[c++]=g,t[c++]=v,t[--u]=v,t[--u]=y,n){const _=i-m;t[d++]=y,t[d++]=_,t[--f]=_,t[--f]=g}}for(let p=1;p<h;p++){const m=Math.PI/2*(p/h),g=r+Math.cos(m)*o,y=n+Math.sin(m)*a,v=e+g,_=e-g,w=i+y,A=i-y;t[c++]=v,t[c++]=w,t[--u]=w,t[--u]=_,t[d++]=_,t[d++]=A,t[--f]=A,t[--f]=v}{const p=r,m=n+a,g=e+p,y=e-p,v=i+m,_=i-m;t[c++]=g,t[c++]=v,t[--f]=_,t[--f]=g,r&&(t[c++]=y,t[c++]=v,t[--f]=_,t[--f]=y)}},triangulate(s,t){const e=s.points,i=t.points,r=t.indices;if(e.length===0)return;let n=i.length/2;const o=n;let a,h;if(s.type!==le.RREC){const c=s.shape;a=c.x,h=c.y}else{const c=s.shape;a=c.x+c.width/2,h=c.y+c.height/2}const l=s.matrix;i.push(s.matrix?l.a*a+l.c*h+l.tx:a,s.matrix?l.b*a+l.d*h+l.ty:h),n++,i.push(e[0],e[1]);for(let c=2;c<e.length;c+=2)i.push(e[c],e[c+1]),r.push(n++,o,n);r.push(o+1,o,n)}};function Tp(s,t=!1){const e=s.length;if(e<6)return;let i=0;for(let r=0,n=s[e-2],o=s[e-1];r<e;r+=2){const a=s[r],h=s[r+1];i+=(a-n)*(h+o),n=a,o=h}if(!t&&i>0||t&&i<=0){const r=e/2;for(let n=r+r%2;n<e;n+=2){const o=e-n-2,a=e-n-1,h=n,l=n+1;[s[o],s[h]]=[s[h],s[o]],[s[a],s[l]]=[s[l],s[a]]}}}const hy={build(s){s.points=s.shape.points.slice()},triangulate(s,t){let e=s.points;const i=s.holes,r=t.points,n=t.indices;if(e.length>=6){Tp(e,!1);const o=[];for(let l=0;l<i.length;l++){const c=i[l];Tp(c.points,!0),o.push(e.length/2),e=e.concat(c.points)}const a=uw(e,o,2);if(!a)return;const h=r.length/2;for(let l=0;l<a.length;l+=3)n.push(a[l]+h),n.push(a[l+1]+h),n.push(a[l+2]+h);for(let l=0;l<e.length;l++)r.push(e[l])}}},bR={build(s){const t=s.shape,e=t.x,i=t.y,r=t.width,n=t.height,o=s.points;o.length=0,r>=0&&n>=0&&o.push(e,i,e+r,i,e+r,i+n,e,i+n)},triangulate(s,t){const e=s.points,i=t.points;if(e.length===0)return;const r=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},wR={build(s){Ba.build(s)},triangulate(s,t){Ba.triangulate(s,t)}};var Me=(s=>(s.MITER="miter",s.BEVEL="bevel",s.ROUND="round",s))(Me||{}),Js=(s=>(s.BUTT="butt",s.ROUND="round",s.SQUARE="square",s))(Js||{});const Br={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(s,t=20){if(!this.adaptive||!s||isNaN(s))return t;let e=Math.ceil(s/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class Sp{static curveTo(t,e,i,r,n,o){const a=o[o.length-2],h=o[o.length-1]-e,l=a-t,c=r-e,u=i-t,d=Math.abs(h*u-l*c);if(d<1e-8||n===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const f=h*h+l*l,p=c*c+u*u,m=h*c+l*u,g=n*Math.sqrt(f)/d,y=n*Math.sqrt(p)/d,v=g*m/f,_=y*m/p,w=g*u+y*l,A=g*c+y*h,R=l*(y+v),P=h*(y+v),S=u*(g+_),B=c*(g+_),$=Math.atan2(P-A,R-w),rt=Math.atan2(B-A,S-w);return{cx:w+t,cy:A+e,radius:n,startAngle:$,endAngle:rt,anticlockwise:l*c>u*h}}static arc(t,e,i,r,n,o,a,h,l){const c=a-o,u=Br._segmentsCount(Math.abs(c)*n,Math.ceil(Math.abs(c)/wa)*40),d=c/(u*2),f=d*2,p=Math.cos(d),m=Math.sin(d),g=u-1,y=g%1/g;for(let v=0;v<=g;++v){const _=v+y*v,w=d+o+f*_,A=Math.cos(w),R=-Math.sin(w);l.push((p*A+m*R)*n+i,(p*-R+m*A)*n+r)}}}class ER{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Uu{static curveLength(t,e,i,r,n,o,a,h){let l=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0,y=0,v=0,_=0,w=t,A=e;for(let R=1;R<=10;++R)c=R/10,u=c*c,d=u*c,f=1-c,p=f*f,m=p*f,g=m*t+3*p*c*i+3*f*u*n+d*a,y=m*e+3*p*c*r+3*f*u*o+d*h,v=w-g,_=A-y,w=g,A=y,l+=Math.sqrt(v*v+_*_);return l}static curveTo(t,e,i,r,n,o,a){const h=a[a.length-2],l=a[a.length-1];a.length-=2;const c=Br._segmentsCount(Uu.curveLength(h,l,t,e,i,r,n,o));let u=0,d=0,f=0,p=0,m=0;a.push(h,l);for(let g=1,y=0;g<=c;++g)y=g/c,u=1-y,d=u*u,f=d*u,p=y*y,m=p*y,a.push(f*h+3*d*y*t+3*u*p*i+m*n,f*l+3*d*y*e+3*u*p*r+m*o)}}function Cp(s,t,e,i,r,n,o,a){const h=s-e*r,l=t-i*r,c=s+e*n,u=t+i*n;let d,f;o?(d=i,f=-e):(d=-i,f=e);const p=h+d,m=l+f,g=c+d,y=u+f;return a.push(p,m,g,y),2}function _i(s,t,e,i,r,n,o,a){const h=e-s,l=i-t;let c=Math.atan2(h,l),u=Math.atan2(r-s,n-t);a&&c<u?c+=Math.PI*2:!a&&c>u&&(u+=Math.PI*2);let d=c;const f=u-c,p=Math.abs(f),m=Math.sqrt(h*h+l*l),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,y=f/g;if(d+=y,a){o.push(s,t,e,i);for(let v=1,_=d;v<g;v++,_+=y)o.push(s,t,s+Math.sin(_)*m,t+Math.cos(_)*m);o.push(s,t,r,n)}else{o.push(e,i,s,t);for(let v=1,_=d;v<g;v++,_+=y)o.push(s+Math.sin(_)*m,t+Math.cos(_)*m,s,t);o.push(r,n,s,t)}return g*2}function AR(s,t){const e=s.shape;let i=s.points||e.points.slice();const r=t.closePointEps;if(i.length===0)return;const n=s.lineStyle,o=new Rt(i[0],i[1]),a=new Rt(i[i.length-2],i[i.length-1]),h=e.type!==le.POLY||e.closeStroke,l=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(h){i=i.slice(),l&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const H=(o.x+a.x)*.5,j=(a.y+o.y)*.5;i.unshift(H,j),i.push(H,j)}const c=t.points,u=i.length/2;let d=i.length;const f=c.length/2,p=n.width/2,m=p*p,g=n.miterLimit*n.miterLimit;let y=i[0],v=i[1],_=i[2],w=i[3],A=0,R=0,P=-(v-w),S=y-_,B=0,$=0,rt=Math.sqrt(P*P+S*S);P/=rt,S/=rt,P*=p,S*=p;const V=n.alignment,T=(1-V)*2,F=V*2;h||(n.cap===Js.ROUND?d+=_i(y-P*(T-F)*.5,v-S*(T-F)*.5,y-P*T,v-S*T,y+P*F,v+S*F,c,!0)+2:n.cap===Js.SQUARE&&(d+=Cp(y,v,P,S,T,F,!0,c))),c.push(y-P*T,v-S*T,y+P*F,v+S*F);for(let H=1;H<u-1;++H){y=i[(H-1)*2],v=i[(H-1)*2+1],_=i[H*2],w=i[H*2+1],A=i[(H+1)*2],R=i[(H+1)*2+1],P=-(v-w),S=y-_,rt=Math.sqrt(P*P+S*S),P/=rt,S/=rt,P*=p,S*=p,B=-(w-R),$=_-A,rt=Math.sqrt(B*B+$*$),B/=rt,$/=rt,B*=p,$*=p;const j=_-y,At=v-w,L=_-A,k=R-w,lt=j*L+At*k,wt=At*L-k*j,Tt=wt<0;if(Math.abs(wt)<.001*Math.abs(lt)){c.push(_-P*T,w-S*T,_+P*F,w+S*F),lt>=0&&(n.join===Me.ROUND?d+=_i(_,w,_-P*T,w-S*T,_-B*T,w-$*T,c,!1)+4:d+=2,c.push(_-B*F,w-$*F,_+B*T,w+$*T));continue}const kt=(-P+y)*(-S+w)-(-P+_)*(-S+v),_t=(-B+A)*(-$+w)-(-B+_)*(-$+R),C=(j*_t-L*kt)/wt,X=(k*kt-At*_t)/wt,U=(C-_)*(C-_)+(X-w)*(X-w),Y=_+(C-_)*T,nt=w+(X-w)*T,dt=_-(C-_)*F,x=w-(X-w)*F,b=Math.min(j*j+At*At,L*L+k*k),E=Tt?T:F,M=b+E*E*m,I=U<=M;let N=n.join;if(N===Me.MITER&&U/m>g&&(N=Me.BEVEL),I)switch(N){case Me.MITER:{c.push(Y,nt,dt,x);break}case Me.BEVEL:{Tt?c.push(Y,nt,_+P*F,w+S*F,Y,nt,_+B*F,w+$*F):c.push(_-P*T,w-S*T,dt,x,_-B*T,w-$*T,dt,x),d+=2;break}case Me.ROUND:{Tt?(c.push(Y,nt,_+P*F,w+S*F),d+=_i(_,w,_+P*F,w+S*F,_+B*F,w+$*F,c,!0)+4,c.push(Y,nt,_+B*F,w+$*F)):(c.push(_-P*T,w-S*T,dt,x),d+=_i(_,w,_-P*T,w-S*T,_-B*T,w-$*T,c,!1)+4,c.push(_-B*T,w-$*T,dt,x));break}}else{switch(c.push(_-P*T,w-S*T,_+P*F,w+S*F),N){case Me.MITER:{Tt?c.push(dt,x,dt,x):c.push(Y,nt,Y,nt),d+=2;break}case Me.ROUND:{Tt?d+=_i(_,w,_+P*F,w+S*F,_+B*F,w+$*F,c,!0)+2:d+=_i(_,w,_-P*T,w-S*T,_-B*T,w-$*T,c,!1)+2;break}}c.push(_-B*T,w-$*T,_+B*F,w+$*F),d+=2}}y=i[(u-2)*2],v=i[(u-2)*2+1],_=i[(u-1)*2],w=i[(u-1)*2+1],P=-(v-w),S=y-_,rt=Math.sqrt(P*P+S*S),P/=rt,S/=rt,P*=p,S*=p,c.push(_-P*T,w-S*T,_+P*F,w+S*F),h||(n.cap===Js.ROUND?d+=_i(_-P*(T-F)*.5,w-S*(T-F)*.5,_-P*T,w-S*T,_+P*F,w+S*F,c,!1)+2:n.cap===Js.SQUARE&&(d+=Cp(_,w,P,S,T,F,!1,c)));const K=t.indices,z=Br.epsilon*Br.epsilon;for(let H=f;H<d+f-2;++H)y=c[H*2],v=c[H*2+1],_=c[(H+1)*2],w=c[(H+1)*2+1],A=c[(H+2)*2],R=c[(H+2)*2+1],!(Math.abs(y*(w-R)+_*(R-v)+A*(v-w))<z)&&K.push(H,H+1,H+2)}function TR(s,t){let e=0;const i=s.shape,r=s.points||i.points,n=i.type!==le.POLY||i.closeStroke;if(r.length===0)return;const o=t.points,a=t.indices,h=r.length/2,l=o.length/2;let c=l;for(o.push(r[0],r[1]),e=1;e<h;e++)o.push(r[e*2],r[e*2+1]),a.push(c,c+1),c++;n&&a.push(c,l)}function Rp(s,t){s.lineStyle.native?TR(s,t):AR(s,t)}class Gu{static curveLength(t,e,i,r,n,o){const a=t-2*i+n,h=e-2*r+o,l=2*i-2*t,c=2*r-2*e,u=4*(a*a+h*h),d=4*(a*l+h*c),f=l*l+c*c,p=2*Math.sqrt(u+d+f),m=Math.sqrt(u),g=2*u*m,y=2*Math.sqrt(f),v=d/m;return(g*p+m*d*(p-y)+(4*f*u-d*d)*Math.log((2*m+v+p)/(v+y)))/(4*g)}static curveTo(t,e,i,r,n){const o=n[n.length-2],a=n[n.length-1],h=Br._segmentsCount(Gu.curveLength(o,a,t,e,i,r));let l=0,c=0;for(let u=1;u<=h;++u){const d=u/h;l=o+(t-o)*d,c=a+(e-a)*d,n.push(l+(t+(i-t)*d-l)*d,c+(e+(r-e)*d-c)*d)}}}const al={[le.POLY]:hy,[le.CIRC]:Ba,[le.ELIP]:Ba,[le.RECT]:bR,[le.RREC]:wR},Ip=[],Io=[];class Fa{constructor(t,e=null,i=null,r=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type}clone(){return new Fa(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Qi=new Rt,ly=class cy extends a_{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Ca,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Io.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),Ip.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,r=null){const n=new Fa(t,e,i,r);return this.graphicsData.push(n),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const i=new Fa(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let i=0;i<e.length;++i){const r=e[i];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,Qi):Qi.copyFrom(t),r.shape.contains(Qi.x,Qi.y))){let n=!1;if(r.holes){for(let o=0;o<r.holes.length;o++)if(r.holes[o].shape.contains(Qi.x,Qi.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let i=null,r=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],r=i.style);for(let h=this.shapeIndex;h<e.length;h++){this.shapeIndex++;const l=e[h],c=l.fillStyle,u=l.lineStyle;al[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(c.visible||u.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?c:u;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=Rs.REPEAT,d===0?this.processFill(l):this.processLine(l);const y=this.points.length/2-g;y!==0&&(i&&!this._compareStyles(r,f)&&(i.end(m,g),i=null),i||(i=Ip.pop()||new ER,i.begin(f,m,g),this.batches.push(i),r=f),this.addUvs(this.points,t,f.texture,g,y,f.matrix))}}const n=this.indices.length,o=this.points.length/2;if(i&&i.end(n,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const i=this.graphicsData[t],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,i=t.length;e<i;e++){const r=t[e];for(let n=0;n<r.size;n++){const o=r.start+n;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<cy.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++pt._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),Io.push(this.drawCalls[u]);this.drawCalls.length=0;const e=this.colors,i=this.textureIds;let r=Io.pop();r||(r=new lc,r.texArray=new pc),r.texArray.count=0,r.start=0,r.size=0,r.type=us.TRIANGLES;let n=0,o=null,a=0,h=!1,l=us.TRIANGLES,c=0;this.drawCalls.push(r);for(let u=0;u<this.batches.length;u++){const d=this.batches[u],f=8,p=d.style,m=p.texture.baseTexture;h!==!!p.native&&(h=!!p.native,l=h?us.LINES:us.TRIANGLES,o=null,n=f,t++),o!==m&&(o=m,m._batchEnabled!==t&&(n===f&&(t++,n=0,r.size>0&&(r=Io.pop(),r||(r=new lc,r.texArray=new pc),this.drawCalls.push(r)),r.start=c,r.size=0,r.texArray.count=0,r.type=l),m.touched=1,m._batchEnabled=t,m._batchLocation=n,m.wrapMode=Rs.REPEAT,r.texArray.elements[r.texArray.count++]=m,n++)),r.size+=d.size,c+=d.size,a=m._batchLocation,this.addColors(e,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(i,a,d.attribSize,d.attribStart)}pt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(t.length*3*4),o=new Float32Array(n),a=new Uint32Array(n);let h=0;for(let l=0;l<t.length/2;l++)o[h++]=t[l*2],o[h++]=t[l*2+1],o[h++]=e[l*2],o[h++]=e[l*2+1],a[h++]=i[l],o[h++]=r[l];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?hy.triangulate(t,this):al[t.type].triangulate(t,this)}processLine(t){Rp(t,this);for(let e=0;e<t.holes.length;e++)Rp(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const i=t[e];al[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){const r=t[i*2],n=t[i*2+1];t[i*2]=e.a*r+e.c*n+e.tx,t[i*2+1]=e.b*r+e.d*n+e.ty}}addColors(t,e,i,r,n=0){const o=Ft.shared.setValue(e).toLittleEndianNumber(),a=Ft.shared.setValue(o).toPremultiplied(i);t.length=Math.max(t.length,n+r);for(let h=0;h<r;h++)t[n+h]=a}addTextureIds(t,e,i,r=0){t.length=Math.max(t.length,r+i);for(let n=0;n<i;n++)t[r+n]=e}addUvs(t,e,i,r,n,o=null){let a=0;const h=e.length,l=i.frame;for(;a<n;){let u=t[(r+a)*2],d=t[(r+a)*2+1];if(o){const f=o.a*u+o.c*d+o.tx;d=o.b*u+o.d*d+o.ty,u=f}a++,e.push(u/l.width,d/l.height)}const c=i.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(e,i,h,n)}adjustUvs(t,e,i,r){const n=e.baseTexture,o=1e-6,a=i+r*2,h=e.frame,l=h.width/n.width,c=h.height/n.height;let u=h.x/h.width,d=h.y/h.height,f=Math.floor(t[i]+o),p=Math.floor(t[i+1]+o);for(let m=i+2;m<a;m+=2)f=Math.min(f,Math.floor(t[m]+o)),p=Math.min(p,Math.floor(t[m+1]+o));u-=f,d-=p;for(let m=i;m<a;m+=2)t[m]=(t[m]+u)*l,t[m+1]=(t[m+1]+d)*c}};ly.BATCHABLE_SIZE=100;let SR=ly;class lh{constructor(){this.color=16777215,this.alpha=1,this.texture=ct.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new lh;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ct.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class $u extends lh{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Js.BUTT,this.join=Me.MITER,this.miterLimit=10}clone(){const t=new $u;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Js.BUTT,this.join=Me.MITER,this.miterLimit=10}}const hl={},Bc=class sa extends ve{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new lh,this._lineStyle=new $u,this._matrix=null,this._holeMode=!1,this.state=vs.for2d(),this._geometry=t||new SR,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ft(16777215),this.blendMode=ht.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new sa(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i,r=.5,n=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:i,alignment:r,native:n}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:ct.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Js.BUTT,join:Me.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Ni,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Ni,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return(r!==t||n!==e)&&i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,r){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Gu.curveTo(t,e,i,r,n),this}bezierCurveTo(t,e,i,r,n,o){return this._initCurve(),Uu.curveTo(t,e,i,r,n,o,this.currentPath.points),this}arcTo(t,e,i,r,n){this._initCurve(t,e);const o=this.currentPath.points,a=Sp.curveTo(t,e,i,r,n,o);if(a){const{cx:h,cy:l,radius:c,startAngle:u,endAngle:d,anticlockwise:f}=a;this.arc(h,l,c,u,d,f)}return this}arc(t,e,i,r,n,o=!1){if(r===n)return this;if(!o&&n<=r?n+=wa:o&&r<=n&&(r+=wa),n-r===0)return this;const a=t+Math.cos(r)*i,h=e+Math.sin(r)*i,l=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const u=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-h);u<l&&d<l||c.push(a,h)}else this.moveTo(a,h),c=this.currentPath.points;return Sp.arc(a,h,t,e,i,r,n,o,c),this}beginFill(t=0,e){return this.beginTextureFill({texture:ct.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Ft.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:ct.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,r){return this.drawShape(new gt(t,e,i,r))}drawRoundedRect(t,e,i,r,n){return this.drawShape(new nh(t,e,i,r,n))}drawCircle(t,e,i){return this.drawShape(new ih(t,e,i))}drawEllipse(t,e,i,r){return this.drawShape(new rh(t,e,i,r))}drawPolygon(...t){let e,i=!0;const r=t[0];r.points?(i=r.closeStroke,e=r.points):Array.isArray(t[0])?e=t[0]:e=t;const n=new Ni(e);return n.closeStroke=i,this.drawShape(n),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===le.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let r=0;r<i;r++){const n=t.batches[r],o=n.style.color,a=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),h=new Float32Array(t.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),l=new Uint16Array(t.indicesUint16.buffer,n.start*2,n.size),c={vertexData:a,blendMode:e,indices:l,uvs:h,_batchRGB:Ft.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=c}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),i=this._geometry,r=this.worldAlpha,n=e.uniforms,o=i.drawCalls;n.translationMatrix=this.transform.worldTransform,Ft.shared.setValue(this._tintColor).premultiply(r).toArray(n.tint),t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:i,type:r,size:n,start:o}=e,a=i.count;for(let h=0;h<a;h++)t.texture.bind(i.elements[h],h);t.geometry.draw(r,n,o)}_resolveDirectShader(t){let e=this.shader;const i=this.pluginName;if(!e){if(!hl[i]){const{maxTextures:r}=t.plugins[i],n=new Int32Array(r);for(let h=0;h<r;h++)n[h]=h;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new zt,default:qe.from({uSamplers:n},!0)},a=t.plugins[i]._shader.program;hl[i]=new ms(a,o)}e=hl[i]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:i,maxX:r,maxY:n}=t.bounds;this._bounds.addFrame(this.transform,e,i,r,n)}containsPoint(t){return this.worldTransform.applyInverse(t,sa._TEMP_POINT),this._geometry.containsPoint(sa._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Ft.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,a=e.tx,h=e.ty,l=this._geometry.points,c=this.vertexData;let u=0;for(let d=0;d<l.length;d+=2){const f=l[d],p=l[d+1];c[u++]=i*f+n*p+a,c[u++]=o*p+r*f+h}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Bc.curves=Br,Bc._TEMP_POINT=new Rt;let Hu=Bc;class CR{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const ll=new Rt,Pp=new Ni,uy=class dy extends ve{constructor(t,e,i,r=us.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||vs.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Q.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===us.TRIANGLES&&e.length<dy.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const r=this.transform.worldTransform,n=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,c=r.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const f=e[d*2],p=e[d*2+1];u[d*2]=n*f+a*p+l,u[d*2+1]=o*f+h*p+c}if(this._roundPixels){const d=Q.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*d)/d}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new CR(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,ll);const e=this.geometry.getBuffer("aVertexPosition").data,i=Pp.points,r=this.geometry.getIndex().data,n=r.length,o=this.drawMode===4?3:1;for(let a=0;a+2<n;a+=o){const h=r[a]*2,l=r[a+1]*2,c=r[a+2]*2;if(i[0]=e[h],i[1]=e[h+1],i[2]=e[l],i[3]=e[l+1],i[4]=e[c],i[5]=e[c+1],Pp.contains(ll.x,ll.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};uy.BATCHABLE_SIZE=100;let Fr=uy;class ch extends ni{constructor(t,e,i){super();const r=new Xt(t),n=new Xt(e,!0),o=new Xt(i,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,it.FLOAT).addAttribute("aTextureCoord",n,2,!1,it.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var RR=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,IR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class $n extends ms{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:zt.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||Ss.from(IR,RR),i),this._colorDirty=!1,this.uvMatrix=new Lu(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Ft(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Ft.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class PR extends ch{constructor(t=100,e=100,i=10,r=10){super(),this.segWidth=i,this.segHeight=r,this.width=t,this.height=e,this.build()}build(){const t=this.segWidth*this.segHeight,e=[],i=[],r=[],n=this.segWidth-1,o=this.segHeight-1,a=this.width/n,h=this.height/o;for(let c=0;c<t;c++){const u=c%this.segWidth,d=c/this.segWidth|0;e.push(u*a,d*h),i.push(u/n,d/o)}const l=n*o;for(let c=0;c<l;c++){const u=c%n,d=c/n|0,f=d*this.segWidth+u,p=d*this.segWidth+u+1,m=(d+1)*this.segWidth+u,g=(d+1)*this.segWidth+u+1;r.push(f,p,m,p,g,m)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class MR extends ch{constructor(t=200,e,i=0){super(new Float32Array(e.length*4),new Float32Array(e.length*4),new Uint16Array((e.length-1)*6)),this.points=e,this._width=t,this.textureScale=i,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),r.data=new Uint16Array((t.length-1)*6));const n=i.data,o=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;let a=0,h=t[0];const l=this._width*this.textureScale,c=t.length;for(let d=0;d<c;d++){const f=d*4;if(this.textureScale>0){const p=h.x-t[d].x,m=h.y-t[d].y,g=Math.sqrt(p*p+m*m);h=t[d],a+=g/l}else a=d/(c-1);n[f]=a,n[f+1]=0,n[f+2]=a,n[f+3]=1}let u=0;for(let d=0;d<c-1;d++){const f=d*2;o[u++]=f,o[u++]=f+1,o[u++]=f+2,o[u++]=f+2,o[u++]=f+1,o[u++]=f+3}i.update(),r.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e=t[0],i,r=0,n=0;const o=this.buffers[0].data,a=t.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let l=0;l<a;l++){const c=t[l],u=l*4;l<t.length-1?i=t[l+1]:i=c,n=-(i.x-e.x),r=i.y-e.y;const d=Math.sqrt(r*r+n*n);d<1e-6?(r=0,n=0):(r/=d,n/=d,r*=h,n*=h),o[u]=c.x+r,o[u+1]=c.y+n,o[u+2]=c.x-r,o[u+3]=c.y-n,e=c}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class fy extends Fr{constructor(t,e,i){const r=new PR(t.width,t.height,e,i),n=new $n(ct.WHITE);super(r,n),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:e,height:i}=this.shader.texture;this.autoResize&&(t.width!==e||t.height!==i)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const Po=10;class BR extends fy{constructor(t,e,i,r,n){var o,a,h,l;super(ct.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=e??((o=t.defaultBorders)==null?void 0:o.left)??Po,this._rightWidth=r??((a=t.defaultBorders)==null?void 0:a.right)??Po,this._topHeight=i??((h=t.defaultBorders)==null?void 0:h.top)??Po,this._bottomHeight=n??((l=t.defaultBorders)==null?void 0:l.bottom)??Po,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,r=this._height>i?1:this._height/i;return Math.min(e,r)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const i=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class FR extends Fr{constructor(t=ct.EMPTY,e,i,r,n){const o=new ch(e,i,r);o.getBuffer("aVertexPosition").static=!1;const a=new $n(t);super(o,a,null,n),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class OR extends Fr{constructor(t,e,i=0){const r=new MR(t.height,e,i),n=new $n(t);i>0&&(t.baseTexture.wrapMode=Rs.REPEAT),super(r,n),this.autoUpdate=!0}_render(t){const e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),super._render(t)}}class DR extends ve{constructor(t=1500,e,i=16384,r=!1){super();const n=16384;i>n&&(i=n),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=ht.NORMAL,this.autoResize=r,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tintColor=new Ft(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const e=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class Mp{constructor(t,e,i){this.geometry=new ni,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<t.length;++r){let n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||it.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new Xt(sT(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Xt(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new Xt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===it.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===it.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,i){for(let r=0;r<this.dynamicProperties.length;r++){const n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.type===it.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let r=0;r<this.staticProperties.length;r++){const n=this.staticProperties[r];n.uploadFunction(t,e,i,n.type===it.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var LR=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,NR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class py extends ah{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new zt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:it.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=ms.from(NR,LR,{}),this.state=vs.for2d()}render(t){const e=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer;let o=e.length;if(o===0)return;o>i&&!t.autoResize&&(o=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const h=e[0]._texture.baseTexture,l=h.alphaMode>0;this.state.blendMode=r_(t.blendMode,l),n.state.set(this.state);const c=n.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Ft.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=r,p+=1){let m=o-f;m>r&&(m=r),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const g=a[p];g.uploadDynamic(e,f,m);const y=t._bufferUpdateIDs[p]||0;d=d||g._updateID<y,d&&(g._updateID=t._updateID,g.uploadStatic(e,f,m)),n.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,r=t._batchSize,n=t._properties;for(let o=0;o<i;o+=r)e.push(new Mp(this.properties,n,r));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new Mp(this.properties,i,e)}uploadVertices(t,e,i,r,n,o){let a=0,h=0,l=0,c=0;for(let u=0;u<i;++u){const d=t[e+u],f=d._texture,p=d.scale.x,m=d.scale.y,g=f.trim,y=f.orig;g?(h=g.x-d.anchor.x*y.width,a=h+g.width,c=g.y-d.anchor.y*y.height,l=c+g.height):(a=y.width*(1-d.anchor.x),h=y.width*-d.anchor.x,l=y.height*(1-d.anchor.y),c=y.height*-d.anchor.y),r[o]=h*p,r[o+1]=c*m,r[o+n]=a*p,r[o+n+1]=c*m,r[o+n*2]=a*p,r[o+n*2+1]=l*m,r[o+n*3]=h*p,r[o+n*3+1]=l*m,o+=n*4}}uploadPosition(t,e,i,r,n,o){for(let a=0;a<i;a++){const h=t[e+a].position;r[o]=h.x,r[o+1]=h.y,r[o+n]=h.x,r[o+n+1]=h.y,r[o+n*2]=h.x,r[o+n*2+1]=h.y,r[o+n*3]=h.x,r[o+n*3+1]=h.y,o+=n*4}}uploadRotation(t,e,i,r,n,o){for(let a=0;a<i;a++){const h=t[e+a].rotation;r[o]=h,r[o+n]=h,r[o+n*2]=h,r[o+n*3]=h,o+=n*4}}uploadUvs(t,e,i,r,n,o){for(let a=0;a<i;++a){const h=t[e+a]._texture._uvs;h?(r[o]=h.x0,r[o+1]=h.y0,r[o+n]=h.x1,r[o+n+1]=h.y1,r[o+n*2]=h.x2,r[o+n*2+1]=h.y2,r[o+n*3]=h.x3,r[o+n*3+1]=h.y3,o+=n*4):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+n*2]=0,r[o+n*2+1]=0,r[o+n*3]=0,r[o+n*3+1]=0,o+=n*4)}}uploadTint(t,e,i,r,n,o){for(let a=0;a<i;++a){const h=t[e+a],l=Ft.shared.setValue(h._tintRGB).toPremultiplied(h.alpha,h.texture.baseTexture.alphaMode>0);r[o]=l,r[o+n]=l,r[o+n*2]=l,r[o+n*3]=l,o+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}py.extension={name:"particle",type:q.RendererPlugin};et.add(py);var uh=(s=>(s[s.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",s[s.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",s))(uh||{});const Mo={willReadFrequently:!0},rs=class st{static get experimentalLetterSpacingSupported(){let t=st._experimentalLetterSpacingSupported;if(t!==void 0){const e=Q.ADAPTER.getCanvasRenderingContext2D().prototype;t=st._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,r,n,o,a,h,l){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=h,this.fontProperties=l}static measureText(t,e,i,r=st._canvas){i=i??e.wordWrap;const n=e.toFontString(),o=st.measureFont(n);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const a=r.getContext("2d",Mo);a.font=n;const h=(i?st.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),l=new Array(h.length);let c=0;for(let p=0;p<h.length;p++){const m=st._measureText(h[p],e.letterSpacing,a);l[p]=m,c=Math.max(c,m)}let u=c+e.strokeThickness;e.dropShadow&&(u+=e.dropShadowDistance);const d=e.lineHeight||o.fontSize+e.strokeThickness;let f=Math.max(d,o.fontSize+e.strokeThickness*2)+e.leading+(h.length-1)*(d+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new st(t,e,u,f,h,l,d+e.leading,c,o)}static _measureText(t,e,i){let r=!1;st.experimentalLetterSpacingSupported&&(st.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,r=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(t).width;return n>0&&(r?n-=e:n+=(st.graphemeSegmenter(t).length-1)*e),n}static wordWrap(t,e,i=st._canvas){const r=i.getContext("2d",Mo);let n=0,o="",a="";const h=Object.create(null),{letterSpacing:l,whiteSpace:c}=e,u=st.collapseSpaces(c),d=st.collapseNewlines(c);let f=!u;const p=e.wordWrapWidth+l,m=st.tokenize(t);for(let g=0;g<m.length;g++){let y=m[g];if(st.isNewline(y)){if(!d){a+=st.addLine(o),f=!u,o="",n=0;continue}y=" "}if(u){const _=st.isBreakingSpace(y),w=st.isBreakingSpace(o[o.length-1]);if(_&&w)continue}const v=st.getFromCache(y,l,h,r);if(v>p)if(o!==""&&(a+=st.addLine(o),o="",n=0),st.canBreakWords(y,e.breakWords)){const _=st.wordWrapSplit(y);for(let w=0;w<_.length;w++){let A=_[w],R=A,P=1;for(;_[w+P];){const B=_[w+P];if(!st.canBreakChars(R,B,y,w,e.breakWords))A+=B;else break;R=B,P++}w+=P-1;const S=st.getFromCache(A,l,h,r);S+n>p&&(a+=st.addLine(o),f=!1,o="",n=0),o+=A,n+=S}}else{o.length>0&&(a+=st.addLine(o),o="",n=0);const _=g===m.length-1;a+=st.addLine(y,!_),f=!1,o="",n=0}else v+n>p&&(f=!1,a+=st.addLine(o),o="",n=0),(o.length>0||!st.isBreakingSpace(y)||f)&&(o+=y,n+=v)}return a+=st.addLine(o,!1),a}static addLine(t,e=!0){return t=st.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,i,r){let n=i[t];return typeof n!="number"&&(n=st._measureText(t,e,r)+e,i[t]=n),n}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!st.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:st._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:st._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let r=0;r<t.length;r++){const n=t[r],o=t[r+1];if(st.isBreakingSpace(n,o)||st.isNewline(n)){i!==""&&(e.push(i),i=""),e.push(n);continue}i+=n}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,n){return!0}static wordWrapSplit(t){return st.graphemeSegmenter(t)}static measureFont(t){if(st._fonts[t])return st._fonts[t];const e={ascent:0,descent:0,fontSize:0},i=st._canvas,r=st._context;r.font=t;const n=st.METRICS_STRING+st.BASELINE_SYMBOL,o=Math.ceil(r.measureText(n).width);let a=Math.ceil(r.measureText(st.BASELINE_SYMBOL).width);const h=Math.ceil(st.HEIGHT_MULTIPLIER*a);if(a=a*st.BASELINE_MULTIPLIER|0,o===0||h===0)return st._fonts[t]=e,e;i.width=o,i.height=h,r.fillStyle="#f00",r.fillRect(0,0,o,h),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(n,0,a);const l=r.getImageData(0,0,o,h).data,c=l.length,u=o*4;let d=0,f=0,p=!1;for(d=0;d<a;++d){for(let m=0;m<u;m+=4)if(l[f+m]!==255){p=!0;break}if(!p)f+=u;else break}for(e.ascent=a-d,f=c-u,p=!1,d=h;d>a;--d){for(let m=0;m<u;m+=4)if(l[f+m]!==255){p=!0;break}if(!p)f-=u;else break}return e.descent=d-a,e.fontSize=e.ascent+e.descent,st._fonts[t]=e,e}static clearMetrics(t=""){t?delete st._fonts[t]:st._fonts={}}static get _canvas(){var t;if(!st.__canvas){let e;try{const i=new OffscreenCanvas(0,0);if((t=i.getContext("2d",Mo))!=null&&t.measureText)return st.__canvas=i,i;e=Q.ADAPTER.createCanvas()}catch{e=Q.ADAPTER.createCanvas()}e.width=e.height=10,st.__canvas=e}return st.__canvas}static get _context(){return st.__context||(st.__context=st._canvas.getContext("2d",Mo)),st.__context}};rs.METRICS_STRING="|q",rs.BASELINE_SYMBOL="M",rs.BASELINE_MULTIPLIER=1.4,rs.HEIGHT_MULTIPLIER=2,rs.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const s=new Intl.Segmenter;return t=>[...s.segment(t)].map(e=>e.segment)}return s=>[...s]})(),rs.experimentalLetterSpacing=!1,rs._fonts={},rs._newlines=[10,13],rs._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let js=rs;const kR=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],my=class cn{constructor(t){this.styleID=0,this.reset(),ul(this,t,t)}clone(){const t={};return ul(t,this,cn.defaultStyle),new cn(t)}reset(){ul(this,cn.defaultStyle,cn.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=cl(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=cl(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){UR(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=cl(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!kR.includes(r)&&(r=`"${r}"`),e[i]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};my.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:uh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ai=my;function cl(s){const t=Ft.shared,e=i=>{const r=t.setValue(i);return r.alpha===1?r.toHex():r.toRgbaString()};return Array.isArray(s)?s.map(e):e(s)}function UR(s,t){if(!Array.isArray(s)||!Array.isArray(t)||s.length!==t.length)return!1;for(let e=0;e<s.length;++e)if(s[e]!==t[e])return!1;return!0}function ul(s,t,e){for(const i in e)Array.isArray(t[i])?s[i]=t[i].slice():s[i]=t[i]}const GR={texture:!0,children:!1,baseTexture:!0},gy=class Fc extends ui{constructor(t,e,i){let r=!1;i||(i=Q.ADAPTER.createCanvas(),r=!0),i.width=3,i.height=3;const n=ct.from(i);n.orig=new gt,n.trim=new gt,super(n),this._ownCanvas=r,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Fc.defaultResolution??Q.RESOLUTION,this._autoResolution=Fc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return js.experimentalLetterSpacing}static set experimentalLetterSpacing(t){yt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),js.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const i=this.context,r=js.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=r.width,o=r.height,a=r.lines,h=r.lineHeight,l=r.lineWidths,c=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;let d,f;const p=e.dropShadow?2:1;for(let m=0;m<p;++m){const g=e.dropShadow&&m===0,y=g?Math.ceil(Math.max(1,o)+e.padding*2):0,v=y*this._resolution;if(g){i.fillStyle="black",i.strokeStyle="black";const w=e.dropShadowColor,A=e.dropShadowBlur*this._resolution,R=e.dropShadowDistance*this._resolution;i.shadowColor=Ft.shared.setValue(w).setAlpha(e.dropShadowAlpha).toRgbaString(),i.shadowBlur=A,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*R,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*R+v}else i.fillStyle=this._generateFillStyle(e,a,r),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let _=(h-u.fontSize)/2;h-u.fontSize<0&&(_=0);for(let w=0;w<a.length;w++)d=e.strokeThickness/2,f=e.strokeThickness/2+w*h+u.ascent+_,e.align==="right"?d+=c-l[w]:e.align==="center"&&(d+=(c-l[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[w],d+e.padding,f+e.padding-y,!0),e.fill&&this.drawLetterSpacing(a[w],d+e.padding,f+e.padding-y)}this.updateTexture()}drawLetterSpacing(t,e,i,r=!1){const n=this._style.letterSpacing;let o=!1;if(js.experimentalLetterSpacingSupported&&(js.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||o){r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i);return}let a=e;const h=js.graphemeSegmenter(t);let l=this.context.measureText(t).width,c=0;for(let u=0;u<h.length;++u){const d=h[u];r?this.context.strokeText(d,a,i):this.context.fillText(d,a,i);let f="";for(let p=u+1;p<h.length;++p)f+=h[p];c=this.context.measureText(f).width,a+=l-c+n,l=c}}updateTexture(){const t=this.canvas;if(this._style.trim){const o=oT(t);o.data&&(t.width=o.width,t.height=o.height,this.context.putImageData(o.data,0,0))}const e=this._texture,i=this._style,r=i.trim?0:i.padding,n=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-r,e.trim.y=-r,e.orig.width=e._frame.width-r*2,e.orig.height=e._frame.height-r*2,this._onTextureUpdate(),n.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){const r=t.fill;if(Array.isArray(r)){if(r.length===1)return r[0]}else return r;let n;const o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,h=this.canvas.width/this._resolution-o-a*2,l=this.canvas.height/this._resolution-o-a*2,c=r.slice(),u=t.fillGradientStops.slice();if(!u.length){const d=c.length+1;for(let f=1;f<d;++f)u.push(f/d)}if(c.unshift(r[0]),u.unshift(0),c.push(r[r.length-1]),u.push(1),t.fillGradientType===uh.LINEAR_VERTICAL){n=this.context.createLinearGradient(h/2,a,h/2,l+a);const d=i.fontProperties.fontSize+t.strokeThickness;for(let f=0;f<e.length;f++){const p=i.lineHeight*(f-1)+d,m=i.lineHeight*f;let g=m;f>0&&p>m&&(g=(m+p)/2);const y=m+d,v=i.lineHeight*(f+1);let _=y;f+1<e.length&&v<y&&(_=(y+v)/2);const w=(_-g)/l;for(let A=0;A<c.length;A++){let R=0;typeof u[A]=="number"?R=u[A]:R=A/c.length;let P=Math.min(1,Math.max(0,g/l+R*w));P=Number(P.toFixed(5)),n.addColorStop(P,c[A])}}}else{n=this.context.createLinearGradient(a,l/2,h+a,l/2);const d=c.length+1;let f=1;for(let p=0;p<c.length;p++){let m;typeof u[p]=="number"?m=u[p]:m=f/d,n.addColorStop(m,c[p]),f++}}return n}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},GR,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Ks(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Ks(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof ai?this._style=t:this._style=new ai(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};gy.defaultAutoResolution=!0;let to=gy;class $R{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function HR(s,t){var i;let e=!1;if((i=s==null?void 0:s._textures)!=null&&i.length){for(let r=0;r<s._textures.length;r++)if(s._textures[r]instanceof ct){const n=s._textures[r].baseTexture;t.includes(n)||(t.push(n),e=!0)}}return e}function XR(s,t){if(s.baseTexture instanceof pt){const e=s.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function VR(s,t){if(s._texture&&s._texture instanceof ct){const e=s._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function WR(s,t){return t instanceof to?(t.updateText(!0),!0):!1}function zR(s,t){if(t instanceof ai){const e=t.toFontString();return js.measureFont(e),!0}return!1}function jR(s,t){if(s instanceof to){t.includes(s.style)||t.push(s.style),t.includes(s)||t.push(s);const e=s._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function YR(s,t){return s instanceof ai?(t.includes(s)||t.push(s),!0):!1}const _y=class yy{constructor(t){this.limiter=new $R(yy.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(jR),this.registerFindHook(YR),this.registerFindHook(HR),this.registerFindHook(XR),this.registerFindHook(VR),this.registerUploadHook(WR),this.registerUploadHook(zR)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Jt.system.addOnce(this.tick,this,oi.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Jt.system.addOnce(this.tick,this,oi.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,i=t.length;e<i;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof ve)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Jt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_y.uploadsPerFrame=4;let Oc=_y;Object.defineProperties(Q,{UPLOADS_PER_FRAME:{get(){return Oc.uploadsPerFrame},set(s){yt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Oc.uploadsPerFrame=s}}});function xy(s,t){return t instanceof pt?(t._glTextures[s.CONTEXT_UID]||s.texture.bind(t),!0):!1}function qR(s,t){if(!(t instanceof Hu))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:i}=e;for(let r=0;r<i.length;r++){const{texture:n}=i[r].style;n&&xy(s,n.baseTexture)}return e.batchable||s.geometry.bind(e,t._resolveDirectShader(s)),!0}function KR(s,t){return s instanceof Hu?(t.push(s),!0):!1}class vy extends Oc{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(KR),this.registerUploadHook(xy),this.registerUploadHook(qR)}}vy.extension={name:"prepare",type:q.RendererSystem};et.add(vy);class Oa extends ui{constructor(t,e=!0){super(t[0]instanceof ct?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Jt.shared.add(this.update,this,oi.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){let r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];const n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let i=0;i<t.length;++i)e.push(ct.from(t[i]));return new Oa(e)}static fromImages(t){const e=[];for(let i=0;i<t.length;++i)e.push(ct.from(t[i]));return new Oa(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof ct)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Jt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const tn=new Rt;class Xu extends ui{constructor(t,e=100,i=100){super(t),this.tileTransform=new oh,this._width=e,this._height=i,this.uvMatrix=this.texture.uvMatrix||new Lu(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const e=this._texture;!e||!e.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new gt),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,tn);const e=this._width,i=this._height,r=-e*this.anchor._x;if(tn.x>=r&&tn.x<r+e){const n=-i*this.anchor._y;if(tn.y>=n&&tn.y<n+i)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){const i=t instanceof ct?t:ct.from(t,e);return new Xu(i,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var ZR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,JR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,QR=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Bp=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,tI=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Bo=new zt;class by extends ah{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new x_,this.state=vs.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=ms.from(Bp,tI,e),this.shader=t.context.webGLVersion>1?ms.from(JR,ZR,e):ms.from(Bp,QR,e)}render(t){const e=this.renderer,i=this.quad;let r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);const n=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;r=i.uvs,r[0]=r[6]=-n,r[1]=r[3]=-o,r[2]=r[4]=1-n,r[5]=r[7]=1-o,i.invalidate();const a=t._texture,h=a.baseTexture,l=h.alphaMode>0,c=t.tileTransform.localTransform,u=t.uvMatrix;let d=h.isPowerOfTwo&&a.frame.width===h.width&&a.frame.height===h.height;d&&(h._glTextures[e.CONTEXT_UID]?d=h.wrapMode!==Rs.CLAMP:h.wrapMode===Rs.CLAMP&&(h.wrapMode=Rs.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,m=a.height,g=t._width,y=t._height;Bo.set(c.a*p/g,c.b*p/y,c.c*m/g,c.d*m/y,c.tx/g,c.ty/y),Bo.invert(),d?Bo.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=Bo.toArray(!0),f.uniforms.uColor=Ft.shared.setValue(t.tint).premultiply(t.worldAlpha,l).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,e.shader.bind(f),e.geometry.bind(i),this.state.blendMode=r_(t.blendMode,l),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}by.extension={name:"tilingSprite",type:q.RendererPlugin};et.add(by);const wy=class un{constructor(t,e,i){this.linkedSheets=[],(t instanceof pt||t instanceof ct)&&(t={texture:t,data:e,resolutionFilename:i});const{texture:r,data:n,resolutionFilename:o=null,cachePrefix:a=""}=t;this.cachePrefix=a,this._texture=r instanceof ct?r:null,this.baseTexture=r instanceof pt?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;const h=this.baseTexture.resource;this.resolution=this._updateResolution(o||(h?h.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let i=Ms(t,null);return i===null&&(i=typeof e=="number"?e:parseFloat(e??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=un.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=un.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const r=this._frameKeys[e],n=this._frames[r],o=n.frame;if(o){let a=null,h=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,c=new gt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?a=new gt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new gt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(h=new gt(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new ct(this.baseTexture,a,c,h,n.rotated?2:0,n.anchor,n.borders),ct.addToCache(this.textures[r],this.cachePrefix+r.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*un.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*un.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};wy.BATCH_SIZE=1e3;let Fp=wy;const eI=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Ey(s,t,e){const i={};if(s.forEach(r=>{i[r]=t}),Object.keys(t.textures).forEach(r=>{i[`${t.cachePrefix}${r}`]=t.textures[r]}),!e){const r=oe.dirname(s[0]);t.linkedSheets.forEach((n,o)=>{Object.assign(i,Ey([`${r}/${t.data.meta.related_multi_packs[o]}`],n,!0))})}return i}const sI={extension:q.Asset,cache:{test:s=>s instanceof Fp,getCacheableAssets:(s,t)=>Ey(s,t,!1)},resolver:{test:s=>{const t=s.split("?")[0].split("."),e=t.pop(),i=t.pop();return e==="json"&&eI.includes(i)},parse:s=>{var e;const t=s.split(".");return{resolution:parseFloat(((e=Q.RETINA_PREFIX.exec(s))==null?void 0:e[1])??"1"),format:t[t.length-2],src:s}}},loader:{name:"spritesheetLoader",extension:{type:q.LoadParser,priority:Ze.Normal},async testParse(s,t){return oe.extname(t.src).toLowerCase()===".json"&&!!s.frames},async parse(s,t,e){var c,u;const{texture:i,imageFilename:r,cachePrefix:n}=(t==null?void 0:t.data)??{};let o=oe.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i&&i.baseTexture)a=i;else{const d=Ic(o+(r??s.meta.image),t.src);a=(await e.load([d]))[d]}const h=new Fp({texture:a.baseTexture,data:s,resolutionFilename:t.src,cachePrefix:n});await h.parse();const l=(c=s==null?void 0:s.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const d=[];for(const p of l){if(typeof p!="string")continue;let m=o+p;(u=t.data)!=null&&u.ignoreMultiPack||(m=Ic(m,t.src),d.push(e.load({src:m,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(d);h.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[h].concat(h.linkedSheets.filter(m=>m!==p))})}return h},unload(s){s.destroy(!0)}}};et.add(sI);class Da{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class ia{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const n in e){const o=e[n].match(/^[a-z]+/gm)[0],a=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(const l in a){const c=a[l].split("="),u=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;h[u]=p}i[o].push(h)}const r=new Da;return i.info.forEach(n=>r.info.push({face:n.face,size:parseInt(n.size,10)})),i.common.forEach(n=>r.common.push({lineHeight:parseInt(n.lineHeight,10)})),i.page.forEach(n=>r.page.push({id:parseInt(n.id,10),file:n.file})),i.char.forEach(n=>r.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),i.kerning.forEach(n=>r.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),i.distanceField.forEach(n=>r.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),r}}class Dc{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new Da,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),h=t.getElementsByTagName("distanceField");for(let l=0;l<i.length;l++)e.info.push({face:i[l].getAttribute("face"),size:parseInt(i[l].getAttribute("size"),10)});for(let l=0;l<r.length;l++)e.common.push({lineHeight:parseInt(r[l].getAttribute("lineHeight"),10)});for(let l=0;l<n.length;l++)e.page.push({id:parseInt(n[l].getAttribute("id"),10)||0,file:n[l].getAttribute("file")});for(let l=0;l<o.length;l++){const c=o[l];e.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let l=0;l<a.length;l++)e.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});for(let l=0;l<h.length;l++)e.distanceField.push({fieldType:h[l].getAttribute("fieldType"),distanceRange:parseInt(h[l].getAttribute("distanceRange"),10)});return e}}class Lc{static test(t){return typeof t=="string"&&t.includes("<font>")?Dc.test(Q.ADAPTER.parseXML(t)):!1}static parse(t){return Dc.parse(Q.ADAPTER.parseXML(t))}}const dl=[ia,Dc,Lc];function iI(s){for(let t=0;t<dl.length;t++)if(dl[t].test(s))return dl[t];return null}function rI(s,t,e,i,r,n){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const h=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,c=s.width/i-h-l*2,u=s.height/i-h-l*2,d=o.slice(),f=e.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),e.fillGradientType===uh.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,l,c/2,u+l);let p=0;const m=(n.fontProperties.fontSize+e.strokeThickness)/u;for(let g=0;g<r.length;g++){const y=n.lineHeight*g;for(let v=0;v<d.length;v++){let _=0;typeof f[v]=="number"?_=f[v]:_=v/d.length;const w=y/u+_*m;let A=Math.max(p,w);A=Math.min(A,1),a.addColorStop(A,d[v]),p=A}}}else{a=t.createLinearGradient(l,u/2,c+l,u/2);const p=d.length+1;let m=1;for(let g=0;g<d.length;g++){let y;typeof f[g]=="number"?y=f[g]:y=m/p,a.addColorStop(y,d[g]),m++}}return a}function nI(s,t,e,i,r,n,o){const a=e.text,h=e.fontProperties;t.translate(i,r),t.scale(n,n);const l=o.strokeThickness/2,c=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=rI(s,t,o,n,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,d=o.dropShadowBlur*n,f=o.dropShadowDistance*n;t.shadowColor=Ft.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,l,c+e.lineHeight-h.descent),o.fill&&t.fillText(a,l,c+e.lineHeight-h.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function ra(s){return s.codePointAt?s.codePointAt(0):s.charCodeAt(0)}function Ay(s){return Array.from?Array.from(s):s.split("")}function oI(s){typeof s=="string"&&(s=[s]);const t=[];for(let e=0,i=s.length;e<i;e++){const r=s[e];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const n=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<n)throw new Error("[BitmapFont]: Invalid character range.");for(let a=n,h=o;a<=h;a++)t.push(String.fromCharCode(a))}else t.push(...Ay(r))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Gs=class ns{constructor(t,e,i){var c;const[r]=t.info,[n]=t.common,[o]=t.page,[a]=t.distanceField,h=Ms(o.file),l={};this._ownsTextures=i,this.font=r.face,this.size=r.size,this.lineHeight=n.lineHeight/h,this.chars={},this.pageTextures=l;for(let u=0;u<t.page.length;u++){const{id:d,file:f}=t.page[u];l[d]=e instanceof Array?e[u]:e[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(l[d].baseTexture.alphaMode=_e.NO_PREMULTIPLIED_ALPHA,l[d].baseTexture.mipmap=ys.OFF)}for(let u=0;u<t.char.length;u++){const{id:d,page:f}=t.char[u];let{x:p,y:m,width:g,height:y,xoffset:v,yoffset:_,xadvance:w}=t.char[u];p/=h,m/=h,g/=h,y/=h,v/=h,_/=h,w/=h;const A=new gt(p+l[f].frame.x/h,m+l[f].frame.y/h,g,y);this.chars[d]={xOffset:v,yOffset:_,xAdvance:w,kerning:{},texture:new ct(l[f].baseTexture,A),page:f}}for(let u=0;u<t.kerning.length;u++){let{first:d,second:f,amount:p}=t.kerning[u];d/=h,f/=h,p/=h,this.chars[f]&&(this.chars[f].kerning[d]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((c=a==null?void 0:a.fieldType)==null?void 0:c.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let r;if(t instanceof Da)r=t;else{const o=iI(t);if(!o)throw new Error("Unrecognized data format for font.");r=o.parse(t)}e instanceof ct&&(e=[e]);const n=new ns(r,e,i);return ns.available[n.font]=n,n}static uninstall(t){const e=ns.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete ns.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:n,resolution:o,textureWidth:a,textureHeight:h,...l}=Object.assign({},ns.defaultOptions,i),c=oI(r),u=e instanceof ai?e:new ai(e),d=a,f=new Da;f.info[0]={face:u.fontFamily,size:u.fontSize},f.common[0]={lineHeight:u.fontSize};let p=0,m=0,g,y,v,_=0;const w=[];for(let R=0;R<c.length;R++){g||(g=Q.ADAPTER.createCanvas(),g.width=a,g.height=h,y=g.getContext("2d"),v=new pt(g,{resolution:o,...l}),w.push(new ct(v)),f.page.push({id:w.length-1,file:""}));const P=c[R],S=js.measureText(P,u,!1,g),B=S.width,$=Math.ceil(S.height),rt=Math.ceil((u.fontStyle==="italic"?2:1)*B);if(m>=h-$*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${h}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${P}')`);--R,g=null,y=null,v=null,m=0,p=0,_=0;continue}if(_=Math.max($+S.fontProperties.descent,_),rt*o+p>=d){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${P}')`);--R,m+=_*o,m=Math.ceil(m),p=0,_=0;continue}nI(g,y,S,p,m,o,u);const V=ra(S.text);f.char.push({id:V,page:w.length-1,x:p/o,y:m/o,width:rt,height:$,xoffset:0,yoffset:0,xadvance:B-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0)}),p+=(rt+2*n)*o,p=Math.ceil(p)}if(!(i!=null&&i.skipKerning))for(let R=0,P=c.length;R<P;R++){const S=c[R];for(let B=0;B<P;B++){const $=c[B],rt=y.measureText(S).width,V=y.measureText($).width,T=y.measureText(S+$).width-(rt+V);T&&f.kerning.push({first:ra(S),second:ra($),amount:T})}}const A=new ns(f,w,!0);return ns.available[t]!==void 0&&ns.uninstall(t),ns.available[t]=A,A}};Gs.ALPHA=[["a","z"],["A","Z"]," "],Gs.NUMERIC=[["0","9"]],Gs.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Gs.ASCII=[[" ","~"]],Gs.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Gs.ALPHANUMERIC},Gs.available={};let $s=Gs;var aI=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,hI=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Op=[],Dp=[],Lp=[],Ty=class Sy extends ve{constructor(t,e={}){super();const{align:i,tint:r,maxWidth:n,letterSpacing:o,fontName:a,fontSize:h}=Object.assign({},Sy.styleDefaults,e);if(!$s.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Ft(r),this._font=void 0,this._fontName=a,this._fontSize=h,this.text=t,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Bi(()=>{this.dirty=!0},this,0,0),this._roundPixels=Q.ROUND_PIXELS,this.dirty=!0,this._resolution=Q.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var rt;const t=$s.available[this._fontName],e=this.fontSize,i=e/t.size,r=new Rt,n=[],o=[],a=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Ay(h),c=this._maxWidth*t.size/e,u=t.distanceFieldType==="none"?Op:Dp;let d=null,f=0,p=0,m=0,g=-1,y=0,v=0,_=0,w=0;for(let V=0;V<l.length;V++){const T=l[V],F=ra(T);if(/(?:\s)/.test(T)&&(g=V,y=f,w++),T==="\r"||T===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++m,++v,r.x=0,r.y+=t.lineHeight,d=null,w=0;continue}const K=t.chars[F];if(!K)continue;d&&K.kerning[d]&&(r.x+=K.kerning[d]);const z=Lp.pop()||{texture:ct.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Rt};z.texture=K.texture,z.line=m,z.charCode=F,z.position.x=Math.round(r.x+K.xOffset+this._letterSpacing/2),z.position.y=Math.round(r.y+K.yOffset),z.prevSpaces=w,n.push(z),f=z.position.x+Math.max(K.xAdvance-K.xOffset,K.texture.orig.width),r.x+=K.xAdvance+this._letterSpacing,_=Math.max(_,K.yOffset+K.texture.height),d=F,g!==-1&&c>0&&r.x>c&&(++v,br(n,1+g-v,1+V-g),V=g,g=-1,o.push(y),a.push(n.length>0?n[n.length-1].prevSpaces:0),p=Math.max(p,y),m++,r.x=0,r.y+=t.lineHeight,d=null,w=0)}const A=l[l.length-1];A!=="\r"&&A!==`
`&&(/(?:\s)/.test(A)&&(f=y),o.push(f),p=Math.max(p,f),a.push(-1));const R=[];for(let V=0;V<=m;V++){let T=0;this._align==="right"?T=p-o[V]:this._align==="center"?T=(p-o[V])/2:this._align==="justify"&&(T=a[V]<0?0:(p-o[V])/a[V]),R.push(T)}const P=n.length,S={},B=[],$=this._activePagesMeshData;u.push(...$);for(let V=0;V<P;V++){const T=n[V].texture,F=T.baseTexture.uid;if(!S[F]){let K=u.pop();if(!K){const H=new ch;let j,At;t.distanceFieldType==="none"?(j=new $n(ct.EMPTY),At=ht.NORMAL):(j=new $n(ct.EMPTY,{program:Ss.from(hI,aI),uniforms:{uFWidth:0}}),At=ht.NORMAL_NPM);const L=new Fr(H,j);L.blendMode=At,K={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:L,vertices:null,uvs:null,indices:null}}K.index=0,K.indexCount=0,K.vertexCount=0,K.uvsCount=0,K.total=0;const{_textureCache:z}=this;z[F]=z[F]||new ct(T.baseTexture),K.mesh.texture=z[F],K.mesh.tint=this._tintColor.value,B.push(K),S[F]=K}S[F].total++}for(let V=0;V<$.length;V++)B.includes($[V])||this.removeChild($[V].mesh);for(let V=0;V<B.length;V++)B[V].mesh.parent!==this&&this.addChild(B[V].mesh);this._activePagesMeshData=B;for(const V in S){const T=S[V],F=T.total;if(!(((rt=T.indices)==null?void 0:rt.length)>6*F)||T.vertices.length<Fr.BATCHABLE_SIZE*2)T.vertices=new Float32Array(4*2*F),T.uvs=new Float32Array(4*2*F),T.indices=new Uint16Array(6*F);else{const K=T.total,z=T.vertices;for(let H=K*4*2;H<z.length;H++)z[H]=0}T.mesh.size=6*F}for(let V=0;V<P;V++){const T=n[V];let F=T.position.x+R[T.line]*(this._align==="justify"?T.prevSpaces:1);this._roundPixels&&(F=Math.round(F));const K=F*i,z=T.position.y*i,H=T.texture,j=S[H.baseTexture.uid],At=H.frame,L=H._uvs,k=j.index++;j.indices[k*6+0]=0+k*4,j.indices[k*6+1]=1+k*4,j.indices[k*6+2]=2+k*4,j.indices[k*6+3]=0+k*4,j.indices[k*6+4]=2+k*4,j.indices[k*6+5]=3+k*4,j.vertices[k*8+0]=K,j.vertices[k*8+1]=z,j.vertices[k*8+2]=K+At.width*i,j.vertices[k*8+3]=z,j.vertices[k*8+4]=K+At.width*i,j.vertices[k*8+5]=z+At.height*i,j.vertices[k*8+6]=K,j.vertices[k*8+7]=z+At.height*i,j.uvs[k*8+0]=L.x0,j.uvs[k*8+1]=L.y0,j.uvs[k*8+2]=L.x1,j.uvs[k*8+3]=L.y1,j.uvs[k*8+4]=L.x2,j.uvs[k*8+5]=L.y2,j.uvs[k*8+6]=L.x3,j.uvs[k*8+7]=L.y3}this._textWidth=p*i,this._textHeight=(r.y+t.lineHeight)*i;for(const V in S){const T=S[V];if(this.anchor.x!==0||this.anchor.y!==0){let H=0;const j=this._textWidth*this.anchor.x,At=this._textHeight*this.anchor.y;for(let L=0;L<T.total;L++)T.vertices[H++]-=j,T.vertices[H++]-=At,T.vertices[H++]-=j,T.vertices[H++]-=At,T.vertices[H++]-=j,T.vertices[H++]-=At,T.vertices[H++]-=j,T.vertices[H++]-=At}this._maxLineHeight=_*i;const F=T.mesh.geometry.getBuffer("aVertexPosition"),K=T.mesh.geometry.getBuffer("aTextureCoord"),z=T.mesh.geometry.getIndex();F.data=T.vertices,K.data=T.uvs,z.data=T.indices,F.update(),K.update(),z.update()}for(let V=0;V<n.length;V++)Lp.push(n[V]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:i,size:r}=$s.available[this._fontName];if(i!=="none"){const{a:n,b:o,c:a,d:h}=this.worldTransform,l=Math.sqrt(n*n+o*o),c=Math.sqrt(a*a+h*h),u=(Math.abs(l)+Math.abs(c))/2,d=this.fontSize/r,f=t._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=u*e*d*f}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=$s.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!$s.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??$s.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i=$s.available[this._fontName].distanceFieldType==="none"?Op:Dp;i.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],i.filter(r=>e[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=ct.EMPTY});for(const r in e)e[r].destroy(),delete e[r];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};Ty.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let Cy=Ty;const lI=[".xml",".fnt"],cI={extension:{type:q.LoadParser,priority:Ze.Normal},name:"loadBitmapFont",test(s){return lI.includes(oe.extname(s).toLowerCase())},async testParse(s){return ia.test(s)||Lc.test(s)},async parse(s,t,e){const i=ia.test(s)?ia.parse(s):Lc.parse(s),{src:r}=t,{page:n}=i,o=[];for(let l=0;l<n.length;++l){const c=n[l].file;let u=oe.join(oe.dirname(r),c);u=Ic(u,r),o.push(u)}const a=await e.load(o),h=o.map(l=>a[l]);return $s.install(i,h,!0)},async load(s,t){return(await Q.ADAPTER.fetch(s)).text()},unload(s){s.destroy()}};et.add(cI);const Nc=class or extends ai{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new or(Object.keys(or.defaultOptions).reduce((e,i)=>({...e,[i]:t[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete or.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:i}=or;if(i[t]){const r=i[t];return this._fonts.push(r),r.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Q.ADAPTER.fetch(t).then(r=>r.blob()).then(async r=>new Promise((n,o)=>{const a=URL.createObjectURL(r),h=new FileReader;h.onload=()=>n([a,h.result]),h.onerror=o,h.readAsDataURL(r)})).then(async([r,n])=>{const o=Object.assign({family:oe.basename(t,oe.extname(t)),weight:"normal",style:"normal",display:"auto",src:r,dataSrc:n,refs:1,originalUrl:t,fontFace:null},e);i[t]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(i=>!this._overrides.includes(i));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(i=>this._overrides.includes(i));e.length>0&&(this._overrides=this._overrides.filter(i=>!e.includes(i)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=tT(t)),typeof t=="number"?QA(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${r}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${n} ${t}`}reset(){Object.assign(this,or.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=Q.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Nc.availableFonts={},Nc.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let fl=Nc;const Fo=class ar extends ui{constructor(t="",e={}){super(ct.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,r=ct.from(i,{scaleMode:Q.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new gt,r.trim=new gt,this.texture=r;const n="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(n,"svg"),h=document.createElementNS(n,"foreignObject"),l=document.createElementNS(o,"div"),c=document.createElementNS(o,"style");h.setAttribute("width","10000"),h.setAttribute("height","10000"),h.style.overflow="hidden",a.appendChild(h),this.maxWidth=ar.defaultMaxWidth,this.maxHeight=ar.defaultMaxHeight,this._domElement=l,this._styleElement=c,this._svgRoot=a,this._foreignObject=h,this._foreignObject.appendChild(c),this._foreignObject.appendChild(l),this._image=i,this._loadImage=new Image,this._autoResolution=ar.defaultAutoResolution,this._resolution=ar.defaultResolution??Q.RESOLUTION,this.text=t,this.style=e}measureText(t){var c,u;const{text:e,style:i,resolution:r}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:i.toCSS(r)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=n;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const h=Math.min(this.maxWidth,Math.ceil(o)),l=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",h.toString()),this._svgRoot.setAttribute("height",l.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(c=this._style)==null?void 0:c.toCSS(r)}),this._styleElement.textContent=(u=this._style)==null?void 0:u.toGlobalCSS()),{width:h+i.padding*2,height:l+i.padding*2}}async updateText(t=!0){const{style:e,_image:i,_loadImage:r}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:n,height:o}=this.measureText();i.width=r.width=Math.ceil(Math.max(1,n)),i.height=r.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(h=>{r.onload=async()=>{if(a<this._updateID){h();return}await e.onBeforeDraw(),i.src=r.src,r.onload=null,r.src="",this.updateTexture(),h()};const l=new XMLSerializer().serializeToString(this._svgRoot);r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(l)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:i,resolution:r}=this,{padding:n}=t,{baseTexture:o}=e;e.trim.width=e._frame.width=i.width/r,e.trim.height=e._frame.height=i.height/r,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,r),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var i,r,n,o,a;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},ar.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=e,(r=this._svgRoot)==null||r.remove(),this._svgRoot=e,(n=this._domElement)==null||n.remove(),this._domElement=e,(o=this._foreignObject)==null||o.remove(),this._foreignObject=e,(a=this._styleElement)==null||a.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Ks(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Ks(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof fl?(this.ownsStyle=!1,this._style=t):t instanceof ai?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=fl.from(t)):(this.ownsStyle=!0,this._style=new fl(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Fo.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Fo.defaultMaxWidth=2024,Fo.defaultMaxHeight=2024,Fo.defaultAutoResolution=!0;const uI=s=>Object.prototype.toString.call(s),dI=s=>typeof s=="function",fI=s=>typeof s=="string",pI=s=>uI(s)==="[object Object]";function mI(s,t,e){var i={},r=i.noTrailing,n=r===void 0?!1:r,o=i.noLeading,a=o===void 0?!1:o,h=i.debounceMode,l=h===void 0?void 0:h,c,u=!1,d=0;function f(){c&&clearTimeout(c)}function p(g){var y=g||{},v=y.upcomingOnly,_=v===void 0?!1:v;f(),u=!_}function m(){for(var g=arguments.length,y=new Array(g),v=0;v<g;v++)y[v]=arguments[v];var _=this,w=Date.now()-d;if(u)return;function A(){d=Date.now(),t.apply(_,y)}function R(){c=void 0}!a&&l&&!c&&A(),f(),l===void 0&&w>s?a?(d=Date.now(),n||(c=setTimeout(l?R:A,s))):A():n!==!0&&(c=setTimeout(l?R:A,l===void 0?s-w:s))}return m.cancel=p,m}let gI=(s=21)=>crypto.getRandomValues(new Uint8Array(s)).reduce((t,e)=>(e&=63,e<36?t+=e.toString(36):e<62?t+=(e-26).toString(36).toUpperCase():e>62?t+="-":t+="_",t),"");function Ry(s,t={}){for(const e in t)s.baseTexture[e]=t[e]}function Fs(s){return typeof s=="string"?ct.from(s):s}function _I(s){return Object.keys(s||{}).some(t=>t.startsWith("on"))}var Hn={};function Iy(s,t,e,i){var o;const r=$a();function n(){var a;e&&i!==e&&((a=s[`__vp_scope_${t}`])==null||a.stop());for(const[h,l]of Object.entries(i))s[t][h]=l}return r.run(()=>{Xm(n),zn(n)}),(o=s.on)==null||o.call(s,"destroyed",()=>r.stop()),s[`__vp_scope_${t}`]=r,!0}function yI(s,t,e,i,r){switch(e){case t:return pI(r)?Iy(s,t,i,r):xI(s,t,r);case`${t}X`:return Or(s[t],"x",()=>s[t].x=r);case`${t}Y`:return Or(s[t],"y",()=>s[t].y=r)}return!1}function Or(s,t,e){const i=`_vp_initkey_${t}`;function r(){e()}return s[i]?r():(Reflect.set(s,i,!0),zn(r)),!0}function xI(s,t,e){const[i,r,n]=Array.isArray(e)?e:[e,e,e];return Or(s[t],t,()=>{var o;return(o=s[t])==null?void 0:o.set(i,r,n)}),!0}function Os(s,t,e){return s[`_vp_skip_first_set_${t}`]?Or(s,t,e):s[`_vp_skip_first_set_${t}`]=!0,!0}var vI={name:"Container",createElement:()=>new ve},bI={name:"ParticleContainer",createElement:s=>new DR(s["max-size"]||s.maxSize,s.properties),patchProp(s,t,e,i){switch(t){case"max-size":case"properties":break;default:Je(s,t,e,i)}}},wI={name:"Sprite",createElement:s=>new ui(Fs(s.texture)),remove(s){const t=s.texture;t==null||t.baseTexture.destroy(),s.destroy()}},EI={name:"SimpleMesh",createElement:s=>new FR(Fs(s.texture))},AI={name:"Graphics",createElement:s=>new Hu(s.geometry)},TI={name:"Text",createElement:s=>new to(s.text,s.style,s.canvas),patchProp(s,t,e,i){switch(t){case"text":Os(s,t,()=>s.text=i);break;case"style":Os(s,t,()=>Iy(s,t,e,i));break;default:Je(s,t,e,i)}}},SI={name:"BitmapText",createElement:s=>new Cy(s.text,s.style),patchProp(s,t,e,i){switch(t){case"text":Os(s,t,()=>s.text=i);break;case"style":break;case"dirty":case"roundPixels":Xr(s,t,e,i);break;default:Je(s,t,e,i)}}},CI={name:"TilingSprite",createElement:s=>new Xu(Fs(s.texture),s.width,s.height),patchProp(s,t,e,i){switch(t){case"width":case"height":Os(s,t,()=>s[t]=i);break;case"uvRespectAnchor":Xr(s,t,e,i);break;default:Je(s,t,e,i)}}},RI={name:"AnimatedSprite",createElement:s=>new Oa(s.textures.map(Fs),s["auto-update"]||s.autoUpdate),patchProp(s,t,e,i){switch(t){case"textures":Os(s,t,()=>{s.textures=i.map(Fs),s.loop&&s.gotoAndPlay(0)});break;case"playing":const r=i===""||!!i;Or(s,t,()=>r?s.play():s.stop());break;case"gotoAndPlay":Or(s,t,()=>s.gotoAndPlay(i));break;case"loop":case"updateAnchor":Xr(s,t,e,i);break;case"onComplete":case"onFrameChange":case"onLoop":Reflect.set(s,t,i);break;default:Je(s,t,e,i)}}},II={name:"Mesh",createElement:s=>new Fr(s.geometry,s.shader,s.state,s.drawMode),patchProp(s,t,e,i){switch(t){case"geometry":case"shader":case"state":case"drawMode":Os(s,t,()=>s[t]=i);break;case"roundPixels":Xr(s,t,e,i);break;default:Je(s,t,e,i)}}},PI={name:"NineSlicePlane",createElement:s=>new BR(Fs(s.texture)),patchProp(s,t,e,i){switch(t){case"roundPixels":case"autoResize":Xr(s,t,e,i);break;default:Je(s,t,e,i)}}},MI={name:"SimplePlane",createElement:s=>new fy(Fs(s.texture),s.width,s.height)},BI={name:"SimpleRope",createElement:s=>new OR(Fs(s.texture),s.points),patchProp(s,t,e,i){switch(t){case"texture":case"points":break;default:Je(s,t,e,i)}}},FI={name:"BlurFilter",createElement:s=>new K_(s.blur,s.quality,s.resolution)},OI={name:"AlphaFilter",createElement:s=>new q_(s.alpha)},DI={name:"DisplacementFilter",createElement:s=>new Z_(s.sprite,s.scale),patchProp(s,t,e,i){switch(t){case"sprite":case"scale":Os(s,t,()=>s.scale=i);break;default:Je(s,t,e,i)}}},LI={name:"ColorMatrixFilter",createElement:()=>new Ra},NI={name:"NoiseFilter",createElement:s=>new Q_(s.noise,s.seed),patchProp(s,t,e,i){switch(t){case"noise":case"seed":Os(s,t,()=>s[t]=i);break;default:Je(s,t,e,i)}}},kI={name:"FXAAFilter",createElement:()=>new J_},UI=[vI,bI,wI,EI,AI,TI,SI,CI,RI,II,PI,MI,BI,FI,OI,DI,LI,NI,kI];function Np(s){const{createElement:t,name:e}=s;function i(...r){const n=t(...r);return n._vp_name=e,n}s.createElement=i,Hn[e]=s}function kp(s){Array.isArray(s)?s.forEach(Np):Np(s)}function GI(s){const t=["createComment","insertStaticContent","createText","querySelector","createElement"];for(const e in s){if(t.includes(e))continue;const i=s[e];if(e==="patchProp"){s[e]=(r,n,...o)=>{var h;const a=(h=Hn[r._vp_name])==null?void 0:h[e];return n=ye(n),a?a(r,n,...o):i(r,n,...o)};continue}s[e]=(r,...n)=>{var a;const o=(a=Hn[r._vp_name])==null?void 0:a[e];return o?o==null?void 0:o(r,...n):i(r,...n)}}return s}function $I(s){const t=s.createApp,e=s.render;function i(...n){const o=t(...n);return Object.assign(o.config.compilerOptions,{isCustomElement:X1}),o}function r(...n){return e(...n)}kp(UI),Object.assign(s,{createApp:i,render:r,use:kp})}var Py=class extends ui{constructor(){super(...arguments),Ch(this,"visible",!1),Ch(this,"renderable",!1),Ch(this,"_vp_empty",!0)}render(){}};function HI(s,t,e){t.filters??(t.filters=[]);function i(){var n;const r=t.filters.indexOf(s);(n=t.filters)==null||n.splice(r>>>0,1)}s.parent=t,s.destroy=i,t.filters.push(s)}function XI(s){var e;const t=s.parent.filters.indexOf(s);return s.parent.filters.length<=t+1?null:(e=s.parent.filters)==null?void 0:e[t+1]}function VI(s,t,e){e?t==null||t.addChildAt(s,t.getChildIndex(e)):s&&t.addChild(s)}function WI(s){const t=s.parent.getChildIndex(s);return s.parent.children.length<=t+1?null:s.parent.getChildAt(t+1)??null}var zI=["accessible","cullable","renderable","visible","isMask"],jI=["position","scale","pivot","skew","anchor","tilePosition","tileScale"];function Je(s,t,e,i){qI(s,t,e,i)||YI(s,t,e,i)||zI.includes(t)&&Xr(s,t,e,i)||KI(s,t,e,i)||ZI(s,t,e,i)||Reflect.set(s,t,i)}function YI(s,t,e,i){return t==="texture"?Os(s,t,()=>s.texture=Fs(i)):t==="textureOptions"?(Ry(s.texture,i),!0):!1}function qI(s,t,e,i){if(t==="onRender"&&!e&&dI(i)){const r=$a();return r.run(()=>Xm(()=>i(s))),s.on("destroyed",()=>r.stop()),!0}return!1}function KI(s,t,e,i){for(const r of jI)if(t.startsWith(r))return yI(s,r,t,e,i);return!1}function ZI(s,t,e,i){if(!t.startsWith("on"))return!1;const r=t.slice(2).toLowerCase();return e&&s.off(r,e),i&&(s==null||s.on(r,i)),!0}function Xr(s,t,e,i){return s[t]=i===""||!!i,!0}function JI(s,t,e,i,r){let n;t.startsWith(s)?(t=ye(t),n=Hn[t.slice(s.length)].createElement):(t=ye(t),t=t.charAt(0).toUpperCase()+t.slice(1),n=Hn[t].createElement),n||(n=()=>new ve);const o=n(r??{});return o instanceof Nt&&_I(r)&&o.eventMode==="auto"&&(o.eventMode="static"),o instanceof de&&(o._vp_filter=!0),Wn(o),o}function QI(s){return s==null?void 0:s.parent}function tP(s){return s=s.replace(/\\n/g,`
`),s?new to(s):new Py(ct.EMPTY)}function eP(){return new Py(ct.EMPTY)}function sP(s){s.destroy()}function iP(s,t,e){Reflect.get(s,"_vp_filter")?HI(s,t):VI(s,t,e)}function rP(s){return Reflect.get(s,"_vp_filter")?XI(s):WI(s)}function nP(s,t,e){e=e.replace(/\\n/g,`
`),t instanceof to||t instanceof Cy?t.text=e.trim():bv()}var oP={createElement:JI,parentNode:QI,createText:tP,createComment:eP,remove:sP,insert:iP,nextSibling:rP,setText:nP};function aP(s={}){const{createElement:t,setText:e,...i}=oP,{prefix:r="pixi"}=s,n=GI({createElement:(...o)=>t(r,...o),setElementText:(...o)=>e(r,...o),setText:(...o)=>e(r,...o),patchProp:Je,...i});return ng(n)}var Vu=aP();$I(Vu);var hP=Vu.createApp;Vu.render;function My(s){function t(){Jt.shared.add(s)}function e(){Jt.shared.remove(s)}return t(),G1(e),e}var lP=Symbol("pixi_application");function cP(s,t){const e=t==null?void 0:t.app;e&&(s.config.globalProperties=e.config.globalProperties,Object.assign(s._context,e._context))}var uP=ja({props:{antialias:{type:Boolean,default:!0},autoDensity:{type:Boolean,default:!0},autoStart:{type:Boolean,default:!0},background:[Number,String,Array],backgroundColor:[Number,String,Array],backgroundAlpha:{type:Number,default:1},clearBeforeRender:{type:Boolean,default:!0},forceCanvas:Boolean,alpha:Number,depth:Boolean,desynchronized:Boolean,failIfMajorPerformanceCaveat:Boolean,powerPreference:String,premultipliedAlpha:Boolean,preserveDrawingBuffer:Boolean,stencil:{type:Boolean,default:!0},width:Number,height:Number,resolution:Number,resizeTo:Object},setup(s,{slots:t,expose:e}){const{appContext:i}=yu(),r=Pe(),n=Pe();let o;function a(){var u;(u=r.value)==null||u.getContext("webgl",{alpha:s.alpha,antialias:s.antialias,depth:s.depth,desynchronized:s.desynchronized,failIfMajorPerformanceCaveat:s.failIfMajorPerformanceCaveat,powerPreference:s.powerPreference,premultipliedAlpha:s.premultipliedAlpha,preserveDrawingBuffer:s.preserveDrawingBuffer,stencil:s.stencil});const c=new sy({view:r.value,...s});n.value=Wn(c),o=hP({render:()=>Pl(t,"default")}),cP(o,i),o.provide(lP,n),o.mount(n.value.stage)}function h(){var c;o==null||o.unmount(),o=void 0,(c=n.value)==null||c.destroy(),n.value=void 0}function l(){if(!n.value)return;const c=s.width||n.value.renderer.width,u=s.height||n.value.renderer.height;n.value.renderer.resize(c,u)}return ii(()=>[s.width,s.height],mI(50,l)),jm(a),pu(h),e({canvas:r,app:n}),()=>vu("canvas",{ref:r})}}),dP={onResolved:Function,onProgress:Function,resources:{type:[Object,Array],required:!0},options:{type:Object,default:()=>({})},bundleIds:String},fP=ja({props:dP,setup(s,{slots:t}){const e=Pe(!1),i=Pe(),r=Pe(0),n=s.bundleIds||gI(5);function o(l){var c;r.value=l,(c=s.onProgress)==null||c.call(s,l)}async function a(){var c;Zs.addBundle(n,await pP(s.resources));const l=await Zs.loadBundle(n,o);for(const u in l)Ry(l[u],s.options);i.value=l,(c=s.onResolved)==null||c.call(s,l)}async function h(){const l=Zs.resolver._assetMap;for(const c in i.value)delete l[c],delete l[`${n}-${c}`];await Zs.unloadBundle(n)}return ii(()=>[s.resources,s.bundleIds],()=>{e.value=!0,a().finally(()=>e.value=!1)},{deep:!0,immediate:!0}),fu(h),()=>e.value?Pl(t,"fallback",{progress:r.value}):Pl(t,"default",{textures:i.value})}});async function pl(s){const t=await s;return fI(t)?t:t.default}async function pP(s){const t={};for(const e in s){let i=s[e];if(i=i.default||i,Array.isArray(i)){t[i[0]]=await pl(i[1]);continue}Array.isArray(s)?t[i]=await pl(i):t[e]=await pl(i)}return t}const Up={1:{rocket:{x:80,y:150},moon:{x:700,y:60,scale:.1},distance:75,blurp:"To the Moon!"},2:{rocket:{x:80,y:150},moon:{x:700,y:80,scale:.2},distance:100,blurp:"Up and to the right!"},3:{rocket:{x:80,y:150},moon:{x:700,y:100,scale:.3},distance:120,blurp:"To, to, to, to the moon!"},4:{rocket:{x:80,y:150},moon:{x:700,y:120,scale:.4},distance:150,blurp:"Something, something moon!"}},mP="modulepreload",gP=function(s){return"/"+s},Gp={},By=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),o=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));r=Promise.all(e.map(a=>{if(a=gP(a),a in Gp)return;Gp[a]=!0;const h=a.endsWith(".css"),l=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const c=document.createElement("link");if(c.rel=h?"stylesheet":mP,h||(c.as="script",c.crossOrigin=""),c.href=a,o&&c.setAttribute("nonce",o),document.head.appendChild(c),h)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>t()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})};var be=(s=>(s.Application="application",s.WebGLPipes="webgl-pipes",s.WebGLPipesAdaptor="webgl-pipes-adaptor",s.WebGLSystem="webgl-system",s.WebGPUPipes="webgpu-pipes",s.WebGPUPipesAdaptor="webgpu-pipes-adaptor",s.WebGPUSystem="webgpu-system",s.CanvasSystem="canvas-system",s.CanvasPipesAdaptor="canvas-pipes-adaptor",s.CanvasPipes="canvas-pipes",s.Asset="asset",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser",s.MaskEffect="mask-effect",s.BlendMode="blend-mode",s.TextureSource="texture-source",s.Environment="environment",s))(be||{});const kc=s=>{if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");s={...typeof s.extension!="object"?{type:s.extension}:s.extension,ref:s}}if(typeof s=="object")s={...s};else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},Oo=(s,t)=>kc(s).priority??t,eo={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...s){return s.map(kc).forEach(t=>{t.type.forEach(e=>{var i,r;return(r=(i=this._removeHandlers)[e])==null?void 0:r.call(i,t)})}),this},add(...s){return s.map(kc).forEach(t=>{t.type.forEach(e=>{var n,o;const i=this._addHandlers,r=this._queue;i[e]?(o=i[e])==null||o.call(i,t):(r[e]=r[e]||[],(n=r[e])==null||n.push(t))})}),this},handle(s,t,e){var o;const i=this._addHandlers,r=this._removeHandlers;if(i[s]||r[s])throw new Error(`Extension type ${s} already has a handler`);i[s]=t,r[s]=e;const n=this._queue;return n[s]&&((o=n[s])==null||o.forEach(a=>t(a)),delete n[s]),this},handleByMap(s,t){return this.handle(s,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(s,t,e=-1){return this.handle(s,i=>{t.findIndex(n=>n.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((n,o)=>Oo(o.value,e)-Oo(n.value,e)))},i=>{const r=t.findIndex(n=>n.name===i.name);r!==-1&&t.splice(r,1)})},handleByList(s,t,e=-1){return this.handle(s,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((r,n)=>Oo(n,e)-Oo(r,e)))},i=>{const r=t.indexOf(i.ref);r!==-1&&t.splice(r,1)})}},_P={extension:{type:be.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await By(()=>import("./browserAll-B938OL9Y.js"),__vite__mapDeps([0,1]))}},yP={extension:{type:be.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await By(()=>import("./webworkerAll-D1qwLx7L.js"),[])}};class Se{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new Se(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Fy={exports:{}};(function(s){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(h,l,c){this.fn=h,this.context=l,this.once=c||!1}function n(h,l,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new r(c,u||h,d),p=e?e+l:l;return h._events[p]?h._events[p].fn?h._events[p]=[h._events[p],f]:h._events[p].push(f):(h._events[p]=f,h._eventsCount++),h}function o(h,l){--h._eventsCount===0?h._events=new i:delete h._events[l]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)t.call(c,u)&&l.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=e?e+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(l){var c=e?e+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,d,f,p){var m=e?e+l:l;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,_;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,d),!0;case 5:return g.fn.call(g.context,c,u,d,f),!0;case 6:return g.fn.call(g.context,c,u,d,f,p),!0}for(_=1,v=new Array(y-1);_<y;_++)v[_-1]=arguments[_];g.fn.apply(g.context,v)}else{var w=g.length,A;for(_=0;_<w;_++)switch(g[_].once&&this.removeListener(l,g[_].fn,void 0,!0),y){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,c);break;case 3:g[_].fn.call(g[_].context,c,u);break;case 4:g[_].fn.call(g[_].context,c,u,d);break;default:if(!v)for(A=1,v=new Array(y-1);A<y;A++)v[A-1]=arguments[A];g[_].fn.apply(g[_].context,v)}}return!0},a.prototype.on=function(l,c,u){return n(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return n(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,d){var f=e?e+l:l;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||d&&!p[m].once||u&&p[m].context!==u)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=e?e+l:l,this._events[c]&&o(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,s.exports=a})(Fy);var xP=Fy.exports;const dh=Su(xP),vP=Math.PI*2,bP=180/Math.PI,wP=Math.PI/180;class ds{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new ds(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return ml.x=0,ml.y=0,ml}}const ml=new ds;class Vt{constructor(t=1,e=0,i=0,r=1,n=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new ds;const i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e}applyInverse(t,e){e=e||new ds;const i=this.a,r=this.b,n=this.c,o=this.d,a=this.tx,h=this.ty,l=1/(i*o+n*-r),c=t.x,u=t.y;return e.x=o*l*c+-n*l*u+(h*n-a*o)*l,e.y=i*l*u+-r*l*c+(-h*i+a*r)*l,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}appendFrom(t,e){const i=t.a,r=t.b,n=t.c,o=t.d,a=t.tx,h=t.ty,l=e.a,c=e.b,u=e.c,d=e.d;return this.a=i*l+r*u,this.b=i*c+r*d,this.c=n*l+o*u,this.d=n*c+o*d,this.tx=a*l+h*u+e.tx,this.ty=a*c+h*d+e.ty,this}setTransform(t,e,i,r,n,o,a,h,l){return this.a=Math.cos(a+l)*n,this.b=Math.sin(a+l)*n,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,r=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-r,n),h=Math.atan2(i,e),l=Math.abs(a+h);return l<1e-5||Math.abs(vP-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*n),t}invert(){const t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Vt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return AP.identity()}static get shared(){return EP.identity()}}const EP=new Vt,AP=new Vt,Ai=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ti=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Si=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ci=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Uc=[],Oy=[],Do=Math.sign;function TP(){for(let s=0;s<16;s++){const t=[];Uc.push(t);for(let e=0;e<16;e++){const i=Do(Ai[s]*Ai[e]+Si[s]*Ti[e]),r=Do(Ti[s]*Ai[e]+Ci[s]*Ti[e]),n=Do(Ai[s]*Si[e]+Si[s]*Ci[e]),o=Do(Ti[s]*Si[e]+Ci[s]*Ci[e]);for(let a=0;a<16;a++)if(Ai[a]===i&&Ti[a]===r&&Si[a]===n&&Ci[a]===o){t.push(a);break}}}for(let s=0;s<16;s++){const t=new Vt;t.set(Ai[s],Ti[s],Si[s],Ci[s],0,0),Oy.push(t)}}TP();const Gt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:s=>Ai[s],uY:s=>Ti[s],vX:s=>Si[s],vY:s=>Ci[s],inv:s=>s&8?s&15:-s&7,add:(s,t)=>Uc[s][t],sub:(s,t)=>Uc[s][Gt.inv(t)],rotate180:s=>s^4,isVertical:s=>(s&3)===2,byDirection:(s,t)=>Math.abs(s)*2<=Math.abs(t)?t>=0?Gt.S:Gt.N:Math.abs(t)*2<=Math.abs(s)?s>0?Gt.E:Gt.W:t>0?s>0?Gt.SE:Gt.SW:s>0?Gt.NE:Gt.NW,matrixAppendRotationInv:(s,t,e=0,i=0)=>{const r=Oy[Gt.inv(t)];r.tx=e,r.ty=i,s.append(r)}},Lo=[new ds,new ds,new ds,new ds];class fs{constructor(t=0,e=0,i=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new fs(0,0,0,0)}clone(){return new fs(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i){const{width:r,height:n}=this;if(r<=0||n<=0)return!1;const o=this.x,a=this.y,h=o-i/2,l=o+r+i/2,c=a-i/2,u=a+n+i/2,d=o+i/2,f=o+r-i/2,p=a+i/2,m=a+n-i/2;return t>=h&&t<=l&&e>=c&&e<=u&&!(t>d&&t<f&&e>p&&e<m)}intersects(t,e){if(!e){const S=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=S)return!1;const $=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>$}const i=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=i||o<=n)return!1;const a=Lo[0].set(t.left,t.top),h=Lo[1].set(t.left,t.bottom),l=Lo[2].set(t.right,t.top),c=Lo[3].set(t.right,t.bottom);if(l.x<=a.x||h.y<=a.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(a,a),e.apply(h,h),e.apply(l,l),e.apply(c,c),Math.max(a.x,h.x,l.x,c.x)<=i||Math.min(a.x,h.x,l.x,c.x)>=r||Math.max(a.y,h.y,l.y,c.y)<=n||Math.min(a.y,h.y,l.y,c.y)>=o))return!1;const d=u*(h.y-a.y),f=u*(a.x-h.x),p=d*i+f*n,m=d*r+f*n,g=d*i+f*o,y=d*r+f*o;if(Math.max(p,m,g,y)<=d*a.x+f*a.y||Math.min(p,m,g,y)>=d*c.x+f*c.y)return!1;const v=u*(a.y-l.y),_=u*(l.x-a.x),w=v*i+_*n,A=v*r+_*n,R=v*i+_*o,P=v*r+_*o;return!(Math.max(w,A,R,P)<=v*a.x+_*a.y||Math.min(w,A,R,P)>=v*c.x+_*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this}getBounds(t){return t=t||new fs,t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const gl={default:-1};function Qs(s="default"){return gl[s]===void 0&&(gl[s]=-1),++gl[s]}const $p={},Dr="8.0.0";function Lr(s,t,e=3){if($p[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${s}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`),console.warn(i))),$p[t]=!0}const Dy=()=>{};function AB(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function Hp(s){return!(s&s-1)&&!!s}function SP(s){const t={};for(const e in s)s[e]!==void 0&&(t[e]=s[e]);return t}const Xp=Object.create(null);function CP(s){const t=Xp[s];return t===void 0&&(Xp[s]=Qs("resource")),t}const Ly=class Ny extends dh{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Ny.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Lr(Dr,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=CP(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Ly.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let RP=Ly;const ky=class Uy extends dh{constructor(t={}){super(),this.options=t,this.uid=Qs("textureSource"),this._resourceType="textureSource",this._resourceId=Qs("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Uy.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new RP(SP(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Qs("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i=i||this._resolution,t=t||this.width,e=e||this.height;const r=Math.round(t*i),n=Math.round(e*i);return this.width=r/i,this.height=n/i,this._resolution=i,this.pixelWidth===r&&this.pixelHeight===n?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=n,this.emit("resize",this),this._resourceId=Qs("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Hp(this.pixelWidth)&&Hp(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};ky.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let fi=ky;class Wu extends fi{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Wu.extension=be.TextureSource;const Vp=new Vt;class IP{constructor(t,e){this.mapCoord=new Vt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let r=0;r<t.length;r+=2){const n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,r=t.trim;r&&(Vp.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Vp));const n=t.source,o=this.uClampFrame,a=this.clampMargin/n._resolution,h=this.clampOffset;return o[0]=(t.frame.x+a+h)/n.width,o[1]=(t.frame.y+a+h)/n.height,o[2]=(t.frame.x+t.frame.width-a+h)/n.width,o[3]=(t.frame.y+t.frame.height-a+h)/n.height,this.uClampOffset[0]=h/n.pixelWidth,this.uClampOffset[1]=h/n.pixelHeight,this.isSimple=t.frame.width===n.width&&t.frame.height===n.height&&t.rotate===0,!0}}class ie extends dh{constructor({source:t,label:e,frame:i,orig:r,trim:n,defaultAnchor:o,defaultBorders:a,rotate:h,dynamic:l}={}){if(super(),this.uid=Qs("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new fs,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new fi,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:c,height:u}=this._source;this.frame.width=c,this.frame.height=u}this.orig=r||this.frame,this.trim=n,this.rotate=h??0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new IP(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:r}=this._source,n=e.x/i,o=e.y/r,a=e.width/i,h=e.height/r;let l=this.rotate;if(l){const c=a/2,u=h/2,d=n+c,f=o+u;l=Gt.add(l,Gt.NW),t.x0=d+c*Gt.uX(l),t.y0=f+u*Gt.uY(l),l=Gt.add(l,2),t.x1=d+c*Gt.uX(l),t.y1=f+u*Gt.uY(l),l=Gt.add(l,2),t.x2=d+c*Gt.uX(l),t.y2=f+u*Gt.uY(l),l=Gt.add(l,2),t.x3=d+c*Gt.uX(l),t.y3=f+u*Gt.uY(l)}else t.x0=n,t.y0=o,t.x1=n+a,t.y1=o,t.x2=n+a,t.y2=o+h,t.x3=n,t.y3=o+h}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Lr(Dr,"Texture.baseTexture is now Texture.source"),this._source}}ie.EMPTY=new ie({label:"EMPTY",source:new fi({label:"EMPTY"})});ie.EMPTY.destroy=Dy;ie.WHITE=new ie({source:new Wu({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});ie.WHITE.destroy=Dy;function PP(s,t,e,i){const{width:r,height:n}=e.orig,o=e.trim;if(o){const a=o.width,h=o.height;s.minX=o.x-t._x*r-i,s.maxX=s.minX+a,s.minY=o.y-t._y*n-i,s.maxY=s.minY+h}else s.minX=-t._x*r-i,s.maxX=s.minX+r,s.minY=-t._y*n-i,s.maxY=s.minY+n}e_([s_]);const Nr=class dn{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof dn)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._normalize(t),this._value=this._cloneSource(t))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((n,o)=>n===e[o]);if(t!==null&&e!==null){const n=Object.keys(t),o=Object.keys(e);return n.length!==o.length?!1:n.every(a=>t[a]===e[a])}return t===e}toRgba(){const[t,e,i,r]=this._components;return{r:t,g:e,b:i,a:r}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb,t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(r*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t=t||this._arrayRgba;const[e,i,r,n]=this._components;return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb;const[e,i,r]=this._components;return t[0]=e,t[1]=i,t[2]=r,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,r,n]=dn._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=r,this._components[3]*=n,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,n=this._int&255;return e&&(i=i*t+.5|0,r=r*t+.5|0,n=n*t+.5|0),(t*255<<24)+(i<<16)+(r<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,r,n;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,r=(o&255)/255,n=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,r,n=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,r,n=255]=t,e/=255,i/=255,r/=255,n/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=dn.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=Xe(t);o.isValid()&&({r:e,g:i,b:r,a:n}=o.rgba,e/=255,i/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=r,this._components[3]=n,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((r,n)=>{t[n]=Math.min(Math.max(r,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof dn||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};Nr.shared=new Nr;Nr._temp=new Nr;Nr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let MP=Nr;const BP={cullArea:null,cullable:!1,cullableChildren:!0};function FP(s,t,e){const i=s.length;let r;if(t>=i||e===0)return;e=t+e>i?i-t:e;const n=i-e;for(r=t;r<n;++r)s[r]=s[r+e];s.length=n}const OP={allowChildren:!0,removeChildren(s=0,t){const e=t??this.children.length,i=e-s,r=[];if(i>0&&i<=e){for(let o=e-1;o>=s;o--){const a=this.children[o];a&&(r.push(a),a.parent=null)}FP(this.children,s,e);const n=this.renderGroup||this.parentRenderGroup;n&&n.removeChildren(r);for(let o=0;o<r.length;++o)this.emit("childRemoved",r[o],this,o),r[o].emit("removed",this);return r}else if(i===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(s){const t=this.getChildAt(s);return this.removeChild(t)},getChildAt(s){if(s<0||s>=this.children.length)throw new Error(`getChildAt: Index (${s}) does not exist.`);return this.children[s]},setChildIndex(s,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(s),this.addChildAt(s,t)},getChildIndex(s){const t=this.children.indexOf(s);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(s,t){this.allowChildren||Lr(Dr,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${s}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(s.parent){const r=s.parent.children.indexOf(s);if(s.parent===this&&r===t)return s;r!==-1&&s.parent.children.splice(r,1)}t===e.length?e.push(s):e.splice(t,0,s),s.parent=this,s.didChange=!0,s.didViewUpdate=!1,s._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(s),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",s,this,t),s.emit("added",this),s},swapChildren(s,t){if(s===t)return;const e=this.getChildIndex(s),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=s},removeFromParent(){var s;(s=this.parent)==null||s.removeChild(this)}};class Wp{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class zu{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}}class DP{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new zu(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const zp=new DP;class LP{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return zp.get(i.maskClass,t)}return t}returnMaskEffect(t){zp.return(t)}}const Gc=new LP;eo.handleByList(be.MaskEffect,Gc._effectClasses);const NP={_maskEffect:null,_filterEffect:null,effects:[],addEffect(s){if(this.effects.indexOf(s)!==-1)return;this.effects.push(s),this.effects.sort((i,r)=>i.priority-r.priority);const e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0),this._updateIsSimple()},removeEffect(s){const t=this.effects.indexOf(s);t!==-1&&(this.effects.splice(t,1),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(s){const t=this._maskEffect;(t==null?void 0:t.mask)!==s&&(t&&(this.removeEffect(t),Gc.returnMaskEffect(t),this._maskEffect=null),s!=null&&(this._maskEffect=Gc.getMaskEffect(s),this.addEffect(this._maskEffect)))},get mask(){var s;return(s=this._maskEffect)==null?void 0:s.mask},set filters(s){var n;!Array.isArray(s)&&s&&(s=[s]);const t=this._filterEffect||(this._filterEffect=new Wp);s=s;const e=(s==null?void 0:s.length)>0,i=((n=t.filters)==null?void 0:n.length)>0,r=e!==i;s=Array.isArray(s)?s.slice(0):s,t.filters=Object.freeze(s),r&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=s??null))},get filters(){var s;return(s=this._filterEffect)==null?void 0:s.filters},set filterArea(s){this._filterEffect||(this._filterEffect=new Wp),this._filterEffect.filterArea=s},get filterArea(){var s;return(s=this._filterEffect)==null?void 0:s.filterArea}},kP={label:null,get name(){return Lr(Dr,"Container.name property has been removed, use Container.label instead"),this.label},set name(s){Lr(Dr,"Container.name property has been removed, use Container.label instead"),this.label=s},getChildByName(s,t=!1){return this.getChildByLabel(s,t)},getChildByLabel(s,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const r=e[i];if(r.label===s||s instanceof RegExp&&s.test(r.label))return r}if(t)for(let i=0;i<e.length;i++){const n=e[i].getChildByLabel(s,!0);if(n)return n}return null},getChildrenByLabel(s,t=!1,e=[]){const i=this.children;for(let r=0;r<i.length;r++){const n=i[r];(n.label===s||s instanceof RegExp&&s.test(n.label))&&e.push(n)}if(t)for(let r=0;r<i.length;r++)i[r].getChildrenByLabel(s,!0,e);return e}},jp=new Vt;class kr{constructor(t=1/0,e=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=jp,this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new fs);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=jp,this}set(t,e,i,r){this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}addFrame(t,e,i,r,n){n||(n=this.matrix);const o=n.a,a=n.b,h=n.c,l=n.d,c=n.tx,u=n.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*t+h*e+c,y=a*t+l*e+u;g<d&&(d=g),y<f&&(f=y),g>p&&(p=g),y>m&&(m=y),g=o*i+h*e+c,y=a*i+l*e+u,g<d&&(d=g),y<f&&(f=y),g>p&&(p=g),y>m&&(m=y),g=o*t+h*r+c,y=a*t+l*r+u,g<d&&(d=g),y<f&&(f=y),g>p&&(p=g),y>m&&(m=y),g=o*i+h*r+c,y=a*i+l*r+u,g<d&&(d=g),y<f&&(f=y),g>p&&(p=g),y>m&&(m=y),this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,{a:o,b:a,c:h,d:l,tx:c,ty:u}=t;let d=o*e+h*i+c,f=a*e+l*i+u;this.minX=d,this.minY=f,this.maxX=d,this.maxY=f,d=o*r+h*i+c,f=a*r+l*i+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*e+h*n+c,f=a*e+l*n+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*r+h*n+c,f=a*r+l*n+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,r){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new kr(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,r){let n=this.minX,o=this.minY,a=this.maxX,h=this.maxY;r||(r=this.matrix);const l=r.a,c=r.b,u=r.c,d=r.d,f=r.tx,p=r.ty;for(let m=e;m<i;m+=2){const g=t[m],y=t[m+1],v=l*g+u*y+f,_=c*g+d*y+p;n=v<n?v:n,o=_<o?_:o,a=v>a?v:a,h=_>h?_:h}this.minX=n,this.minY=o,this.maxX=a,this.maxY=h}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}}const Ps=new zu(Vt),Ur=new zu(kr);function Gy(s,t,e){e.clear();let i,r;return s.parent?t?i=s.parent.worldTransform:(r=Ps.get().identity(),i=La(s,r)):i=Vt.IDENTITY,$y(s,e,i,t),r&&Ps.return(r),e.isValid||e.set(0,0,0,0),e}function $y(s,t,e,i){var a,h;if(!s.visible||!s.measurable)return;let r;i?r=s.worldTransform:(s.updateLocalTransform(),r=Ps.get(),r.appendFrom(s.localTransform,e));const n=t,o=!!s.effects.length;if(o&&(t=Ur.get().clear()),s.boundsArea)t.addRect(s.boundsArea,r);else{s.addBounds&&(t.matrix=r,s.addBounds(t));for(let l=0;l<s.children.length;l++)$y(s.children[l],t,r,i)}if(o){for(let l=0;l<s.effects.length;l++)(h=(a=s.effects[l]).addBounds)==null||h.call(a,t);n.addBounds(t,Vt.IDENTITY),Ur.return(t)}i||Ps.return(r)}function La(s,t){const e=s.parent;return e&&(La(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}let _l=0;const Yp=500;function Ui(...s){_l!==Yp&&(_l++,_l===Yp?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...s))}function Hy(s,t,e){return t.clear(),e||(e=Vt.IDENTITY),Xy(s,t,e,s,!0),t.isValid||t.set(0,0,0,0),t}function Xy(s,t,e,i,r){var h,l;let n;if(r)n=Ps.get(),n=e.copyTo(n);else{if(!s.visible||!s.measurable)return;s.updateLocalTransform();const c=s.localTransform;n=Ps.get(),n.appendFrom(c,e)}const o=t,a=!!s.effects.length;if(a&&(t=Ur.get().clear()),s.boundsArea)t.addRect(s.boundsArea,n);else{s.renderPipeId&&(t.matrix=n,s.addBounds(t));const c=s.children;for(let u=0;u<c.length;u++)Xy(c[u],t,n,i,!1)}if(a){for(let c=0;c<s.effects.length;c++)(l=(h=s.effects[c]).addLocalBounds)==null||l.call(h,t,i);o.addBounds(t,Vt.IDENTITY),Ur.return(t)}Ps.return(n)}function Vy(s,t){const e=s.children;for(let i=0;i<e.length;i++){const r=e[i],n=(r.uid&255)<<24|r._didChangeId&16777215;t.data[t.index]!==n&&(t.data[t.index]=n,t.didChange=!0),t.index++,r.children.length&&Vy(r,t)}return t.didChange}const UP=new Vt,GP={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(s,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=s/t*e:this.scale.x=e},_setHeight(s,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=s/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new kr});const s=this._localBoundsCacheData;return s.index=1,s.didChange=!1,s.data[0]!==this._didChangeId>>12&&(s.didChange=!0,s.data[0]=this._didChangeId>>12),Vy(this,s),s.didChange&&Hy(this,s.localBounds,UP),s.localBounds},getBounds(s,t){return Gy(this,s,t||new kr)}},$P={_onRender:null,set onRender(s){const t=this.renderGroup||this.parentRenderGroup;if(!s){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=s},get onRender(){return this._onRender}},HP={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(s){this._zIndex!==s&&(this._zIndex=s,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(XP))}};function XP(s,t){return s._zIndex-t._zIndex}const VP={getGlobalPosition(s=new ds,t=!1){return this.parent?this.parent.toGlobal(this._position,s,t):(s.x=this._position.x,s.y=this._position.y),s},toGlobal(s,t,e=!1){if(!e){this.updateLocalTransform();const i=La(this,new Vt);return i.append(this.localTransform),i.apply(s,t)}return this.worldTransform.apply(s,t)},toLocal(s,t,e,i){if(t&&(s=t.toGlobal(s,e,i)),!i){this.updateLocalTransform();const r=La(this,new Vt);return r.append(this.localTransform),r.applyInverse(s,e)}return this.worldTransform.applyInverse(s,e)}};class WP{constructor(){this.uid=Qs("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}class zP{constructor(t){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Vt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new WP,this._onRenderContainers=[],this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(t.didViewUpdate=!1,this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t))}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let r=0;r<i.length;r++)this._getChildren(i[r],e);return e}}function jP(s,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(s[i]=t[i])}const yl=new Se(null),xl=new Se(null),vl=new Se(null,1,1),qp=1,YP=2,bl=4;class Le extends dh{constructor(t={}){var e,i;super(),this.uid=Qs("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Vt,this.relativeGroupTransform=new Vt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Se(this,0,0),this._scale=vl,this._pivot=xl,this._skew=yl,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didChangeId=0,this._didLocalTransformChangeId=-1,jP(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(r=>this.addChild(r)),this.effects=[],(i=t.parent)==null||i.addChild(this)}static mixin(t){Object.defineProperties(Le.prototype,Object.getOwnPropertyDescriptors(t))}addChild(...t){if(this.allowChildren||Lr(Dr,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let r=0;r<t.length;r++)this.addChild(t[r]);return t[0]}const e=t[0];if(e.parent===this)return this.children.splice(this.children.indexOf(e),1),this.children.push(e),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),e;e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e.didViewUpdate=!1,e._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didChangeId+=4096,e._zIndex!==0&&e.depthOfChildModified(),e}removeChild(...t){if(t.length>1){for(let r=0;r<t.length;r++)this.removeChild(t[r]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didChangeId+=4096,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didChangeId++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){if(this.renderGroup&&t===!1)throw new Error("[Pixi] cannot undo a render group just yet");t&&this.enableRenderGroup()}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t&&t.removeChild(this),this.renderGroup=new zP(this),t&&t.addChild(this),this._updateIsSimple(),this.groupTransform=Vt.IDENTITY}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Vt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*bP}set angle(t){this.rotation=t*wP}get pivot(){return this._pivot===xl&&(this._pivot=new Se(this,0,0)),this._pivot}set pivot(t){this._pivot===xl&&(this._pivot=new Se(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===yl&&(this._skew=new Se(this,0,0)),this._skew}set skew(t){this._skew===yl&&(this._skew=new Se(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===vl&&(this._scale=new Se(this,1,1)),this._scale}set scale(t){this._scale===vl&&(this._scale=new Se(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();let r,n;typeof t!="object"?(r=t,n=e??t):(r=t.width,n=t.height??t.width),r!==void 0&&this._setWidth(r,i.width),n!==void 0&&this._setHeight(n,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){if((this._didLocalTransformChangeId&15)===this._didChangeId)return;this._didLocalTransformChangeId=this._didChangeId;const t=this.localTransform,e=this._scale,i=this._pivot,r=this._position,n=e._x,o=e._y,a=i._x,h=i._y;t.a=this._cx*n,t.b=this._sx*n,t.c=this._cy*o,t.d=this._sy*o,t.tx=r._x-(a*t.a+h*t.c),t.ty=r._y-(a*t.b+h*t.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=qp,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=MP.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=qp,this._onUpdate())}get tint(){const t=this.localColor;return((t&255)<<16)+(t&65280)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=YP,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?1:0;(this.localDisplayStatus&2)>>1!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=bl,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?1:0;(this.localDisplayStatus&4)>>2!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=bl,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=bl,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;const e=this.removeChildren(0,this.children.length);if(this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.children)for(let r=0;r<e.length;++r)e[r].destroy(t)}}Le.mixin(OP);Le.mixin(VP);Le.mixin($P);Le.mixin(GP);Le.mixin(NP);Le.mixin(kP);Le.mixin(HP);Le.mixin(BP);class Xn extends Le{constructor(t=ie.EMPTY){t instanceof ie&&(t={texture:t});const{texture:e=ie.EMPTY,anchor:i,roundPixels:r,width:n,height:o,...a}=t;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._didSpriteUpdate=!1,this._bounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._boundsDirty=!0,this._sourceBoundsDirty=!0,this._roundPixels=0,this._anchor=new Se({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=r??!1,n&&(this.width=n),o&&(this.height=o)}static from(t,e=!1){return t instanceof ie?new Xn(t):new Xn(ie.from(t,e))}set texture(t){t||(t=ie.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){const e=this.sourceBounds;return t.x>=e.maxX&&t.x<=e.minX&&t.y>=e.maxY&&t.y<=e.minY}addBounds(t){const e=this._texture.trim?this.sourceBounds:this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}onViewUpdate(){if(this._didChangeId+=4096,this._didSpriteUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}_updateBounds(){PP(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){const t=this._anchor,e=this._texture,i=this._sourceBounds,{width:r,height:n}=e.orig;i.maxX=-t._x*r,i.minX=i.maxX+r,i.maxY=-t._y*n,i.minY=i.maxY+n}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width)}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){let i,r;typeof t!="object"?(i=t,r=e??t):(i=t.width,r=t.height??t.width),i!==void 0&&this._setWidth(i,this._texture.orig.width),r!==void 0&&this._setHeight(r,this._texture.orig.height)}}const qP=new kr;function Wy(s,t,e){const i=qP;s.measurable=!0,Gy(s,e,i),t.addBoundsMask(i),s.measurable=!1}function zy(s,t,e){const i=Ur.get();s.measurable=!0;const r=Ps.get().identity(),n=jy(s,e,r);Hy(s,i,n),s.measurable=!1,t.addBoundsMask(i),Ps.return(r),Ur.return(i)}function jy(s,t,e){return s?(s!==t&&(jy(s.parent,t,e),s.updateLocalTransform(),e.append(s.localTransform)),e):(Ui("Mask bounds, renderable is not inside the root container"),e)}class Yy{constructor(t){this.priority=0,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Xn),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){Wy(this.mask,t,e)}addLocalBounds(t,e){zy(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Xn}}Yy.extension=be.MaskEffect;class qy{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}qy.extension=be.MaskEffect;class Ky{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){Wy(this.mask,t,e)}addLocalBounds(t,e){zy(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Le}}Ky.extension=be.MaskEffect;const KP={createCanvas:(s,t)=>{const e=document.createElement("canvas");return e.width=s,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(s,t)=>fetch(s,t),parseXML:s=>new DOMParser().parseFromString(s,"text/xml")};let Kp=KP;const ju={get(){return Kp},set(s){Kp=s}};class Zy extends fi{constructor(t){t.resource||(t.resource=ju.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity;const e=t.resource;(this.pixelWidth!==e.width||this.pixelWidth!==e.height)&&this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const r=super.resize(t,e,i);return r&&this.resizeCanvas(),r}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}}Zy.extension=be.TextureSource;class Jy extends fi{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=ju.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0),t.resource=e,Ui("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap}}Jy.extension=be.TextureSource;var $c=(s=>(s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY",s))($c||{});class wl{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=r}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Qy=class Ae{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new wl(null,null,1/0),this.deltaMS=1/Ae.targetFPMS,this.elapsedMS=1/Ae.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=$c.NORMAL){return this._addListener(new wl(t,e,i))}addOnce(t,e,i=$c.NORMAL){return this._addListener(new wl(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ae.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Ae.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Ae._shared){const t=Ae._shared=new Ae;t.autoStart=!0,t._protected=!0}return Ae._shared}static get system(){if(!Ae._system){const t=Ae._system=new Ae;t.autoStart=!0,t._protected=!0}return Ae._system}};Qy.targetFPMS=.06;let No=Qy,El;async function ZP(){return El??(El=(async()=>{var o;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(a=>{const h=document.createElement("video");h.onloadeddata=()=>a(h),h.onerror=()=>a(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteFramebuffer(r),t.deleteTexture(i),(o=t.getExtension("WEBGL_lose_context"))==null||o.loseContext(),n[0]<=n[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),El}const fh=class t0 extends fi{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...t0.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=No.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await ZP(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(No.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(No.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(No.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||globalThis.VideoFrame&&t instanceof VideoFrame}};fh.extension=be.TextureSource;fh.defaultOptions={...fi.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};fh.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let JP=fh;const hr=(s,t,e=!1)=>(Array.isArray(s)||(s=[s]),t?s.map(i=>typeof i=="string"||e?t(i):i):s);class QP{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||Ui(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=hr(t);let r;for(let h=0;h<this.parsers.length;h++){const l=this.parsers[h];if(l.test(e)){r=l.getCacheableAssets(i,e);break}}const n=new Map(Object.entries(r||{}));r||i.forEach(h=>{n.set(h,e)});const o=[...n.keys()],a={cacheKeys:o,keys:i};i.forEach(h=>{this._cacheMap.set(h,a)}),o.forEach(h=>{const l=r?r[h]:e;this._cache.has(h)&&this._cache.get(h)!==l&&Ui("[Cache] already has key:",h),this._cache.set(h,n.get(h))})}remove(t){if(!this._cacheMap.has(t)){Ui(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(r=>{this._cache.delete(r)}),e.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const lr=new QP,Hc=[];eo.handleByList(be.TextureSource,Hc);function tM(s={}){const t=s&&s.resource,e=t?s.resource:s,i=t?s:{resource:s};for(let r=0;r<Hc.length;r++){const n=Hc[r];if(n.test(e))return new n(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function eM(s={},t=!1){const e=s&&s.resource,i=e?s.resource:s,r=e?s:{resource:s};if(!t&&lr.has(i))return lr.get(i);const n=new ie({source:tM(r)});return n.on("destroy",()=>{lr.has(i)&&lr.remove(i)}),t||lr.set(i,n),n}function sM(s,t=!1){return typeof s=="string"?lr.get(s):s instanceof fi?new ie({source:s}):eM(s,t)}ie.from=sM;eo.add(Yy,qy,Ky,JP,Jy,Zy,Wu);var e0=(s=>(s[s.Low=0]="Low",s[s.Normal=1]="Normal",s[s.High=2]="High",s))(e0||{});function Ge(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function en(s){return s.split("?")[0].split("#")[0]}function iM(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rM(s,t,e){return s.replace(new RegExp(iM(t),"g"),e)}function nM(s,t){let e="",i=0,r=-1,n=0,o=-1;for(let a=0;a<=s.length;++a){if(a<s.length)o=s.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const h=e.lastIndexOf("/");if(h!==e.length-1){h===-1?(e="",i=0):(e=e.slice(0,h),i=e.length-1-e.lastIndexOf("/")),r=a,n=0;continue}}else if(e.length===2||e.length===1){e="",i=0,r=a,n=0;continue}}}else e.length>0?e+=`/${s.slice(r+1,a)}`:e=s.slice(r+1,a),i=a-r-1;r=a,n=0}else o===46&&n!==-1?++n:n=-1}return e}const Vn={toPosix(s){return rM(s,"\\","/")},isUrl(s){return/^https?:/.test(this.toPosix(s))},isDataUrl(s){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(s)},isBlobUrl(s){return s.startsWith("blob:")},hasProtocol(s){return/^[^/:]+:/.test(this.toPosix(s))},getProtocol(s){Ge(s),s=this.toPosix(s);const t=/^file:\/\/\//.exec(s);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(s);return e?e[0]:""},toAbsolute(s,t,e){if(Ge(s),this.isDataUrl(s)||this.isBlobUrl(s))return s;const i=en(this.toPosix(t??ju.get().getBaseUrl())),r=en(this.toPosix(e??this.rootname(i)));return s=this.toPosix(s),s.startsWith("/")?Vn.join(r,s.slice(1)):this.isAbsolute(s)?s:this.join(i,s)},normalize(s){if(Ge(s),s.length===0)return".";if(this.isDataUrl(s)||this.isBlobUrl(s))return s;s=this.toPosix(s);let t="";const e=s.startsWith("/");this.hasProtocol(s)&&(t=this.rootname(s),s=s.slice(t.length));const i=s.endsWith("/");return s=nM(s),s.length>0&&i&&(s+="/"),e?`/${s}`:t+s},isAbsolute(s){return Ge(s),s=this.toPosix(s),this.hasProtocol(s)?!0:s.startsWith("/")},join(...s){if(s.length===0)return".";let t;for(let e=0;e<s.length;++e){const i=s[e];if(Ge(i),i.length>0)if(t===void 0)t=i;else{const r=s[e-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(s){if(Ge(s),s.length===0)return".";s=this.toPosix(s);let t=s.charCodeAt(0);const e=t===47;let i=-1,r=!0;const n=this.getProtocol(s),o=s;s=s.slice(n.length);for(let a=s.length-1;a>=1;--a)if(t=s.charCodeAt(a),t===47){if(!r){i=a;break}}else r=!1;return i===-1?e?"/":this.isUrl(o)?n+s:n:e&&i===1?"//":n+s.slice(0,i)},rootname(s){Ge(s),s=this.toPosix(s);let t="";if(s.startsWith("/")?t="/":t=this.getProtocol(s),this.isUrl(s)){const e=s.indexOf("/",t.length);e!==-1?t=s.slice(0,e):t=s,t.endsWith("/")||(t+="/")}return t},basename(s,t){Ge(s),t&&Ge(t),s=en(this.toPosix(s));let e=0,i=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";let o=t.length-1,a=-1;for(n=s.length-1;n>=0;--n){const h=s.charCodeAt(n);if(h===47){if(!r){e=n+1;break}}else a===-1&&(r=!1,a=n+1),o>=0&&(h===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=s.length),s.slice(e,i)}for(n=s.length-1;n>=0;--n)if(s.charCodeAt(n)===47){if(!r){e=n+1;break}}else i===-1&&(r=!1,i=n+1);return i===-1?"":s.slice(e,i)},extname(s){Ge(s),s=en(this.toPosix(s));let t=-1,e=0,i=-1,r=!0,n=0;for(let o=s.length-1;o>=0;--o){const a=s.charCodeAt(o);if(a===47){if(!r){e=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===46?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===e+1?"":s.slice(t,i)},parse(s){Ge(s);const t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;s=en(this.toPosix(s));let e=s.charCodeAt(0);const i=this.isAbsolute(s);let r;t.root=this.rootname(s),i||this.hasProtocol(s)?r=1:r=0;let n=-1,o=0,a=-1,h=!0,l=s.length-1,c=0;for(;l>=r;--l){if(e=s.charCodeAt(l),e===47){if(!h){o=l+1;break}continue}a===-1&&(h=!1,a=l+1),e===46?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||a===-1||c===0||c===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&i?t.base=t.name=s.slice(1,a):t.base=t.name=s.slice(o,a)):(o===0&&i?(t.name=s.slice(1,n),t.base=s.slice(1,a)):(t.name=s.slice(o,n),t.base=s.slice(o,a)),t.ext=s.slice(n,a)),t.dir=this.dirname(s),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function s0(s,t,e,i,r){const n=t[e];for(let o=0;o<n.length;o++){const a=n[o];e<t.length-1?s0(s.replace(i[e],a),t,e+1,i,r):r.push(s.replace(i[e],a))}}function oM(s){const t=/\{(.*?)\}/g,e=s.match(t),i=[];if(e){const r=[];e.forEach(n=>{const o=n.substring(1,n.length-1).split(",");r.push(o)}),s0(s,r,0,e,i)}else i.push(s);return i}const Zp=s=>!Array.isArray(s);class i0{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return hr(e||i,n=>typeof n=="string"?n:Array.isArray(n)?n.map(o=>(o==null?void 0:o.src)??o):n!=null&&n.src?n.src:n,!0)}addManifest(t){this._manifest&&Ui("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let r=e;Array.isArray(e)||(r=Object.entries(e).map(([n,o])=>typeof o=="string"||Array.isArray(o)?{alias:n,src:o}:{alias:n,...o})),r.forEach(n=>{const o=n.src,a=n.alias;let h;if(typeof a=="string"){const l=this._createBundleAssetId(t,a);i.push(l),h=[a,l]}else{const l=a.map(c=>this._createBundleAssetId(t,c));i.push(...l),h=[...a,...l]}this.add({...n,alias:h,src:o})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=n=>{this.hasKey(n)&&Ui(`[Resolver] already has key: ${n} overwriting`)},hr(e).forEach(n=>{const{src:o}=n;let{data:a,format:h,loadParser:l}=n;const c=hr(o).map(f=>typeof f=="string"?oM(f):Array.isArray(f)?f:[f]),u=this.getAlias(n);Array.isArray(u)?u.forEach(i):i(u);const d=[];c.forEach(f=>{f.forEach(p=>{let m={};if(typeof p!="object"){m.src=p;for(let g=0;g<this._parsers.length;g++){const y=this._parsers[g];if(y.test(p)){m=y.parse(p);break}}}else a=p.data??a,h=p.format??h,l=p.loadParser??l,m={...m,...p};if(!u)throw new Error(`[Resolver] alias is undefined for this asset: ${m.src}`);m=this._buildResolvedAsset(m,{aliases:u,data:a,format:h,loadParser:l}),d.push(m)})}),u.forEach(f=>{this._assetMap[f]=d})})}resolveBundle(t){const e=Zp(t);t=hr(t);const i={};return t.forEach(r=>{const n=this._bundles[r];if(n){const o=this.resolve(n),a={};for(const h in o){const l=o[h];a[this._extractAssetIdFromBundle(r,h)]=l}i[r]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const r in e)i[r]=e[r].src;return i}return e.src}resolve(t){const e=Zp(t);t=hr(t);const i={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let n=this._assetMap[r];const o=this._getPreferredOrder(n);o==null||o.priority.forEach(a=>{o.params[a].forEach(h=>{const l=n.filter(c=>c[a]?c[a]===h:!1);l.length&&(n=l)})}),this._resolverHash[r]=n[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],r=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:r,loadParser:n,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=Vn.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=n??t.loadParser,t.format=o??t.format??aM(t.src),t}}i0.RETINA_PREFIX=/@([0-9\.]+)x/;function aM(s){return s.split(".").pop().split("?").shift().split("#").shift()}const Jp=(s,t)=>{const e=t.split("?")[1];return e&&(s+=`?${e}`),s},r0=class fn{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof ie?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=fn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=fn.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const r=this._frameKeys[e],n=this._frames[r],o=n.frame;if(o){let a=null,h=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,c=new fs(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?a=new fs(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new fs(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(h=new fs(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new ie({source:this.textureSource,frame:a,orig:c,trim:h,rotate:n.rotated?2:0,defaultAnchor:n.anchor,defaultBorders:n.borders,label:r.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*fn.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*fn.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};r0.BATCH_SIZE=1e3;let Qp=r0;const hM=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function n0(s,t,e){const i={};if(s.forEach(r=>{i[r]=t}),Object.keys(t.textures).forEach(r=>{i[r]=t.textures[r]}),!e){const r=Vn.dirname(s[0]);t.linkedSheets.forEach((n,o)=>{const a=n0([`${r}/${t.data.meta.related_multi_packs[o]}`],n,!0);Object.assign(i,a)})}return i}const lM={extension:be.Asset,cache:{test:s=>s instanceof Qp,getCacheableAssets:(s,t)=>n0(s,t,!1)},resolver:{test:s=>{const e=s.split("?")[0].split("."),i=e.pop(),r=e.pop();return i==="json"&&hM.includes(r)},parse:s=>{var e;const t=s.split(".");return{resolution:parseFloat(((e=i0.RETINA_PREFIX.exec(s))==null?void 0:e[1])??"1"),format:t[t.length-2],src:s}}},loader:{name:"spritesheetLoader",extension:{type:be.LoadParser,priority:e0.Normal},async testParse(s,t){return Vn.extname(t.src).toLowerCase()===".json"&&!!s.frames},async parse(s,t,e){var l,c;const{texture:i,imageFilename:r}=(t==null?void 0:t.data)??{};let n=Vn.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let o;if(i instanceof ie)o=i;else{const u=Jp(n+(r??s.meta.image),t.src);o=(await e.load([u]))[u]}const a=new Qp(o.source,s);await a.parse();const h=(l=s==null?void 0:s.meta)==null?void 0:l.related_multi_packs;if(Array.isArray(h)){const u=[];for(const f of h){if(typeof f!="string")continue;let p=n+f;(c=t.data)!=null&&c.ignoreMultiPack||(p=Jp(p,t.src),u.push(e.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(u);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},async unload(s,t,e){await e.unload(s.textureSource._sourceOrigin),s.destroy(!1)}}};eo.add(lM);eo.add(_P,yP);const cM=["x","y","texture"],uM=.4,dM=.1,fM={__name:"Rocket",props:["x","y"],emits:["die","level-up","update:x","update:y"],setup(s,{emit:t}){const e=fe("socket"),i=s,r=wn(i,"x"),n=wn(i,"y"),o=Pe(-6),a=Pe(1),h=Re(()=>o.value<-2?"rocketFire":"rocketEmpty");My(c=>{n.value+=o.value*c,r.value+=a.value*c,o.value+=uM*c,a.valuue+=dM*c});function l(){o.value=-8,a.value=1}return e.on("new-click",()=>{l()}),zo(()=>n.value>window.innerHeight-40,()=>{n.value=window.innerHeight-40,o.value=0,a.value=0}),zo(()=>n.value<10,()=>{n.value=10,o.value=0}),zo(()=>r.value>window.innerWidth-30,()=>{r.value=window.innerWidth-30,a.value=0}),(c,u)=>(re(),Ce("sprite",{x:xt(r),y:xt(n),texture:h.value,"anchor-x":.5,"anchor-y":.5,scale:"0.2"},null,8,cM))}},pM=["x","y","scale"],mM="moon",gM={__name:"Moon",props:["x","y","scale"],setup(s){const t=s,e=wn(t,"x"),i=wn(t,"y"),r=wn(t,"scale");return(n,o)=>(re(),Ce("sprite",{x:xt(e),y:xt(i),texture:mM,"anchor-x":.5,"anchor-y":.5,scale:xt(r)},null,8,pM))}},_M={x:20,y:20,style:{fill:"white"}},yM={__name:"Loop",setup(s){function t(o,a){const h=o.x-a.x,l=o.y-a.y;return Math.hypot(h,l)}const e=Pe(1);let i=Gi(Up[e.value]);const r=Pe(0);function n(){e.value=e.value+1,i=Gi(Up[e.value])}return My(o=>{r.value=t(i.rocket,i.moon)}),zo(()=>r.value<i.distance,()=>{n()}),(o,a)=>(re(),Ce("container",null,[St("text",_M,Mi(xt(i).blurp),1),Zt(gM,{x:xt(i).moon.x,"onUpdate:x":a[0]||(a[0]=h=>xt(i).moon.x=h),y:xt(i).moon.y,"onUpdate:y":a[1]||(a[1]=h=>xt(i).moon.y=h),scale:xt(i).moon.scale,"onUpdate:scale":a[2]||(a[2]=h=>xt(i).moon.scale=h)},null,8,["x","y","scale"]),Zt(fM,{x:xt(i).rocket.x,"onUpdate:x":a[3]||(a[3]=h=>xt(i).rocket.x=h),y:xt(i).rocket.y,"onUpdate:y":a[4]||(a[4]=h=>xt(i).rocket.y=h)},null,8,["x","y"])]))}},xM={},vM={x:20,y:20,style:{fill:"white"}};function bM(s,t){return re(),Ce("text",vM,"Game has not started yet! Waiting...")}const wM=Yn(xM,[["render",bM]]),EM=St("text",{anchor:.5,x:120,y:120,style:{fill:"white"}}," Loading... ",-1),AM={__name:"GameView",setup(s){const t=Qa(),{getGame:e,getUsers:i,getClicks:r}=bu(t),n=window.innerWidth,o=window.innerHeight,a=window.devicePixelRatio,h={moon:"/textures/moon.png",rocketFire:"/textures/rocket.png",rocketEmpty:"/textures/rocket-empty.png"};return(l,c)=>(re(),vn(xt(uP),{width:xt(n),height:xt(o),resolution:xt(a),backgroundColor:"#aa33ff"},{default:Ho(()=>[Zt(xt(fP),{resources:h},{fallback:Ho(()=>[EM]),default:Ho(({textures:u})=>[xt(e)?(re(),vn(yM,{key:1})):(re(),vn(wM,{key:0}))]),_:1})]),_:1},8,["width","height","resolution"]))}},TM=r1({history:Fb("/"),routes:[{path:"/",name:"home",component:R1},{path:"/game",name:"game",component:AM},{path:"/admin",name:"admin",component:k1}]}),xs=Object.create(null);xs.open="0";xs.close="1";xs.ping="2";xs.pong="3";xs.message="4";xs.upgrade="5";xs.noop="6";const na=Object.create(null);Object.keys(xs).forEach(s=>{na[xs[s]]=s});const Xc={type:"error",data:"parser error"},o0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",a0=typeof ArrayBuffer=="function",h0=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Yu=({type:s,data:t},e,i)=>o0&&t instanceof Blob?e?i(t):tm(t,i):a0&&(t instanceof ArrayBuffer||h0(t))?e?i(t):tm(new Blob([t]),i):i(xs[s]+(t||"")),tm=(s,t)=>{const e=new FileReader;return e.onload=function(){const i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(s)};function em(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Al;function SM(s,t){if(o0&&s.data instanceof Blob)return s.data.arrayBuffer().then(em).then(t);if(a0&&(s.data instanceof ArrayBuffer||h0(s.data)))return t(em(s.data));Yu(s,!1,e=>{Al||(Al=new TextEncoder),t(Al.encode(e))})}const sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<sm.length;s++)pn[sm.charCodeAt(s)]=s;const CM=s=>{let t=s.length*.75,e=s.length,i,r=0,n,o,a,h;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const l=new ArrayBuffer(t),c=new Uint8Array(l);for(i=0;i<e;i+=4)n=pn[s.charCodeAt(i)],o=pn[s.charCodeAt(i+1)],a=pn[s.charCodeAt(i+2)],h=pn[s.charCodeAt(i+3)],c[r++]=n<<2|o>>4,c[r++]=(o&15)<<4|a>>2,c[r++]=(a&3)<<6|h&63;return l},RM=typeof ArrayBuffer=="function",qu=(s,t)=>{if(typeof s!="string")return{type:"message",data:l0(s,t)};const e=s.charAt(0);return e==="b"?{type:"message",data:IM(s.substring(1),t)}:na[e]?s.length>1?{type:na[e],data:s.substring(1)}:{type:na[e]}:Xc},IM=(s,t)=>{if(RM){const e=CM(s);return l0(e,t)}else return{base64:!0,data:s}},l0=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},c0="",PM=(s,t)=>{const e=s.length,i=new Array(e);let r=0;s.forEach((n,o)=>{Yu(n,!1,a=>{i[o]=a,++r===e&&t(i.join(c0))})})},MM=(s,t)=>{const e=s.split(c0),i=[];for(let r=0;r<e.length;r++){const n=qu(e[r],t);if(i.push(n),n.type==="error")break}return i};function BM(){return new TransformStream({transform(s,t){SM(s,e=>{const i=e.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const n=new DataView(r.buffer);n.setUint8(0,126),n.setUint16(1,i)}else{r=new Uint8Array(9);const n=new DataView(r.buffer);n.setUint8(0,127),n.setBigUint64(1,BigInt(i))}s.data&&typeof s.data!="string"&&(r[0]|=128),t.enqueue(r),t.enqueue(e)})}})}let Tl;function ko(s){return s.reduce((t,e)=>t+e.length,0)}function Uo(s,t){if(s[0].length===t)return s.shift();const e=new Uint8Array(t);let i=0;for(let r=0;r<t;r++)e[r]=s[0][i++],i===s[0].length&&(s.shift(),i=0);return s.length&&i<s[0].length&&(s[0]=s[0].slice(i)),e}function FM(s,t){Tl||(Tl=new TextDecoder);const e=[];let i=0,r=-1,n=!1;return new TransformStream({transform(o,a){for(e.push(o);;){if(i===0){if(ko(e)<1)break;const h=Uo(e,1);n=(h[0]&128)===128,r=h[0]&127,r<126?i=3:r===126?i=1:i=2}else if(i===1){if(ko(e)<2)break;const h=Uo(e,2);r=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),i=3}else if(i===2){if(ko(e)<8)break;const h=Uo(e,8),l=new DataView(h.buffer,h.byteOffset,h.length),c=l.getUint32(0);if(c>Math.pow(2,21)-1){a.enqueue(Xc);break}r=c*Math.pow(2,32)+l.getUint32(4),i=3}else{if(ko(e)<r)break;const h=Uo(e,r);a.enqueue(qu(n?h:Tl.decode(h),t)),i=0}if(r===0||r>s){a.enqueue(Xc);break}}}})}const u0=4;function Yt(s){if(s)return OM(s)}function OM(s){for(var t in Yt.prototype)s[t]=Yt.prototype[t];return s}Yt.prototype.on=Yt.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};Yt.prototype.once=function(s,t){function e(){this.off(s,e),t.apply(this,arguments)}return e.fn=t,this.on(s,e),this};Yt.prototype.off=Yt.prototype.removeListener=Yt.prototype.removeAllListeners=Yt.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+s];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,r=0;r<e.length;r++)if(i=e[r],i===t||i.fn===t){e.splice(r,1);break}return e.length===0&&delete this._callbacks["$"+s],this};Yt.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+s],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,r=e.length;i<r;++i)e[i].apply(this,t)}return this};Yt.prototype.emitReserved=Yt.prototype.emit;Yt.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Yt.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Fe=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function d0(s,...t){return t.reduce((e,i)=>(s.hasOwnProperty(i)&&(e[i]=s[i]),e),{})}const DM=Fe.setTimeout,LM=Fe.clearTimeout;function ph(s,t){t.useNativeTimers?(s.setTimeoutFn=DM.bind(Fe),s.clearTimeoutFn=LM.bind(Fe)):(s.setTimeoutFn=Fe.setTimeout.bind(Fe),s.clearTimeoutFn=Fe.clearTimeout.bind(Fe))}const NM=1.33;function kM(s){return typeof s=="string"?UM(s):Math.ceil((s.byteLength||s.size)*NM)}function UM(s){let t=0,e=0;for(let i=0,r=s.length;i<r;i++)t=s.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}function GM(s){let t="";for(let e in s)s.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return t}function $M(s){let t={},e=s.split("&");for(let i=0,r=e.length;i<r;i++){let n=e[i].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}class HM extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class Ku extends Yt{constructor(t){super(),this.writable=!1,ph(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new HM(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=qu(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=GM(t);return e.length?"?"+e:""}}const f0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Vc=64,XM={};let im=0,Go=0,rm;function nm(s){let t="";do t=f0[s%Vc]+t,s=Math.floor(s/Vc);while(s>0);return t}function p0(){const s=nm(+new Date);return s!==rm?(im=0,rm=s):s+"."+nm(im++)}for(;Go<Vc;Go++)XM[f0[Go]]=Go;let m0=!1;try{m0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const VM=m0;function g0(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||VM))return new XMLHttpRequest}catch{}if(!t)try{return new Fe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function WM(){}const zM=function(){return new g0({xdomain:!1}).responseType!=null}();class jM extends Ku{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let r=location.port;r||(r=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}const e=t&&t.forceBase64;this.supportsBinary=zM&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};MM(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,PM(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=p0()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new gs(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(r,n)=>{this.onError("xhr post error",r,n)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}}class gs extends Yt{constructor(t,e){super(),ph(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=e.data!==void 0?e.data:null,this.create()}create(){var t;const e=d0(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;const i=this.xhr=new g0(e);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var r;i.readyState===3&&((r=this.opts.cookieJar)===null||r===void 0||r.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=gs.requestsCount++,gs.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=WM,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete gs.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}gs.requestsCount=0;gs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",om);else if(typeof addEventListener=="function"){const s="onpagehide"in Fe?"pagehide":"unload";addEventListener(s,om,!1)}}function om(){for(let s in gs.requests)gs.requests.hasOwnProperty(s)&&gs.requests[s].abort()}const Zu=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),$o=Fe.WebSocket||Fe.MozWebSocket,am=!0,YM="arraybuffer",hm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class qM extends Ku{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=hm?{}:d0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=am&&!hm?e?new $o(t,e):new $o(t):new $o(t,e,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],r=e===t.length-1;Yu(i,this.supportsBinary,n=>{const o={};try{am&&this.ws.send(n)}catch{}r&&Zu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=p0()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!$o}}class KM extends Ku{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const e=FM(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),r=BM();r.readable.pipeTo(t.writable),this.writer=r.writable.getWriter();const n=()=>{i.read().then(({done:a,value:h})=>{a||(this.onPacket(h),n())}).catch(a=>{})};n();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],r=e===t.length-1;this.writer.write(i).then(()=>{r&&Zu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const ZM={websocket:qM,webtransport:KM,polling:jM},JM=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,QM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Wc(s){if(s.length>2e3)throw"URI too long";const t=s,e=s.indexOf("["),i=s.indexOf("]");e!=-1&&i!=-1&&(s=s.substring(0,e)+s.substring(e,i).replace(/:/g,";")+s.substring(i,s.length));let r=JM.exec(s||""),n={},o=14;for(;o--;)n[QM[o]]=r[o]||"";return e!=-1&&i!=-1&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=tB(n,n.path),n.queryKey=eB(n,n.query),n}function tB(s,t){const e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function eB(s,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,n){r&&(e[r]=n)}),e}let _0=class cr extends Yt{constructor(t,e={}){super(),this.binaryType=YM,this.writeBuffer=[],t&&typeof t=="object"&&(e=t,t=null),t?(t=Wc(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Wc(e.host).host),ph(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=$M(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=u0,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new ZM[t](i)}open(){let t;if(this.opts.rememberUpgrade&&cr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(t){let e=this.createTransport(t),i=!1;cr.priorWebsocketSuccess=!1;const r=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",u=>{if(!i)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;cr.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=e.name,this.emitReserved("upgradeError",d)}}))};function n(){i||(i=!0,c(),e.close(),e=null)}const o=u=>{const d=new Error("probe error: "+u);d.transport=e.name,n(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function h(){o("socket closed")}function l(u){e&&u.name!==e.name&&n()}const c=()=>{e.removeListener("open",r),e.removeListener("error",o),e.removeListener("close",a),this.off("close",h),this.off("upgrading",l)};e.once("open",r),e.once("error",o),e.once("close",a),this.once("close",h),this.once("upgrading",l),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onOpen(){if(this.readyState="open",cr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(e+=kM(r)),i>0&&e>this.maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,r){if(typeof e=="function"&&(r=e,e=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const n={type:t,data:e,options:i};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){cr.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const r=t.length;for(;i<r;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}};_0.protocol=u0;function sB(s,t="",e){let i=s;e=e||typeof location<"u"&&location,s==null&&(s=e.protocol+"//"+e.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=e.protocol+s:s=e.host+s),/^(https?|wss?):\/\//.test(s)||(typeof e<"u"?s=e.protocol+"//"+s:s="https://"+s),i=Wc(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const n=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+n+":"+i.port+t,i.href=i.protocol+"://"+n+(e&&e.port===i.port?"":":"+i.port),i}const iB=typeof ArrayBuffer=="function",rB=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,y0=Object.prototype.toString,nB=typeof Blob=="function"||typeof Blob<"u"&&y0.call(Blob)==="[object BlobConstructor]",oB=typeof File=="function"||typeof File<"u"&&y0.call(File)==="[object FileConstructor]";function Ju(s){return iB&&(s instanceof ArrayBuffer||rB(s))||nB&&s instanceof Blob||oB&&s instanceof File}function oa(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let e=0,i=s.length;e<i;e++)if(oa(s[e]))return!0;return!1}if(Ju(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return oa(s.toJSON(),!0);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&oa(s[e]))return!0;return!1}function aB(s){const t=[],e=s.data,i=s;return i.data=zc(e,t),i.attachments=t.length,{packet:i,buffers:t}}function zc(s,t){if(!s)return s;if(Ju(s)){const e={_placeholder:!0,num:t.length};return t.push(s),e}else if(Array.isArray(s)){const e=new Array(s.length);for(let i=0;i<s.length;i++)e[i]=zc(s[i],t);return e}else if(typeof s=="object"&&!(s instanceof Date)){const e={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=zc(s[i],t));return e}return s}function hB(s,t){return s.data=jc(s.data,t),delete s.attachments,s}function jc(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let e=0;e<s.length;e++)s[e]=jc(s[e],t);else if(typeof s=="object")for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=jc(s[e],t));return s}const lB=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],cB=5;var Et;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Et||(Et={}));class uB{constructor(t){this.replacer=t}encode(t){return(t.type===Et.EVENT||t.type===Et.ACK)&&oa(t)?this.encodeAsBinary({type:t.type===Et.EVENT?Et.BINARY_EVENT:Et.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Et.BINARY_EVENT||t.type===Et.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=aB(t),i=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(i),r}}function lm(s){return Object.prototype.toString.call(s)==="[object Object]"}class Qu extends Yt{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const i=e.type===Et.BINARY_EVENT;i||e.type===Et.BINARY_ACK?(e.type=i?Et.EVENT:Et.ACK,this.reconstructor=new dB(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(Ju(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(Et[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Et.BINARY_EVENT||i.type===Et.BINARY_ACK){const n=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(n,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(t.charAt(e+1)==="/"){const n=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(n,e)}else i.nsp="/";const r=t.charAt(e+1);if(r!==""&&Number(r)==r){const n=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}i.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=this.tryParse(t.substr(e));if(Qu.isPayloadValid(i.type,n))i.data=n;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Et.CONNECT:return lm(e);case Et.DISCONNECT:return e===void 0;case Et.CONNECT_ERROR:return typeof e=="string"||lm(e);case Et.EVENT:case Et.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&lB.indexOf(e[0])===-1);case Et.ACK:case Et.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class dB{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=hB(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const fB=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Qu,Encoder:uB,get PacketType(){return Et},protocol:cB},Symbol.toStringTag,{value:"Module"}));function Ve(s,t,e){return s.on(t,e),function(){s.off(t,e)}}const pB=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class x0 extends Yt{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ve(t,"open",this.onopen.bind(this)),Ve(t,"packet",this.onpacket.bind(this)),Ve(t,"error",this.onerror.bind(this)),Ve(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(pB.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const i={type:Et.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const o=this.ids++,a=e.pop();this._registerAckCallback(o,a),i.id=o}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){var i;const r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[t]=e;return}const n=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},r),o=(...a)=>{this.io.clearTimeoutFn(n),e.apply(this,a)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((i,r)=>{const n=(o,a)=>o?r(o):i(a);n.withError=!0,e.push(n),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((r,...n)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(r)):(this._queue.shift(),e&&e(null,...n)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Et.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Et.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Et.EVENT:case Et.BINARY_EVENT:this.onevent(t);break;case Et.ACK:case Et.BINARY_ACK:this.onack(t);break;case Et.DISCONNECT:this.ondisconnect();break;case Et.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let i=!1;return function(...r){i||(i=!0,e.packet({type:Et.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}}function Vr(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Vr.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*s);s=Math.floor(t*10)&1?s+e:s-e}return Math.min(s,this.max)|0};Vr.prototype.reset=function(){this.attempts=0};Vr.prototype.setMin=function(s){this.ms=s};Vr.prototype.setMax=function(s){this.max=s};Vr.prototype.setJitter=function(s){this.jitter=s};class Yc extends Yt{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,ph(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Vr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||fB;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new _0(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=Ve(e,"open",function(){i.onopen(),t&&t()}),n=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=Ve(e,"error",n);if(this._timeout!==!1){const a=this._timeout,h=this.setTimeoutFn(()=>{r(),n(new Error("timeout")),e.close()},a);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(r),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ve(t,"ping",this.onping.bind(this)),Ve(t,"data",this.ondata.bind(this)),Ve(t,"error",this.onerror.bind(this)),Ve(t,"close",this.onclose.bind(this)),Ve(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Zu(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new x0(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const i of e)if(this.nsps[i].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(r=>{r?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",r)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const sn={};function aa(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const e=sB(s,t.path||"/socket.io"),i=e.source,r=e.id,n=e.path,o=sn[r]&&n in sn[r].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let h;return a?h=new Yc(i,t):(sn[r]||(sn[r]=new Yc(i,t)),h=sn[r]),e.query&&!t.query&&(t.query=e.queryKey),h.socket(e.path,t)}Object.assign(aa,{Manager:Yc,Socket:x0,io:aa,connect:aa});var v0={};const Wr=zv(u1);Wr.use(Kv());Wr.use(TM);const b0=`${v0.VUE_APP_SERVER_ADDRESS}`,mB=`ws://${v0.VUE_APP_WS_ADDRESS}`;Wr.provide("apiEndpoint",`${b0}/api`);Wr.provide("socketServer",mB);const gB=aa(b0);Wr.provide("socket",gB);Wr.mount("#app");export{kr as B,Le as C,ju as D,be as E,WP as I,e0 as L,Vt as M,ds as P,fs as R,No as T,$c as U,dh as a,ie as b,uw as c,zp as d,eo as e,MP as f,Su as g,Jy as h,ff as i,Lr as j,fi as k,Ur as l,lr as m,AB as n,Jp as o,Vn as p,PP as q,FP as r,Qs as u,Dr as v,Ui as w};
